<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-äº‘åŸç”Ÿ/äº‘åŸç”Ÿå·¥å…·/harbor/harborå®‰è£…" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">harborå®‰è£… | æˆ‘çš„ç«™ç‚¹</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://pptfz.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://pptfz.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://pptfz.github.io/docs/äº‘åŸç”Ÿ/äº‘åŸç”Ÿå·¥å…·/harbor/harborå®‰è£…"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="harborå®‰è£… | æˆ‘çš„ç«™ç‚¹"><meta data-rh="true" name="description" content="harborå®˜ç½‘"><meta data-rh="true" property="og:description" content="harborå®˜ç½‘"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://pptfz.github.io/docs/äº‘åŸç”Ÿ/äº‘åŸç”Ÿå·¥å…·/harbor/harborå®‰è£…"><link data-rh="true" rel="alternate" href="https://pptfz.github.io/docs/äº‘åŸç”Ÿ/äº‘åŸç”Ÿå·¥å…·/harbor/harborå®‰è£…" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://pptfz.github.io/docs/äº‘åŸç”Ÿ/äº‘åŸç”Ÿå·¥å…·/harbor/harborå®‰è£…" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://SICNXLSDBZ-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="æˆ‘çš„ç«™ç‚¹" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.061a1b25.css">
<script src="/assets/js/runtime~main.11d7a557.js" defer="defer"></script>
<script src="/assets/js/main.21de94ca.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><div class="announcementBar_mb4j" style="background-color:pink;color:@091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">ä¸€åè¿ç»´ï¼Œä¸¤å°ç”µè„‘ï¼Œä¸‰é¤ä¸å®šï¼Œåªä¸ºè®¾å¤‡å·¥ä½œå››å¹³å…«ç¨³ï¼Œæ‹¼å¾—äº”è„ä¿±æŸï¼Œå…­ç¥æ— ä¸»ï¼Œä»ç„¶ä¸ƒç‚¹èµ·åºŠï¼Œå…«ç‚¹å‡ºå‘ï¼Œæ™šä¸Šä¹ç‚¹ä¸è¿”ï¼Œååˆ†è¾›è‹¦ï¼<br> åå¹´è¿ç»´ï¼Œä¹è½¬åŠŸæˆï¼Œå…«é¢å¼ ç½—ï¼Œå¿™å¾—ä¸ƒçªæµè¡€ï¼Œæ¢å¾—å…­ç¥ä¸å®ï¼Œäº”ä½“æ¬ å®‰ï¼Œä»ç„¶å››å¤„å¥”æ³¢ï¼Œä¸‰æ›´ä¸çœ ï¼Œåªä¸ºä¸¤ä¸ªé“œæ¿ï¼Œä¸€ç”Ÿæ‹¼æï¼</div></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">æˆ‘çš„ç«™ç‚¹</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">ç¬”è®°</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="æ–‡æ¡£ä¾§è¾¹æ " class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">ğŸ˜‚ ğŸ˜‚  ğŸ˜‚</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/github/githubä¸‹è½½åŠ é€Ÿ">github</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/go/goåŠŸèƒ½è„šæœ¬/k8s/è·å–k8sé›†ç¾¤èµ„æºé…ç½®">go</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/idea/vscode/vscodeå¥½ç”¨çš„æ’ä»¶">idea</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/linux/big-data/Ambari/CentOS7ä¸­ç”¨Ambariå¿«é€Ÿæ­å»ºå¤§æ•°æ®å¹³å°">linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/macä¸“åŒº/brewå®‰è£…">macä¸“åŒº</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/python/python-other/nginx+django+uwsgiéƒ¨ç½²é¡¹ç›®">python</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/web/css/cssåŸºç¡€çŸ¥è¯†">web</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/äº‘åŸç”Ÿ/k8s/helm/helm3å®‰è£…">äº‘åŸç”Ÿ</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/äº‘åŸç”Ÿ/k8s/helm/helm3å®‰è£…">k8s</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/äº‘åŸç”Ÿ/äº‘åŸç”Ÿå·¥å…·/harbor/harborå®‰è£…">äº‘åŸç”Ÿå·¥å…·</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/äº‘åŸç”Ÿ/äº‘åŸç”Ÿå·¥å…·/harbor/harborå®‰è£…">harbor</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/äº‘åŸç”Ÿ/äº‘åŸç”Ÿå·¥å…·/harbor/harborå®‰è£…">harborå®‰è£…</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/äº‘åŸç”Ÿ/äº‘åŸç”Ÿå·¥å…·/harbor/harboré…ç½®é•œåƒåŒæ­¥">harboré…ç½®é•œåƒåŒæ­¥</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/äº‘åŸç”Ÿ/å®¹å™¨/containerd/containerd é«˜çº§å‘½ä»¤è¡Œå·¥å…· nerdctl">å®¹å™¨</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/äº‘åŸç”Ÿ/ç›‘æ§/prometheus/prometheuså®‰è£…">ç›‘æ§</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/å…¶ä»–/wps/wpså†»ç»“çª—å£">å…¶ä»–</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/åšå®¢å·¥å…·/Docusaurus/Docusaurus å®‰è£…">åšå®¢å·¥å…·</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/æ“ä½œå°æŠ€å·§/linux/linuxä¸€äº›éªšæ“ä½œ">æ“ä½œå°æŠ€å·§</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/æ•°æ®åº“/mongodb/centos7å®‰è£…mongodb">æ•°æ®åº“</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/ç¿»è½¦é—®é¢˜åˆé›†/ç¿»è½¦é—®é¢˜-sshå¯†é’¥é—®é¢˜">ç¿»è½¦é—®é¢˜åˆé›†</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">äº‘åŸç”Ÿ</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">äº‘åŸç”Ÿå·¥å…·</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">harbor</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">harborå®‰è£…</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><h1>harborå®‰è£…</h1>
<p><a href="https://goharbor.io/" target="_blank" rel="noopener noreferrer">harborå®˜ç½‘</a></p>
<p><a href="https://github.com/goharbor/harbor" target="_blank" rel="noopener noreferrer">harbor githubåœ°å€</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1å®‰è£…å…ˆå†³æ¡ä»¶">1.å®‰è£…å…ˆå†³æ¡ä»¶<a href="#1å®‰è£…å…ˆå†³æ¡ä»¶" class="hash-link" aria-label="1.å®‰è£…å…ˆå†³æ¡ä»¶çš„ç›´æ¥é“¾æ¥" title="1.å®‰è£…å…ˆå†³æ¡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-ç³»ç»Ÿç¯å¢ƒè¯´æ˜">1.1 ç³»ç»Ÿç¯å¢ƒè¯´æ˜<a href="#11-ç³»ç»Ÿç¯å¢ƒè¯´æ˜" class="hash-link" aria-label="1.1 ç³»ç»Ÿç¯å¢ƒè¯´æ˜çš„ç›´æ¥é“¾æ¥" title="1.1 ç³»ç»Ÿç¯å¢ƒè¯´æ˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>ç¡¬ä»¶</strong></p>
<table><thead><tr><th>èµ„æº</th><th>æœ€ä½</th><th>æ¨è</th></tr></thead><tbody><tr><td>cpu</td><td>2c</td><td>4c</td></tr><tr><td>å†…å­˜</td><td>4GB</td><td>8GB</td></tr><tr><td>ç¡¬ç›˜</td><td>40GB</td><td>160GB</td></tr></tbody></table>
<p><strong>è½¯ä»¶</strong></p>
<table><thead><tr><th>è½¯ä»¶</th><th>ç‰ˆæœ¬</th><th>æè¿°</th></tr></thead><tbody><tr><td>docker</td><td>17.06.0-ce+</td><td>æœ‰å…³å®‰è£…è¯´æ˜ï¼Œè¯·å‚é˜… <a href="https://docs.docker.com/engine/installation/" target="_blank" rel="noopener noreferrer">Docker å¼•æ“æ–‡æ¡£</a></td></tr><tr><td>docker-compose</td><td>docker-compose (v1.18.0+) æˆ– docker-compose v2 (docker-compose-plugin)</td><td>æœ‰å…³å®‰è£…è¯´æ˜ï¼Œè¯·å‚é˜… <a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">Docker Compose æ–‡æ¡£</a></td></tr><tr><td>Openssl</td><td>æœ€æ–°ç‰ˆä¼˜å…ˆ</td><td>ç”¨äºä¸ºHarborç”Ÿæˆè¯ä¹¦å’Œå¯†é’¥</td></tr></tbody></table>
<p><strong>ç½‘ç»œç«¯å£</strong></p>
<table><thead><tr><th>ç«¯å£</th><th>åè®®</th><th>æè¿°</th></tr></thead><tbody><tr><td>443</td><td>HTTPS</td><td>Harbor é—¨æˆ·å’Œæ ¸å¿ƒ API åœ¨æ­¤ç«¯å£ä¸Šæ¥å— HTTPS è¯·æ±‚ã€‚æ‚¨å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æ›´æ”¹æ­¤ç«¯å£ã€‚</td></tr><tr><td>4443</td><td>HTTPS</td><td>è¿æ¥åˆ° Harbor çš„ Docker Content Trust æœåŠ¡ã€‚åªæœ‰åœ¨å¯ç”¨ Notary æ—¶æ‰éœ€è¦ã€‚æ‚¨å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æ›´æ”¹æ­¤ç«¯å£ã€‚</td></tr><tr><td>80</td><td>HTTP</td><td>Harbor é—¨æˆ·å’Œæ ¸å¿ƒ API åœ¨æ­¤ç«¯å£ä¸Šæ¥å— HTTP è¯·æ±‚ã€‚æ‚¨å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æ›´æ”¹æ­¤ç«¯å£ã€‚</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-å®‰è£…docker">1.2 å®‰è£…docker<a href="#12-å®‰è£…docker" class="hash-link" aria-label="1.2 å®‰è£…dockerçš„ç›´æ¥é“¾æ¥" title="1.2 å®‰è£…dockerçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># é˜¿é‡Œäº‘yumæº</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">yum -y install docker-ce</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl start docker &amp;&amp; systemctl enable docker  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># é…ç½®é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿåœ°å€</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat &gt; /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;registry-mirrors&quot;: [&quot;https://gqk8w9va.mirror.aliyuncs.com&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># é…ç½®å®Œæˆåé‡å¯docker</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl restart docker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-å®‰è£…docker-compose">1.3 å®‰è£…docker-compose<a href="#13-å®‰è£…docker-compose" class="hash-link" aria-label="1.3 å®‰è£…docker-composeçš„ç›´æ¥é“¾æ¥" title="1.3 å®‰è£…docker-composeçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">export DOCKER_COMPOSE_VERSION=2.17.3</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">curl -L &quot;https://github.com/docker/compose/releases/download/v${DOCKER_COMPOSE_VERSIO}/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose &amp;&amp; chmod +x /usr/local/bin/docker-compose</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2ä¸‹è½½å®‰è£…åŒ…">2.ä¸‹è½½å®‰è£…åŒ…<a href="#2ä¸‹è½½å®‰è£…åŒ…" class="hash-link" aria-label="2.ä¸‹è½½å®‰è£…åŒ…çš„ç›´æ¥é“¾æ¥" title="2.ä¸‹è½½å®‰è£…åŒ…çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p><a href="https://github.com/goharbor/harbor/releases" target="_blank" rel="noopener noreferrer">harborå®‰è£…åŒ…ä¸‹è½½åœ°å€</a></p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>è¯´æ˜</div><div class="admonitionContent_BuS1"><p>harboræœ‰2ç§å®‰è£…æ–¹å¼</p><ul>
<li><strong>åœ¨çº¿å®‰è£…ç¨‹åº</strong> ï¼šåœ¨çº¿å®‰è£…ç¨‹åºä» Docker hub ä¸‹è½½Harboré•œåƒï¼Œå› æ­¤å®‰è£…ç¨‹åºçš„ä½“ç§¯éå¸¸å°ã€‚å®‰è£…åŒ…åç§° <code>harbor-online-installer-v{version}.tgz</code></li>
<li><strong>ç¦»çº¿å®‰è£…ç¨‹åº</strong> ï¼šå¦‚æœè¦éƒ¨ç½² Harbor çš„ä¸»æœºæ²¡æœ‰è¿æ¥åˆ° Internetï¼Œè¯·ä½¿ç”¨ç¦»çº¿å®‰è£…ç¨‹åºã€‚ç¦»çº¿å®‰è£…ç¨‹åºåŒ…å«é¢„æ„å»ºçš„å›¾åƒï¼Œå› æ­¤å®ƒæ¯”åœ¨çº¿å®‰è£…ç¨‹åºå¤§ã€‚å®‰è£…åŒ…åç§° <code>harbor-offline-installer-v{version}.tgz</code></li>
</ul></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-åˆ›å»ºç›®å½•">2.1 åˆ›å»ºç›®å½•<a href="#21-åˆ›å»ºç›®å½•" class="hash-link" aria-label="2.1 åˆ›å»ºç›®å½•çš„ç›´æ¥é“¾æ¥" title="2.1 åˆ›å»ºç›®å½•çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[ -d /data ] || mkdir /data &amp;&amp; cd /data</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-ä¸‹è½½å®‰è£…åŒ…">2.2 ä¸‹è½½å®‰è£…åŒ…<a href="#22-ä¸‹è½½å®‰è£…åŒ…" class="hash-link" aria-label="2.2 ä¸‹è½½å®‰è£…åŒ…çš„ç›´æ¥é“¾æ¥" title="2.2 ä¸‹è½½å®‰è£…åŒ…çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># ä¸‹è½½å®‰è£…åŒ…</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">wget https://github.com/goharbor/harbor/releases/download/v2.8.0/harbor-online-installer-v2.8.0.tgz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="23-éªŒè¯åŒ…å¯é€‰">2.3 éªŒè¯åŒ…(å¯é€‰)<a href="#23-éªŒè¯åŒ…å¯é€‰" class="hash-link" aria-label="2.3 éªŒè¯åŒ…(å¯é€‰)çš„ç›´æ¥é“¾æ¥" title="2.3 éªŒè¯åŒ…(å¯é€‰)çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>å¯ä¸‹è½½ç›¸åº” <code>*.asc</code> æ–‡ä»¶ä»¥éªŒè¯åŒ…æ˜¯å¦ä¸ºæ­£ç‰ˆ</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">wget https://github.com/goharbor/harbor/releases/download/v2.8.0/harbor-offline-installer-v2.8.0.tgz.asc</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="24-è§£å‹ç¼©å®‰è£…åŒ…">2.4 è§£å‹ç¼©å®‰è£…åŒ…<a href="#24-è§£å‹ç¼©å®‰è£…åŒ…" class="hash-link" aria-label="2.4 è§£å‹ç¼©å®‰è£…åŒ…çš„ç›´æ¥é“¾æ¥" title="2.4 è§£å‹ç¼©å®‰è£…åŒ…çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">tar xf harbor-online-installer-v2.8.0.tgz &amp;&amp; cd harbor</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3é…ç½®å¯¹harborçš„httpsè®¿é—®">3.é…ç½®å¯¹harborçš„httpsè®¿é—®<a href="#3é…ç½®å¯¹harborçš„httpsè®¿é—®" class="hash-link" aria-label="3.é…ç½®å¯¹harborçš„httpsè®¿é—®çš„ç›´æ¥é“¾æ¥" title="3.é…ç½®å¯¹harborçš„httpsè®¿é—®çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-ç”Ÿæˆè¯ä¹¦é¢å‘æœºæ„è¯ä¹¦">3.1 ç”Ÿæˆè¯ä¹¦é¢å‘æœºæ„è¯ä¹¦<a href="#31-ç”Ÿæˆè¯ä¹¦é¢å‘æœºæ„è¯ä¹¦" class="hash-link" aria-label="3.1 ç”Ÿæˆè¯ä¹¦é¢å‘æœºæ„è¯ä¹¦çš„ç›´æ¥é“¾æ¥" title="3.1 ç”Ÿæˆè¯ä¹¦é¢å‘æœºæ„è¯ä¹¦çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="311-åˆ›å»ºè¯ä¹¦å­˜æ”¾ç›®å½•">3.1.1 åˆ›å»ºè¯ä¹¦å­˜æ”¾ç›®å½•<a href="#311-åˆ›å»ºè¯ä¹¦å­˜æ”¾ç›®å½•" class="hash-link" aria-label="3.1.1 åˆ›å»ºè¯ä¹¦å­˜æ”¾ç›®å½•çš„ç›´æ¥é“¾æ¥" title="3.1.1 åˆ›å»ºè¯ä¹¦å­˜æ”¾ç›®å½•çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># å½“å‰ç›®å½•ä¸º /data/harbor/cert</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir cert &amp;&amp; cd cert</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="312-ç”Ÿæˆcaè¯ä¹¦ç§é’¥">3.1.2 ç”Ÿæˆcaè¯ä¹¦ç§é’¥<a href="#312-ç”Ÿæˆcaè¯ä¹¦ç§é’¥" class="hash-link" aria-label="3.1.2 ç”Ÿæˆcaè¯ä¹¦ç§é’¥çš„ç›´æ¥é“¾æ¥" title="3.1.2 ç”Ÿæˆcaè¯ä¹¦ç§é’¥çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># ä¼šç”Ÿæˆ ca.key</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ openssl genrsa -out ca.key 4096</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Generating RSA private key, 4096 bit long modulus</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">......................................................................................................................................++</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">..........................................................++</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">e is 65537 (0x10001)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="313-ç”Ÿæˆcaè¯ä¹¦">3.1.3 ç”Ÿæˆcaè¯ä¹¦<a href="#313-ç”Ÿæˆcaè¯ä¹¦" class="hash-link" aria-label="3.1.3 ç”Ÿæˆcaè¯ä¹¦çš„ç›´æ¥é“¾æ¥" title="3.1.3 ç”Ÿæˆcaè¯ä¹¦çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># ä¼šç”Ÿæˆ ca.crt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl req -x509 -new -nodes -sha512 -days 3650 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> -subj &quot;/C=CN/ST=Beijing/L=Beijing/O=ops/OU=ops/CN=harbor.ops.com&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> -key ca.key \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> -out ca.crt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦">3.2 ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦<a href="#32-ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦" class="hash-link" aria-label="3.2 ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦çš„ç›´æ¥é“¾æ¥" title="3.2 ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="321-ç”Ÿæˆç§é’¥">3.2.1 ç”Ÿæˆç§é’¥<a href="#321-ç”Ÿæˆç§é’¥" class="hash-link" aria-label="3.2.1 ç”Ÿæˆç§é’¥çš„ç›´æ¥é“¾æ¥" title="3.2.1 ç”Ÿæˆç§é’¥çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># ä¼šç”Ÿæˆ harbor.ops.com.key</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl genrsa -out harbor.ops.com.key 4096</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="322-ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚-csr">3.2.2 ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚ (CSR)<a href="#322-ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚-csr" class="hash-link" aria-label="3.2.2 ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚ (CSR)çš„ç›´æ¥é“¾æ¥" title="3.2.2 ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚ (CSR)çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>è¯´æ˜</div><div class="admonitionContent_BuS1"><p>è°ƒæ•´é€‰é¡¹ä¸­çš„å€¼ <code>-subj</code> ä»¥åæ˜ æ‚¨çš„ç»„ç»‡ã€‚å¦‚æœä½¿ç”¨ FQDN è¿æ¥ Harbor ä¸»æœºï¼Œåˆ™å¿…é¡»å°†å…¶æŒ‡å®šä¸ºé€šç”¨åç§° ( <code>CN</code>) å±æ€§ï¼Œå¹¶åœ¨å¯†é’¥å’Œ CSR æ–‡ä»¶åä¸­ä½¿ç”¨å®ƒã€‚</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># ä¼šç”Ÿæˆ harbor.ops.com.csr</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl req -sha512 -new \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -subj &quot;/C=CN/ST=Beijing/L=Beijing/O=ops/OU=ops/CN=harbor.ops.com&quot; \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -key harbor.ops.com.key \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -out harbor.ops.com.csr</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="323-ç”Ÿæˆ-x509-v3-æ‰©å±•æ–‡ä»¶">3.2.3 ç”Ÿæˆ x509 v3 æ‰©å±•æ–‡ä»¶<a href="#323-ç”Ÿæˆ-x509-v3-æ‰©å±•æ–‡ä»¶" class="hash-link" aria-label="3.2.3 ç”Ÿæˆ x509 v3 æ‰©å±•æ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="3.2.3 ç”Ÿæˆ x509 v3 æ‰©å±•æ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>è¯´æ˜</div><div class="admonitionContent_BuS1"><p>æ— è®ºæ‚¨æ˜¯ä½¿ç”¨ FQDN è¿˜æ˜¯ IP åœ°å€è¿æ¥åˆ°æ‚¨çš„ Harbor ä¸»æœºï¼Œæ‚¨éƒ½å¿…é¡»åˆ›å»ºæ­¤æ–‡ä»¶ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥ä¸ºæ‚¨çš„ Harbor ä¸»æœºç”Ÿæˆç¬¦åˆä¸»é¢˜å¤‡ç”¨åç§° (SAN) å’Œ x509 v3 çš„è¯ä¹¦æ‰©å±•è¦æ±‚ã€‚æ›¿æ¢ <code>DNS</code> æ¡ç›®ä»¥åæ˜ æ‚¨çš„åŸŸã€‚</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat &gt; v3.ext &lt;&lt;-EOF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">authorityKeyIdentifier=keyid,issuer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">basicConstraints=CA:FALSE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">extendedKeyUsage = serverAuth</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">subjectAltName = @alt_names</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[alt_names]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DNS.1=harbor.ops.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DNS.2=harbor.ops</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">DNS.3=harbor</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="324-ä½¿ç”¨-v3ext-æ–‡ä»¶ç”Ÿæˆè¯ä¹¦">3.2.4 ä½¿ç”¨ <code>v3.ext</code> æ–‡ä»¶ç”Ÿæˆè¯ä¹¦<a href="#324-ä½¿ç”¨-v3ext-æ–‡ä»¶ç”Ÿæˆè¯ä¹¦" class="hash-link" aria-label="324-ä½¿ç”¨-v3ext-æ–‡ä»¶ç”Ÿæˆè¯ä¹¦çš„ç›´æ¥é“¾æ¥" title="324-ä½¿ç”¨-v3ext-æ–‡ä»¶ç”Ÿæˆè¯ä¹¦çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># ä¼šç”Ÿæˆ ca.srl å’Œ harbor.ops.com.crt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl x509 -req -sha512 -days 3650 \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -extfile v3.ext \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -CA ca.crt -CAkey ca.key -CAcreateserial \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -in harbor.ops.com.csr \</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -out harbor.ops.com.crt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-å‘harborå’Œdockeræä¾›è¯ä¹¦">3.3 å‘harborå’Œdockeræä¾›è¯ä¹¦<a href="#33-å‘harborå’Œdockeræä¾›è¯ä¹¦" class="hash-link" aria-label="3.3 å‘harborå’Œdockeræä¾›è¯ä¹¦çš„ç›´æ¥é“¾æ¥" title="3.3 å‘harborå’Œdockeræä¾›è¯ä¹¦çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>ç”Ÿæˆ <code>ca.crt</code> ã€ <code>yourdomain.com.crt</code> å’Œ <code>yourdomain.com.key</code> æ–‡ä»¶åï¼Œå¿…é¡»å°†å®ƒä»¬æä¾›ç»™ Harbor å’Œ Dockerï¼Œå¹¶é‡æ–°é…ç½® Harbor ä»¥ä½¿ç”¨å®ƒä»¬ã€‚</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="331-è½¬æ¢-crt-ä¸º-cert">3.3.1 è½¬æ¢ <code>.crt</code> ä¸º <code>.cert</code><a href="#331-è½¬æ¢-crt-ä¸º-cert" class="hash-link" aria-label="331-è½¬æ¢-crt-ä¸º-certçš„ç›´æ¥é“¾æ¥" title="331-è½¬æ¢-crt-ä¸º-certçš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>è¯´æ˜</div><div class="admonitionContent_BuS1"><p>Docker å®ˆæŠ¤è¿›ç¨‹å°† <code>.crt</code> æ–‡ä»¶è§£é‡Šä¸º CA è¯ä¹¦ï¼Œ<code>.cert</code> å°†æ–‡ä»¶è§£é‡Šä¸ºå®¢æˆ·ç«¯è¯ä¹¦ã€‚</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># è½¬æ¢è¯ä¹¦æ–‡ä»¶</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">openssl x509 -inform PEM -in harbor.ops.com.crt -out harbor.ops.com.cert</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="333-å°†æœåŠ¡å™¨è¯ä¹¦å¯†é’¥å’Œ-ca-æ–‡ä»¶å¤åˆ¶åˆ°-harbor-ä¸»æœºä¸Šçš„-docker-è¯ä¹¦æ–‡ä»¶å¤¹ä¸­">3.3.3 å°†æœåŠ¡å™¨è¯ä¹¦ã€å¯†é’¥å’Œ CA æ–‡ä»¶å¤åˆ¶åˆ° Harbor ä¸»æœºä¸Šçš„ Docker è¯ä¹¦æ–‡ä»¶å¤¹ä¸­<a href="#333-å°†æœåŠ¡å™¨è¯ä¹¦å¯†é’¥å’Œ-ca-æ–‡ä»¶å¤åˆ¶åˆ°-harbor-ä¸»æœºä¸Šçš„-docker-è¯ä¹¦æ–‡ä»¶å¤¹ä¸­" class="hash-link" aria-label="3.3.3 å°†æœåŠ¡å™¨è¯ä¹¦ã€å¯†é’¥å’Œ CA æ–‡ä»¶å¤åˆ¶åˆ° Harbor ä¸»æœºä¸Šçš„ Docker è¯ä¹¦æ–‡ä»¶å¤¹ä¸­çš„ç›´æ¥é“¾æ¥" title="3.3.3 å°†æœåŠ¡å™¨è¯ä¹¦ã€å¯†é’¥å’Œ CA æ–‡ä»¶å¤åˆ¶åˆ° Harbor ä¸»æœºä¸Šçš„ Docker è¯ä¹¦æ–‡ä»¶å¤¹ä¸­çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>è¯´æ˜</div><div class="admonitionContent_BuS1"><p>å¦‚æœæ‚¨å°†é»˜è®¤çš„nginxç«¯å£443æ˜ å°„åˆ°å…¶ä»–ç«¯å£ï¼Œè¯·åˆ›å»º <code>/etc/docker/certs.d/yourdomain.com:por</code>tæˆ– <code>/etc/docker/certs.d/harbor_IP:port</code> æ–‡ä»¶å¤¹ã€‚</p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># åˆ›å»ºç›®å½•</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[ -d /etc/docker/certs.d/harbor.ops.com ] || mkdir -p /etc/docker/certs.d/harbor.ops.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># æ‹·è´è¯ä¹¦æ–‡ä»¶</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cp harbor.ops.com.cert /etc/docker/certs.d/harbor.ops.com/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cp harbor.ops.com.key /etc/docker/certs.d/harbor.ops.com/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cp ca.crt /etc/docker/certs.d/harbor.ops.com/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="334-é‡å¯docker">3.3.4 é‡å¯docker<a href="#334-é‡å¯docker" class="hash-link" aria-label="3.3.4 é‡å¯dockerçš„ç›´æ¥é“¾æ¥" title="3.3.4 é‡å¯dockerçš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl restart docker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4éƒ¨ç½²harbor">4.éƒ¨ç½²harbor<a href="#4éƒ¨ç½²harbor" class="hash-link" aria-label="4.éƒ¨ç½²harborçš„ç›´æ¥é“¾æ¥" title="4.éƒ¨ç½²harborçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-é…ç½®harbor-ymlæ–‡ä»¶">4.1 é…ç½®harbor ymlæ–‡ä»¶<a href="#41-é…ç½®harbor-ymlæ–‡ä»¶" class="hash-link" aria-label="4.1 é…ç½®harbor ymlæ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="4.1 é…ç½®harbor ymlæ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>harboråœ¨çº¿å®‰è£…åŒ…è§£å‹åä¼šæœ‰ä¸€ä¸ª <code>harbor.yml.tmpl</code> ç¤ºä¾‹é…ç½®æ–‡ä»¶</p>
<p>å°†æ­¤æ–‡ä»¶é‡å‘½åä¸º <code>harbor.yml</code> æ¥è®¾ç½®ç³»ç»Ÿçº§å‚æ•°ã€‚ è¿™äº›å‚æ•°åœ¨è¿è¡Œ <code>install.sh</code> è„šæœ¬ä»¥å®‰è£…æˆ–é‡æ–°é…ç½® Harbor æ—¶ç”Ÿæ•ˆã€‚</p>
<p>åœ¨åˆå§‹éƒ¨ç½²å’Œå¯åŠ¨ Harbor ä¹‹åï¼Œå¯ä»¥åœ¨ Harbor Web Portal ä¸­æ‰§è¡Œå…¶ä»–é…ç½®ã€‚</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="411-å‚æ•°è¯´æ˜">4.1.1 å‚æ•°è¯´æ˜<a href="#411-å‚æ•°è¯´æ˜" class="hash-link" aria-label="4.1.1 å‚æ•°è¯´æ˜çš„ç›´æ¥é“¾æ¥" title="4.1.1 å‚æ•°è¯´æ˜çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="4111-å¿…è¦å‚æ•°">4.1.1.1 å¿…è¦å‚æ•°<a href="#4111-å¿…è¦å‚æ•°" class="hash-link" aria-label="4.1.1.1 å¿…è¦å‚æ•°çš„ç›´æ¥é“¾æ¥" title="4.1.1.1 å¿…è¦å‚æ•°çš„ç›´æ¥é“¾æ¥">â€‹</a></h5>
<ul>
<li>
<p><code>hostname</code> : æŒ‡å®šè¦éƒ¨ç½² Harbor çš„ç›®æ ‡ä¸»æœºçš„ IP åœ°å€æˆ–å®Œå…¨é™å®šåŸŸå (FQDN)ã€‚è¿™æ˜¯æ‚¨è®¿é—® Harbor Portal å’Œæ³¨å†ŒæœåŠ¡çš„åœ°å€ã€‚ä¾‹å¦‚ï¼Œ<code>192.168.1.10</code>æˆ–<code>reg.yourdomain.com</code>ã€‚æ³¨å†Œè¡¨æœåŠ¡å¿…é¡»å¯ä¾›å¤–éƒ¨å®¢æˆ·ç«¯è®¿é—®ï¼Œå› æ­¤ä¸è¦å°†<code>localhost</code>ã€<code>127.0.0.1</code>æˆ–æŒ‡å®š<code>0.0.0.0</code>ä¸ºä¸»æœºåã€‚</p>
</li>
<li>
<p><code>http</code> : ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨httpï¼Œåªæœ‰åœ¨æ²¡æœ‰è¿æ¥åˆ°å¤–éƒ¨äº’è”ç½‘çš„æµ‹è¯•æˆ–å¼€å‘ç¯å¢ƒæ‰å¯ä»¥ä½¿ç”¨httpã€‚</p>
<ul>
<li><code>port</code> : ç”¨äº Harbor é—¨æˆ·å’Œ Docker å‘½ä»¤çš„ HTTP ç«¯å£å·ã€‚é»˜è®¤å€¼ä¸º 80ã€‚</li>
</ul>
</li>
<li>
<p><code>https</code>  : ä½¿ç”¨ HTTPS è®¿é—® Harbor Portal å’Œä»¤ç‰Œ/é€šçŸ¥æœåŠ¡ã€‚</p>
<ul>
<li>
<p><code>port</code> : ç”¨äº Harbor é—¨æˆ·å’Œ Docker å‘½ä»¤çš„ HTTPS ç«¯å£å·ã€‚é»˜è®¤å€¼ä¸º 443ã€‚</p>
</li>
<li>
<p><code>certificate</code> : SSL è¯ä¹¦çš„è·¯å¾„ã€‚</p>
</li>
<li>
<p><code>private_key</code> : SSL å¯†é’¥çš„è·¯å¾„ã€‚</p>
</li>
</ul>
</li>
<li>
<p><code>internal_tls</code> : ä½¿ç”¨ HTTPS åœ¨ Harbor ç»„ä»¶ä¹‹é—´è¿›è¡Œé€šä¿¡</p>
<ul>
<li><code>enabled</code> : å°†æ­¤æ ‡å¿—è®¾ç½®ä¸º<code>true</code>è¡¨ç¤ºå·²å¯ç”¨å†…éƒ¨ tls</li>
<li><code>dir</code> : åŒ…å«å†…éƒ¨è¯ä¹¦å’Œå¯†é’¥çš„ç›®å½•çš„è·¯å¾„</li>
</ul>
</li>
<li>
<p><code>harbor_admin_password</code> : è®¾ç½®Harborç³»ç»Ÿç®¡ç†å‘˜çš„åˆå§‹å¯†ç ã€‚æ­¤å¯†ç ä»…åœ¨ Harbor é¦–æ¬¡å¯åŠ¨æ—¶ä½¿ç”¨ã€‚åœ¨éšåçš„ç™»å½•ä¸­ï¼Œæ­¤è®¾ç½®å°†è¢«å¿½ç•¥ï¼Œç®¡ç†å‘˜å¯†ç å°†åœ¨ Harbor é—¨æˆ·ä¸­è®¾ç½®ã€‚é»˜è®¤çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯<code>admin</code>å’Œ<code>Harbor12345</code>ã€‚</p>
</li>
<li>
<p><code>database</code> : ä½¿ç”¨æœ¬åœ° PostgreSQL æ•°æ®åº“ã€‚æ‚¨å¯ä»¥é€‰æ‹©é…ç½®å¤–éƒ¨æ•°æ®åº“ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ‚¨å¯ä»¥åœç”¨æ­¤é€‰é¡¹ã€‚</p>
<ul>
<li><code>password</code> : è®¾ç½®æœ¬åœ°æ•°æ®åº“çš„rootå¯†ç ã€‚</li>
<li><code>max_idle_conns</code> : ç©ºé—²è¿æ¥æ± ä¸­çš„æœ€å¤§è¿æ¥æ•°ã€‚å¦‚æœå®ƒ <code>&lt;=0</code>ï¼Œåˆ™ä¸ä¿ç•™ç©ºé—²è¿æ¥ã€‚</li>
<li><code>max_open_conns</code> : åˆ°æ•°æ®åº“çš„æœ€å¤§æ‰“å¼€è¿æ¥æ•°ã€‚å¦‚æœ <code>&lt;= 0</code>ï¼Œåˆ™æ‰“å¼€çš„è¿æ¥æ•°æ²¡æœ‰é™åˆ¶ã€‚</li>
<li><code>conn_max_lifetime</code> : å¯ä»¥é‡ç”¨è¿æ¥çš„æœ€é•¿æ—¶é—´ã€‚å¦‚æœå®ƒ <code>&lt;= 0</code>ï¼Œåˆ™è¿æ¥ä¸ä¼šç”±äºè¿æ¥çš„å¹´é¾„è€Œå…³é—­ã€‚</li>
<li><code>conn_max_idle_time</code> : è¿æ¥ç©ºé—²çš„æœ€é•¿æ—¶é—´ã€‚å¦‚æœå®ƒ <code>&lt;= 0</code>ï¼Œåˆ™è¿æ¥ä¸ä¼šç”±äºè¿æ¥çš„ç©ºé—²æ—¶é—´è€Œå…³é—­ã€‚</li>
</ul>
</li>
<li>
<p><code>data_volume</code> : ç›®æ ‡ä¸»æœºä¸Šå­˜å‚¨ Harbor æ•°æ®çš„ä½ç½®ã€‚å³ä½¿åˆ é™¤ å’Œ/æˆ– é‡æ–°åˆ›å»º Harbor çš„å®¹å™¨ï¼Œæ­¤æ•°æ®ä¹Ÿä¿æŒä¸å˜ã€‚æ‚¨å¯ä»¥é€‰æ‹©é…ç½®å¤–éƒ¨å­˜å‚¨ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹åœç”¨æ­¤é€‰é¡¹å¹¶å¯ç”¨<code>storage_service</code>ã€‚é»˜è®¤å€¼ä¸º<code>/data</code>ã€‚</p>
</li>
<li>
<p><code>trivy</code> : é…ç½® Trivy æ‰«æä»ªã€‚</p>
<ul>
<li><code>ignore_unfixed</code> : å°†æ ‡å¿—è®¾ç½®ä¸º<code>true</code>ä»…æ˜¾ç¤ºå·²ä¿®å¤çš„æ¼æ´ã€‚é»˜è®¤å€¼ä¸º<code>false</code></li>
<li><code>security_check</code> : è¦æ£€æµ‹çš„å®‰å…¨é—®é¢˜çš„é€—å·åˆ†éš”åˆ—è¡¨ã€‚å¯èƒ½çš„å€¼ä¸º<code>vuln</code>,<code>config</code>å’Œ<code>secret</code>ã€‚é»˜è®¤ä¸º<code>vuln</code>.</li>
<li><code>skip_update</code> : æ‚¨å¯èƒ½å¸Œæœ›åœ¨æµ‹è¯•æˆ– CI/CD ç¯å¢ƒä¸­å¯ç”¨æ­¤æ ‡å¿—ä»¥é¿å… GitHub é€Ÿç‡é™åˆ¶é—®é¢˜ã€‚å¦‚æœå¯ç”¨è¯¥æ ‡å¿—ï¼Œæ‚¨å¿…é¡»<code>trivy-offline.tar.gz</code>æ‰‹åŠ¨ä¸‹è½½å­˜æ¡£ï¼Œæå–å’Œ<code>trivy.db</code>æ–‡ä»¶<code>metadata.json</code>å¹¶å°†å®ƒä»¬å®‰è£…åœ¨<code>/home/scanner/.cache/trivy/db/trivy.db</code>å®¹å™¨ä¸­çš„è·¯å¾„ä¸­ã€‚é»˜è®¤å€¼ä¸º<code>false</code></li>
<li><code>insecure</code> : å°†æ ‡å¿—è®¾ç½®ä¸º<code>true</code>è·³è¿‡éªŒè¯æ³¨å†Œè¡¨è¯ä¹¦ã€‚é»˜è®¤å€¼ä¸º<code>false</code></li>
<li><code>github_token</code> : è®¾ç½® GitHub è®¿é—®ä»¤ç‰Œä»¥ä¸‹è½½ Trivy DBã€‚Trivy DB ç”± Trivy ä» GitHub å‘å¸ƒé¡µé¢ä¸‹è½½ã€‚æ¥è‡ª GitHub çš„åŒ¿åä¸‹è½½å—æ¯å°æ—¶ 60 æ¬¡è¯·æ±‚çš„é™åˆ¶ã€‚é€šå¸¸è¿™æ ·çš„é€Ÿç‡é™åˆ¶è¶³ä»¥ç”¨äºç”Ÿäº§æ“ä½œã€‚å¦‚æœå‡ºäºä»»ä½•åŸå› è¿™è¿˜ä¸å¤Ÿï¼Œæ‚¨å¯ä»¥é€šè¿‡æŒ‡å®š GitHub è®¿é—®ä»¤ç‰Œå°†é€Ÿç‡é™åˆ¶æé«˜åˆ°æ¯å°æ—¶ 5000 ä¸ªè¯·æ±‚ã€‚æœ‰å…³ GitHub é€Ÿç‡é™åˆ¶çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://developer.github.com/v3/#rate-limiting" target="_blank" rel="noopener noreferrer">https://developer.github.com/v3/#rate-limiting</a> ã€‚æ‚¨å¯ä»¥æŒ‰ç…§ <a href="https://help.github.com/en/github" target="_blank" rel="noopener noreferrer">https://help.github.com/en/github</a> ä¸­çš„è¯´æ˜åˆ›å»º GitHub ä»¤ç‰Œ/authenticating-to-github/creating-a-personal-access-token-for-the-command-line</li>
</ul>
</li>
<li>
<p><code>jobservice</code></p>
<ul>
<li><code>max_job_workers</code> : ä½œä¸šæœåŠ¡ä¸­å¤åˆ¶å·¥ä½œè€…çš„æœ€å¤§æ•°é‡ã€‚å¯¹äºæ¯ä¸ªå›¾åƒå¤åˆ¶ä½œä¸šï¼Œå·¥ä½œäººå‘˜å°†å­˜å‚¨åº“çš„æ‰€æœ‰æ ‡ç­¾åŒæ­¥åˆ°è¿œç¨‹ç›®æ ‡ã€‚å¢åŠ è¿™ä¸ªæ•°å­—å…è®¸ç³»ç»Ÿä¸­æœ‰æ›´å¤šçš„å¹¶å‘å¤åˆ¶ä½œä¸šã€‚ä½†æ˜¯ï¼Œç”±äºæ¯ä¸ªworkeréƒ½ä¼šæ¶ˆè€—ä¸€å®šçš„ç½‘ç»œ/CPU/IOèµ„æºï¼Œæ‰€ä»¥æ ¹æ®å®¿ä¸»æœºçš„ç¡¬ä»¶èµ„æºæ¥è®¾ç½®è¯¥å±æ€§çš„å€¼ã€‚é»˜è®¤å€¼ä¸º 10ã€‚</li>
</ul>
</li>
<li>
<p><code>notification</code></p>
<ul>
<li><code>webhook_job_max_retry</code> : è®¾ç½® Web æŒ‚é’©ä½œä¸šçš„æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚é»˜è®¤å€¼ä¸º 10ã€‚</li>
</ul>
</li>
<li>
<p><code>log</code> : é…ç½®æ—¥å¿—è®°å½•ã€‚Harbor ä½¿ç”¨ rsyslog æ¥æ”¶é›†æ¯ä¸ªå®¹å™¨çš„æ—¥å¿—ã€‚</p>
<ul>
<li><code>level</code> : å°†æ—¥å¿—è®°å½•çº§åˆ«è®¾ç½®ä¸º<code>debug</code>ã€<code>info</code>ã€<code>warning</code>ã€<code>error</code>æˆ–<code>fatal</code>ã€‚é»˜è®¤å€¼ä¸º<code>info</code>ã€‚</li>
<li><code>local</code> : è®¾ç½®æ—¥å¿—ä¿ç•™å‚æ•°<!-- -->
<ul>
<li><code>rotate_count``rotate_count</code> : æ—¥å¿—æ–‡ä»¶åœ¨è¢«åˆ é™¤ä¹‹å‰ä¼šè½®æ¢å‡ æ¬¡ã€‚å¦‚æœè®¡æ•°ä¸º 0ï¼Œæ—§ç‰ˆæœ¬å°†è¢«åˆ é™¤è€Œä¸æ˜¯è½®æ¢ã€‚é»˜è®¤å€¼ä¸º 50ã€‚</li>
<li><code>rotate_size</code> : æ—¥å¿—æ–‡ä»¶åªæœ‰åœ¨å¤§äº<code>rotate_size</code>å­—èŠ‚æ—¶æ‰ä¼šè½®æ¢ã€‚ç”¨äº<code>k</code>åƒå­—èŠ‚ã€<code>M</code>å…†å­—èŠ‚å’Œ<code>G</code>åƒå…†å­—èŠ‚ã€‚ <code>100</code>ã€<code>100k</code>å’Œ<code>100M</code>éƒ½æ˜¯<code>100G</code>æœ‰æ•ˆå€¼ã€‚é»˜è®¤ä¸º 200Mã€‚</li>
<li><code>location</code> : è®¾ç½®æ—¥å¿—å­˜æ”¾ç›®å½•ã€‚é»˜è®¤å€¼ä¸º<code>/var/log/harbor</code>ã€‚</li>
</ul>
</li>
<li><code>external_endpoint</code> : å¯ç”¨æ­¤é€‰é¡¹å¯å°†æ—¥å¿—è½¬å‘åˆ°ç³»ç»Ÿæ—¥å¿—æœåŠ¡å™¨ã€‚<!-- -->
<ul>
<li><code>protocol</code> : ç³»ç»Ÿæ—¥å¿—æœåŠ¡å™¨çš„ä¼ è¾“åè®®ã€‚é»˜è®¤ä¸º TCPã€‚</li>
<li><code>host</code> : ç³»ç»Ÿæ—¥å¿—æœåŠ¡å™¨çš„ URLã€‚</li>
<li><code>port</code> : syslogæœåŠ¡å™¨ç›‘å¬çš„ç«¯å£</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>proxy</code> : é…ç½®ç”± trivy-adapterã€å¤åˆ¶ä½œä¸šæœåŠ¡å’Œ Harbor ä½¿ç”¨çš„ä»£ç†ã€‚å¦‚æœä¸éœ€è¦ä»£ç†ï¼Œè¯·ç•™ç©ºã€‚æœ‰äº›ä»£ç†æœ‰ç™½åå•è®¾ç½®ï¼Œå¦‚æœå¯ç”¨äº†Trivyï¼Œä½ éœ€è¦å°†ä»¥ä¸‹urlæ·»åŠ åˆ°ä»£ç†æœåŠ¡å™¨ç™½åå•ä¸­ï¼š<code>github.com</code>, <code>github-releases.githubusercontent.com</code>, å’Œ<code>*.s3.amazonaws.com.</code></p>
<ul>
<li><code>http_proxy</code> : é…ç½® HTTP ä»£ç†ï¼Œä¾‹å¦‚ <code>http://my.proxy.com:3128</code></li>
<li><code>https_proxy</code> : é…ç½® HTTPS ä»£ç†ï¼Œä¾‹å¦‚ <code>http://my.proxy.com:3128</code></li>
<li><code>no_proxy</code> : é…ç½®ä½•æ—¶ä¸ä½¿ç”¨ä»£ç†ï¼Œä¾‹å¦‚<code>127.0.0.1,localhost,core,registry</code></li>
</ul>
</li>
<li>
<p><code>cache</code> : ä¸ºæ‚¨çš„ Harbor å®ä¾‹é…ç½®ç¼“å­˜å±‚ã€‚å¯ç”¨åï¼ŒHarbor å°†ä½¿ç”¨ Redis ç¼“å­˜ä¸€äº› Harbor èµ„æºï¼ˆä¾‹å¦‚ï¼Œå·¥ä»¶ã€é¡¹ç›®æˆ–é¡¹ç›®å…ƒæ•°æ®ï¼‰ï¼Œä»è€Œå‡å°‘é‡å¤è¯·æ±‚åŒä¸€ Harbor èµ„æºæ‰€èŠ±è´¹çš„æ—¶é—´å’Œèµ„æºã€‚å¼ºçƒˆå»ºè®®æ‚¨åœ¨é«˜å¹¶å‘æ‹‰å–è¯·æ±‚ç‡çš„ Harbor å®ä¾‹ä¸Šå¯ç”¨æ­¤åŠŸèƒ½ï¼Œä»¥æé«˜ Harbor çš„æ•´ä½“æ€§èƒ½ã€‚æœ‰å…³ç¼“å­˜å±‚å®ç°å’Œæ€§èƒ½æ”¹è¿›çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://github.com/goharbor/perf/wiki/Cache-layer" target="_blank" rel="noopener noreferrer">ç¼“å­˜å±‚ç»´åŸºé¡µé¢</a>ã€‚</p>
<ul>
<li><code>enabled</code> : é»˜è®¤ä¸º<code>false</code>ï¼Œè®¾ç½®ä¸º<code>true</code>å¯ç”¨ Harbor çš„ç¼“å­˜å±‚ã€‚</li>
<li><code>expire_hours</code> : ä»¥å°æ—¶ä¸ºå•ä½é…ç½®ç¼“å­˜è¿‡æœŸé™åˆ¶ã€‚é»˜è®¤å€¼ä¸º 24ã€‚</li>
</ul>
</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="4112-å¯é€‰å‚æ•°">4.1.1.2 å¯é€‰å‚æ•°<a href="#4112-å¯é€‰å‚æ•°" class="hash-link" aria-label="4.1.1.2 å¯é€‰å‚æ•°çš„ç›´æ¥é“¾æ¥" title="4.1.1.2 å¯é€‰å‚æ•°çš„ç›´æ¥é“¾æ¥">â€‹</a></h5>
<ul>
<li>
<p><code>external_url</code> : å¯ç”¨æ­¤é€‰é¡¹ä»¥ä½¿ç”¨å¤–éƒ¨ä»£ç†ã€‚å¯ç”¨åï¼Œä¸å†ä½¿ç”¨ä¸»æœºåã€‚</p>
</li>
<li>
<p><code>storage_service</code> : é»˜è®¤æƒ…å†µä¸‹ï¼ŒHarbor å°†å›¾åƒå’Œå›¾è¡¨å­˜å‚¨åœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä½¿ç”¨å¦ä¸€ä¸ªå­˜å‚¨åç«¯è€Œä¸æ˜¯æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚ä¸‹é¢åˆ—å‡ºçš„å‚æ•°æ˜¯æ³¨å†Œè¡¨çš„é…ç½®ã€‚æœ‰å…³å¦‚ä½•é…ç½®ä¸åŒåç«¯çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ä¸‹é¢ <a href="https://goharbor.io/docs/2.8.0/install-config/configure-yml-file/#backend" target="_blank" rel="noopener noreferrer">é…ç½®å­˜å‚¨åç«¯</a></p>
<ul>
<li><code>ca_bundle</code> : <code>è‡ªå®šä¹‰æ ¹ CA è¯ä¹¦çš„è·¯å¾„ï¼Œè¯¥è¯ä¹¦è¢«æ³¨å…¥åˆ°æ³¨å†Œè¡¨å’Œå›¾è¡¨å­˜å‚¨åº“å®¹å™¨çš„ä¿¡ä»»åº“ä¸­ã€‚å¦‚æœå†…éƒ¨å­˜å‚¨ä½¿ç”¨è‡ªç­¾åè¯ä¹¦ï¼Œé€šå¸¸éœ€è¦è¿™æ ·åšã€‚</code></li>
<li><code>filesystem</code> :   é»˜è®¤æ˜¯ <code>filesystem</code>ï¼Œä½†æ˜¯ä½ å¯ä»¥è®¾ç½® <code>azure</code> ã€<code>gcs</code> ã€<code>s3</code> ã€<code>swift</code> å’Œ <code>oss</code> ã€‚æœ‰å…³å¦‚ä½•é…ç½®å…¶ä»–åç«¯çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…ä¸‹é¢çš„ <a href="https://goharbor.io/docs/2.8.0/install-config/configure-yml-file/#backend" target="_blank" rel="noopener noreferrer">é…ç½®å­˜å‚¨åç«¯</a> ã€‚è®¾ç½® maxthreads ä»¥é™åˆ¶å¤–éƒ¨æä¾›ç¨‹åºçš„çº¿ç¨‹æ•°ã€‚ é»˜è®¤å€¼ä¸º 100</li>
<li><code>redirect</code> : è®¾ç½®<code>deactivate</code>ä¸º<code>true</code> è¡¨ç¤ºåœç”¨æ³¨å†Œè¡¨é‡å®šå‘</li>
</ul>
</li>
<li>
<p><code>external_database</code> : å¦‚æœåœç”¨æœ¬åœ°æ•°æ®åº“é€‰é¡¹ï¼Œåˆ™é…ç½®å¤–éƒ¨æ•°æ®åº“è®¾ç½®ã€‚ç›®å‰ï¼ŒHarbor ä»…æ”¯æŒ PostgreSQL æ•°æ®åº“ã€‚å¿…é¡»åˆ›å»º <code>Harbor core</code>, <code>Notary server</code>, å’Œ<code>Notary signer</code> 3ä¸ªæ•°æ®åº“ï¼Œè¡¨æ˜¯åœ¨harobrå¯åŠ¨çš„æ—¶å€™è‡ªåŠ¨ç”Ÿæˆçš„ã€‚</p>
<ul>
<li><code>harbor</code> : ä¸º Harbor æ•°æ®é…ç½®å¤–éƒ¨æ•°æ®åº“ã€‚<!-- -->
<ul>
<li><code>host</code>: Harbor æ•°æ®åº“çš„ä¸»æœºåã€‚</li>
<li><code>port</code>ï¼šæ•°æ®åº“ç«¯å£ã€‚</li>
<li><code>db_name</code>ï¼š æ•°æ®åº“åç§°ã€‚</li>
<li><code>username</code>: æ•°æ®åº“ç”¨æˆ·åã€‚</li>
<li><code>password</code>ï¼šæ•°æ®åº“å¯†ç ã€‚</li>
<li><code>ssl_mode</code>ï¼šå¯ç”¨ SSL æ¨¡å¼ã€‚</li>
<li><code>max_idle_conns</code>ï¼šç©ºé—²è¿æ¥æ± ä¸­çš„æœ€å¤§è¿æ¥æ•°ã€‚å¦‚æœ <code>&lt;=0</code>ï¼Œåˆ™ä¸ä¿ç•™ç©ºé—²è¿æ¥ã€‚é»˜è®¤å€¼ä¸º 2ã€‚</li>
<li><code>max_open_conns</code>: æ•°æ®åº“çš„æœ€å¤§æ‰“å¼€è¿æ¥æ•°ã€‚å¦‚æœ <code>&lt;= 0</code>ï¼Œåˆ™æ‰“å¼€çš„è¿æ¥æ•°æ²¡æœ‰é™åˆ¶ã€‚é»˜è®¤å€¼ä¸º 0ã€‚</li>
</ul>
</li>
<li><code>notary_signer</code> : ä¸º Notary ç­¾åè€…æ•°æ®åº“é…ç½®å¤–éƒ¨æ•°æ®åº“<!-- -->
<ul>
<li><code>host</code>ï¼šå…¬è¯ç­¾åè€…æ•°æ®åº“çš„ä¸»æœºå</li>
<li><code>port</code>ï¼šæ•°æ®åº“ç«¯å£ã€‚</li>
<li><code>db_name</code>ï¼š æ•°æ®åº“åç§°ã€‚</li>
<li><code>username</code>ï¼šè¿æ¥åˆ°å…¬è¯ç­¾åè€…æ•°æ®åº“çš„ç”¨æˆ·åã€‚</li>
<li><code>password</code>ï¼šè¿æ¥åˆ°å…¬è¯ç­¾åè€…æ•°æ®åº“çš„  ç”¨æˆ·çš„å¯†ç ã€‚</li>
<li><code>ssl_mode</code>ï¼šå¯ç”¨ SSL æ¨¡å¼ã€‚</li>
</ul>
</li>
<li><code>notary_server</code> :<!-- -->
<ul>
<li><code>host</code>ï¼šå…¬è¯æœåŠ¡å™¨æ•°æ®åº“çš„ä¸»æœºåã€‚</li>
<li><code>port</code>ï¼šæ•°æ®åº“ç«¯å£ã€‚</li>
<li><code>db_name</code>ï¼š æ•°æ®åº“åç§°ã€‚</li>
<li><code>username</code>ï¼šè¿æ¥åˆ°å…¬è¯æœåŠ¡å™¨æ•°æ®åº“çš„ç”¨æˆ·åã€‚</li>
<li><code>password</code>ï¼šè¿æ¥åˆ°å…¬è¯æœåŠ¡å™¨æ•°æ®åº“çš„ç”¨æˆ·çš„å¯†ç ã€‚</li>
<li><code>ssl_mode</code>: å¯ç”¨ SSL æ¨¡å¼ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><code>external_redis</code> : é…ç½®å¤–éƒ¨ Redis å®ä¾‹ã€‚</p>
<ul>
<li><code>host</code> : å¤–éƒ¨ Redis ä¸»æœºåã€‚æ ¼å¼æ˜¯ <code>redis_host:redis_port</code> åœ¨1.10ç‰ˆæœ¬ä¸­ <code>host</code> å’Œ <code>port</code> æ˜¯å•ç‹¬å†™çš„ï¼Œæ–°ç‰ˆæœ¬ä¸­å¯ä»¥æŠŠä¸»æœºåå’Œç«¯å£å†™åœ¨ä¸€èµ·ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯å“¨å…µæ¨¡å¼ï¼Œè¿™éƒ¨åˆ†åº”è¯¥æ˜¯ <code>host_sentinel1:port_sentinel1</code> , <code>host_sentinel2:port_sentinel2</code> ã€‚</li>
<li><code>sentinel_master_set</code> : ä»…åœ¨ä½¿ç”¨ Sentinel æ¨¡å¼æ—¶è®¾ç½®æ­¤é¡¹</li>
<li><code>password</code> : å¤–éƒ¨ Redis å¯†ç ã€‚</li>
<li><code>registry_db_index</code> : Harbor æ³¨å†Œè¡¨çš„æ•°æ®åº“ç´¢å¼•ã€‚</li>
<li><code>jobservice_db_index</code> : ä½œä¸šæœåŠ¡çš„æ•°æ®åº“ç´¢å¼•ã€‚</li>
<li><code>chartmuseum_db_index</code> : chart museumçš„æ•°æ®åº“ç´¢å¼•(ä¸­æ–‡ä¸çŸ¥é“ä»€ä¹ˆæ„æ€)ã€‚</li>
<li><code>trivy_db_index</code> : Trivy é€‚é…å™¨çš„æ•°æ®åº“ç´¢å¼•ã€‚</li>
</ul>
</li>
<li>
<p><code>metric</code> : é…ç½®å°† Harbor å®ä¾‹æŒ‡æ ‡å…¬å¼€åˆ°æŒ‡å®šçš„ç«¯å£å’Œè·¯å¾„</p>
<ul>
<li><code>enabled</code> : é€šè¿‡å°†å…¶è®¾ç½®ä¸º <code>true</code> åœ¨harborä¸Šå¼€å¯ <code>metric</code> æŒ‡æ ‡ï¼Œé»˜è®¤æ˜¯ <code>false</code></li>
<li><code>port</code> : <code>metric</code> æŒ‡æ ‡æš´éœ²ç«¯å£ï¼Œé»˜è®¤æ˜¯ <code>9090</code></li>
<li><code>path</code> : <code>metric</code> æŒ‡æ ‡è·¯å¾„ï¼Œé»˜è®¤æ˜¯ <code>/metrics</code></li>
</ul>
</li>
<li>
<p><code>trace</code> : é…ç½®å…¬å¼€åˆ†å¸ƒå¼è·Ÿè¸ªæ•°æ®</p>
<ul>
<li><code>enabled</code> : é€šè¿‡å°†å…¶è®¾ç½®ä¸º <code>true</code> åœ¨harborä¸Šå¼€å¯è·Ÿè¸ªï¼Œé»˜è®¤æ˜¯ <code>false</code></li>
<li><code>sample_rate</code> : è®¾ç½®è·Ÿè¸ªçš„é‡‡æ ·ç‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³é‡‡æ · 100% çš„è·Ÿè¸ªæ•°æ®ï¼Œè¯·å°† sample_rate è®¾ç½®ä¸º1ï¼›è®¾ç½®ä¸º <code>0.5</code> è¡¨ç¤ºé‡‡æ · 50% çš„è·Ÿè¸ªæ•°æ®</li>
<li><code>namespace</code> : Namespace ç”¨æ¥åŒºåˆ†ä¸åŒçš„ Harbor æœåŠ¡ï¼Œä¼šè®¾ç½®ä¸ºå¸¦æœ‰ key çš„å±æ€§ <code>service.namespace</code></li>
<li><code>attributes</code> : å±æ€§æ˜¯ä¸€ä¸ªé”®å€¼å­—å…¸ï¼ŒåŒ…å«ç”¨æˆ·å®šä¹‰çš„è‡ªå®šä¹‰å±æ€§ï¼Œç”¨äºåˆå§‹åŒ–è·Ÿè¸ªæä¾›ç¨‹åºï¼Œæ‰€æœ‰è¿™äº›å±æ€§éƒ½å°†æ·»åŠ åˆ°è·Ÿè¸ªæ•°æ®ä¸­</li>
<li><code>jaeger</code> :<!-- -->
<ul>
<li><code>endpoint</code>ï¼šç«¯ç‚¹çš„urlï¼ˆä¾‹å¦‚<code>http://127.0.0.1:14268/api/traces</code>ï¼‰ã€‚è®¾ç½®ç«¯ç‚¹æ„å‘³ç€é€šè¿‡ http å¯¼å‡ºåˆ° jaeger collectorã€‚</li>
<li><code>username:</code>ï¼šç”¨äºè¿æ¥ç«¯ç‚¹çš„ç”¨æˆ·åã€‚å¦‚æœä¸éœ€è¦ï¼Œç•™ç©ºã€‚</li>
<li><code>password:</code>ï¼šç”¨äºè¿æ¥ç«¯ç‚¹çš„å¯†ç ã€‚å¦‚æœä¸éœ€è¦ï¼Œç•™ç©ºã€‚</li>
<li><code>agent_host</code>: jaeger ä»£ç†çš„ä¸»æœºåã€‚è®¾ç½®agent_hostè¡¨ç¤ºé€šè¿‡udpå°†æ•°æ®å¯¼å‡ºåˆ°jaeger agentã€‚</li>
<li><code>agent_port:</code>: jaeger ä»£ç†çš„ç«¯å£åç§°ã€‚</li>
</ul>
</li>
<li><code>otel</code> :<!-- -->
<ul>
<li><code>endpoint</code>ï¼šotel compitableåç«¯çš„ä¸»æœºåå’Œç«¯å£ï¼ˆä¾‹å¦‚<code>127.0.0.1:4318</code>ï¼‰ã€‚</li>
<li><code>url_path:</code>ï¼šç«¯ç‚¹çš„urlè·¯å¾„ï¼ˆä¾‹å¦‚<code>127.0.0.1:4318</code>ï¼‰</li>
<li><code>compression:</code>ï¼šå¦‚æœå¯ç”¨æ•°æ®å‹ç¼©</li>
<li><code>insecure</code>ï¼šå¿½ç•¥otelåç«¯çš„è¯ä¹¦éªŒè¯</li>
<li><code>timeout:</code>ï¼šæ•°æ®ä¼ è¾“è¶…æ—¶</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="412-ç¼–è¾‘é…ç½®æ–‡ä»¶">4.1.2 ç¼–è¾‘é…ç½®æ–‡ä»¶<a href="#412-ç¼–è¾‘é…ç½®æ–‡ä»¶" class="hash-link" aria-label="4.1.2 ç¼–è¾‘é…ç½®æ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="4.1.2 ç¼–è¾‘é…ç½®æ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat </span><span class="token punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> harbor.yml &lt;&lt; EOF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æŒ‡å®šharborè®¿é—®åŸŸå</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">hostname</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> harbor.ops.com</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æŒ‡å®šhttpç«¯å£</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">http</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æŒ‡å®šhttpsç«¯å£åŠè¯ä¹¦ </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">https</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">443</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">certificate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /data/harbor/cert/harbor.ops.com.crt</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">private_key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /data/harbor/cert/harbor.ops.com.key</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æŒ‡å®šadminå¯†ç  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">harbor_admin_password</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Harbor12345 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æŒ‡å®šæ•°æ®åº“ç›¸å…³ä¿¡æ¯ï¼Œé»˜è®¤ä½¿ç”¨æœ¬åœ°PostgrsSQLï¼Œå¦‚æœè¦ä½¿ç”¨å¤–ç½®æ•°æ®åº“åˆ™éœ€è¦ä¿®æ”¹ external_database é…ç½®é¡¹å¹¶æ³¨é‡Š database é…ç½®é¡¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">database</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> root123</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ç©ºé—²è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼Œå¦‚æœè®¾ç½®å°äºç­‰äº0åˆ™ä¸ºä¸ä¿ç•™ç©ºé—²è¿æ¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">max_idle_conns</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æ•°æ®åº“æœ€å¤§è¿æ¥æ•°ï¼Œå¦‚æœè®¾ç½®å°äºç­‰äº0åˆ™ä¸ºä¸é™åˆ¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">max_open_conns</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">900</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># å¯é‡ç”¨è¿æ¥çš„æœ€é•¿æ—¶é—´ï¼Œå¦‚æœè®¾ç½®å°äºç­‰äº0åˆ™ä¸ä¼šç”±äºè¿æ¥çš„æ—¶é—´è€Œå…³é—­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">conn_max_lifetime</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 5m</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># è¿æ¥ç©ºé—²æœ€é•¿æ—¶é—´ï¼Œå¦‚æœè®¾ç½®å°äºç­‰äº0åˆ™è¿æ¥ä¸ä¼šç”±äºè¿æ¥çš„ç©ºé—²æ—¶é—´è€Œå…³é—­</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">conn_max_idle_time</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># é»˜è®¤çš„æ•°æ®å­˜å‚¨è·¯å¾„ï¼Œå¦‚æœè¦ä½¿ç”¨å¤–ç½®å­˜å‚¨ï¼Œåˆ™éœ€è¦ä¿®æ”¹ storage_service é…ç½®é¡¹</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">data_volume</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /data/harbor</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">data</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># é…ç½® Trivy æ‰«æä»ªï¼ŒTrivy DBåŒ…å«æ¥è‡ªNVD, Red Hatå’Œè®¸å¤šå…¶ä»–ä¸Šæ¸¸æ¼æ´æ•°æ®åº“çš„æ¼æ´ä¿¡æ¯ï¼Œå®ƒæ˜¯ç”±Trivyä»GitHubå‘å¸ƒé¡µé¢https://github.com/aquasecurity/trivy-db/releases ä¸‹è½½å¹¶ç¼“å­˜åˆ°æœ¬åœ°ç³»ç»Ÿæ–‡ä»¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">trivy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># è®¾ç½®ä¸º true ä»…æ˜¾ç¤ºå·²ä¿®å¤çš„æ¼æ´</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">ignore_unfixed</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æ˜¯å¦è·³è¿‡è‡ªåŠ¨æ›´æ–°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">skip_update</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æ‰«æjaræ–‡ä»¶å’Œpom.xmlåœ¨è”ç½‘çš„æƒ…å†µä¸‹æ•ˆæœä¼šæ›´å¥½ï¼Œæ­¤é€‰é¡¹è®¾ç½®ä¸ºfalseåˆ™é˜»æ­¢Trivyå‘é€APIè¯·æ±‚æ¥è¯†åˆ«ä¾èµ–é¡¹ä¸”ä¸æ‰§è¡Œç¦»çº¿æ‰«æ</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">offline_scan</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># è¦æ£€æµ‹çš„å®‰å…¨é—®é¢˜çš„é€—å·åˆ†éš”åˆ—è¡¨ï¼Œå€¼æœ‰ vulnã€configã€secret</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">security_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> vuln</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æ˜¯å¦è·³è¿‡éªŒè¯æ³¨å†Œè¡¨è¯ä¹¦</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">insecure</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">jobservice</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ç”¨äºharboré•œåƒå¤åˆ¶çš„æœ€å¤§workeræ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">max_job_workers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># jobLoggeræ¸…ç†çš„æŒç»­æ—¶é—´ï¼Œå•ä½æ˜¯å¤©ï¼Œå¦‚æœè®¾ç½®ä¸ºstdoutåˆ™ å¿½ç•¥</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">logger_sweeper_duration</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">notification</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># webhookçš„æœ€å¤§é‡è¯•æ¬¡æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">webhook_job_max_retry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># webhookå®¢æˆ·ç«¯è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯ç§’</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">webhook_job_http_client_timeout</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æ—¥å¿—é…ç½®  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æŒ‡å®šæ—¥å¿—çº§åˆ«ï¼Œå¯é€‰çš„æœ‰ debugã€infoã€warningã€errorã€fatal</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">level</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> info</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># è®¾ç½®æ—¥å¿—ä¿ç•™å‚æ•°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">local</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ä¿ç•™åˆ‡å‰²æ—¥å¿—çš„æ•°é‡ï¼Œå¦‚æœè®¾ç½®ä¸º0ï¼Œæ—§çš„æ—¥å¿—å°†è¢«åˆ é™¤</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">rotate_count</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">50</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># æŒ‡å®šæ—¥å¿—å¤šå¤§æ‰ä¼šè¢«åˆ‡å‰²</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">rotate_size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 200M</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">location</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /var/log/harbor</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># harborçš„ç‰ˆæœ¬</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">_version</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 2.8.0    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ç›¸å…³ä»£ç†é…ç½®</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">proxy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">http_proxy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">https_proxy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">no_proxy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">components</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> core</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> jobservice</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> trivy</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">upload_purging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 168h</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">interval</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> 24h</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">dryrun</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ç¼“å­˜é…ç½® </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">cache</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># é»˜è®¤ä¸å¼€å¯ï¼Œå¦‚æœå¼€å¯åharborå°†ä½¿ç”¨redisç¼“å­˜ä¸€äº›èµ„æºï¼Œå¦‚æœæœ‰é«˜å¹¶å‘æ‹‰å–çš„æƒ…å†µåº”è¯¥å¯ç”¨ç¼“å­˜</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œå•ä½æ˜¯å°æ—¶</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">expire_hours</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">24</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-æ‰§è¡Œå®‰è£…">4.2 æ‰§è¡Œå®‰è£…<a href="#42-æ‰§è¡Œå®‰è£…" class="hash-link" aria-label="4.2 æ‰§è¡Œå®‰è£…çš„ç›´æ¥é“¾æ¥" title="4.2 æ‰§è¡Œå®‰è£…çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>æ‰§è¡Œ <code>install.sh</code> ä¼šæ ¹æ® <code>harbor.yml</code> ç”Ÿæˆ <code>docker-compose.yml</code> ç„¶åå¯åŠ¨å®¹å™¨</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">./install.sh </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å®‰è£…æˆåŠŸåä¼šåœ¨æœ€åæç¤ºå¦‚ä¸‹ä¿¡æ¯</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">âœ” ----Harbor has been installed and started successfully.----</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>ä¿®æ”¹å®¹å™¨å†…æ—¶åŒº</div><div class="admonitionContent_BuS1"><p>å¯åŠ¨çš„å®¹å™¨é»˜è®¤ä½¿ç”¨çš„æ˜¯ <code>UTC</code> æ—¶é—´ï¼Œ<code>./install</code> æ‰§è¡ŒæˆåŠŸåä¼šç”Ÿæˆ <code>docker-compose.yml</code> æ–‡ä»¶ï¼Œå¯ä»¥ä¿®æ”¹ <code>docker-compose.yml</code> ï¼Œåœ¨å„ä¸ªå®¹å™¨çš„ <code>volemes</code> ä¸‹å¢åŠ å¦‚ä¸‹é…ç½®ï¼Œç„¶åé‡å¯å°±å¯ä»¥è®©å®¹å™¨å†…çš„æ—¶åŒºå˜ä¸º <code>CST</code></p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> /usr/share/zoneinfo/Asia/Shanghai</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">/etc/localtime</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-æŸ¥çœ‹å®‰è£…">4.3 æŸ¥çœ‹å®‰è£…<a href="#43-æŸ¥çœ‹å®‰è£…" class="hash-link" aria-label="4.3 æŸ¥çœ‹å®‰è£…çš„ç›´æ¥é“¾æ¥" title="4.3 æŸ¥çœ‹å®‰è£…çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker ps -a</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CONTAINER ID   IMAGE                                COMMAND                  CREATED         STATUS                   PORTS                                                                            NAMES</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">c397f48df28c   goharbor/harbor-jobservice:v2.8.0    &quot;/harbor/entrypoint.â€¦&quot;   7 minutes ago   Up 7 minutes (healthy)                                                                                    harbor-jobservice</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">e3d4b41fc52c   goharbor/nginx-photon:v2.8.0         &quot;nginx -g &#x27;daemon ofâ€¦&quot;   7 minutes ago   Up 7 minutes (healthy)   0.0.0.0:80-&gt;8080/tcp, :::80-&gt;8080/tcp, 0.0.0.0:443-&gt;8443/tcp, :::443-&gt;8443/tcp   nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">6cfa4d7a301d   goharbor/harbor-core:v2.8.0          &quot;/harbor/entrypoint.â€¦&quot;   7 minutes ago   Up 7 minutes (healthy)                                                                                    harbor-core</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">e5df0889b8f2   goharbor/harbor-portal:v2.8.0        &quot;nginx -g &#x27;daemon ofâ€¦&quot;   7 minutes ago   Up 7 minutes (healthy)                                                                                    harbor-portal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">4501c20b7f3d   goharbor/harbor-registryctl:v2.8.0   &quot;/home/harbor/start.â€¦&quot;   7 minutes ago   Up 7 minutes (healthy)                                                                                    registryctl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">5214bef7630a   goharbor/registry-photon:v2.8.0      &quot;/home/harbor/entrypâ€¦&quot;   7 minutes ago   Up 7 minutes (healthy)                                                                                    registry</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fccf8fc79e15   goharbor/redis-photon:v2.8.0         &quot;redis-server /etc/râ€¦&quot;   7 minutes ago   Up 7 minutes (healthy)                                                                                    redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">1838075510e2   goharbor/harbor-db:v2.8.0            &quot;/docker-entrypoint.â€¦&quot;   7 minutes ago   Up 7 minutes (healthy)                                                                                    harbor-db</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">2936c15b6a56   goharbor/harbor-log:v2.8.0           &quot;/bin/sh -c /usr/locâ€¦&quot;   7 minutes ago   Up 7 minutes (healthy)   127.0.0.1:1514-&gt;10514/tcp </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>ä¼šå¯åŠ¨å¦‚ä¸‹å®¹å™¨</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker ps -a --format &#x27;{{.Names}}&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nginx</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">harbor-jobservice</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">harbor-core</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">registry</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">harbor-portal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">harbor-db</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">registryctl</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">redis</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">harbor-log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å¯åŠ¨çš„å®¹å™¨åŠä½œç”¨</p>
<table><thead><tr><th>å®¹å™¨</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>nginx</td><td>å……å½“äº† Harbor çš„åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡å™¨ã€‚Nginx å®¹å™¨ä¼šå°†æ‰€æœ‰çš„ HTTPS æµé‡è·¯ç”±åˆ° Harbor çš„ Web ç•Œé¢å’Œ API æœåŠ¡ä¸Šï¼Œå¹¶å°† HTTP æµé‡é‡å®šå‘åˆ° HTTPSã€‚æ­¤å¤–ï¼ŒNginx å®¹å™¨è¿˜æä¾›äº†è®¿é—® Harbor Docker Registry çš„ä»£ç†ï¼Œå®ƒä¼šå°†æ‰€æœ‰çš„ Docker Registry æµé‡è·¯ç”±åˆ° Registry å®¹å™¨ä¸Š</td></tr><tr><td>harbor-jobservice</td><td>è¿è¡Œ Harbor çš„ä»»åŠ¡æœåŠ¡ï¼Œç”¨äºå¼‚æ­¥å¤„ç† Harbor çš„ä¸€äº›ä»»åŠ¡ï¼Œå¦‚ GCï¼ˆåƒåœ¾å›æ”¶ï¼‰ç­‰</td></tr><tr><td>harbor-core</td><td>è¿è¡Œ Harbor çš„æ ¸å¿ƒæœåŠ¡ï¼ŒåŒ…æ‹¬ Web ç•Œé¢ã€APIã€Webhook ç­‰</td></tr><tr><td>registry</td><td>è¿è¡Œ Docker Registryï¼Œç”¨äºå­˜å‚¨å’Œç®¡ç† Docker é•œåƒ</td></tr><tr><td>harbor-portal</td><td>å®¹å™¨ã€‚è¯¥å®¹å™¨è¿è¡Œ Harbor çš„ Web ç•Œé¢ï¼Œæä¾›ç”¨æˆ·ç•Œé¢å’Œ API æœåŠ¡ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥ä½¿ç”¨ Harbor ç§æœ‰ä»“åº“ç®¡ç†å’Œå­˜å‚¨ Docker é•œåƒ</td></tr><tr><td>harbor-db</td><td>è¿è¡ŒPostgreSQL æ•°æ®åº“ï¼Œç”¨äºå­˜å‚¨ Harbor çš„å…ƒæ•°æ®å’Œé…ç½®ä¿¡æ¯</td></tr><tr><td>registryctl</td><td>è¿è¡Œ Harbor çš„æ§åˆ¶å°ï¼Œç”¨äºç®¡ç†å’Œç›‘æ§ Harbor</td></tr><tr><td>redis</td><td>è¿è¡Œ Redisï¼Œç”¨äºå­˜å‚¨ Harbor çš„ç¼“å­˜ä¿¡æ¯</td></tr><tr><td>harbor-log</td><td>è¿è¡Œ Harbor çš„æ—¥å¿—æœåŠ¡ï¼Œç”¨äºæ”¶é›†ã€å­˜å‚¨å’ŒæŸ¥è¯¢ Harbor çš„æ—¥å¿—ä¿¡æ¯</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5å…¶ä»–">5.å…¶ä»–<a href="#5å…¶ä»–" class="hash-link" aria-label="5.å…¶ä»–çš„ç›´æ¥é“¾æ¥" title="5.å…¶ä»–çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-é…ç½®httpè®¿é—®harbor">5.1 é…ç½®httpè®¿é—®harbor<a href="#51-é…ç½®httpè®¿é—®harbor" class="hash-link" aria-label="5.1 é…ç½®httpè®¿é—®harborçš„ç›´æ¥é“¾æ¥" title="5.1 é…ç½®httpè®¿é—®harborçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>è¯´æ˜</div><div class="admonitionContent_BuS1"><p>å¦‚æœä¸æƒ³è¦é…ç½®httpsè®¿é—®harboræˆ–è€…è®¿é—®å…¥å£æ˜¯nginx/äº‘å‚å•†lbç­‰(ä¸€èˆ¬éƒ½æ˜¯åœ¨nginxæˆ–lbä¸Šé…ç½®è¯ä¹¦)åˆ™ä¸éœ€è¦æ‰§è¡Œ <code>3</code> æ­¥éª¤ä¸­çš„å†…å®¹</p><p>åŒæ—¶åœ¨dockerçš„é…ç½®æ–‡ä»¶ <code>/etc/docker/daemon.json </code> ä¸­è¿˜è¦æŒ‡å®šé…ç½®ä½¿ç”¨httpæ¨é€é•œåƒ</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;insecure-registries&quot; : [&quot;harborä»“åº“åœ°å€&quot;, &quot;0.0.0.0&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-é…ç½®å­˜å‚¨åç«¯">5.2 é…ç½®å­˜å‚¨åç«¯<a href="#52-é…ç½®å­˜å‚¨åç«¯" class="hash-link" aria-label="5.2 é…ç½®å­˜å‚¨åç«¯çš„ç›´æ¥é“¾æ¥" title="5.2 é…ç½®å­˜å‚¨åç«¯çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHarbor ä½¿ç”¨æœ¬åœ°å­˜å‚¨ä½œä¸ºæ³¨å†Œè¡¨ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ <code>harbor.yml</code>  ä¸­çš„ <code>storage_service</code> æ¥æŒ‡å®šä½¿ç”¨çš„å¤–éƒ¨å­˜å‚¨ï¼Œæœ‰å…³å¦‚ä½•ä¸ºä¸åŒå­˜å‚¨æä¾›ç¨‹åºé…ç½®æ³¨å†Œè¡¨å­˜å‚¨åç«¯çš„ä¿¡æ¯ï¼Œè¯·å‚é˜… Docker æ–‡æ¡£ä¸­çš„<a href="https://docs.docker.com/registry/configuration/#storage" target="_blank" rel="noopener noreferrer">æ³¨å†Œè¡¨é…ç½®å‚è€ƒ</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="521-é˜¿é‡Œäº‘ossçš„é…ç½®ç¤ºä¾‹">5.2.1 é˜¿é‡Œäº‘ossçš„é…ç½®ç¤ºä¾‹<a href="#521-é˜¿é‡Œäº‘ossçš„é…ç½®ç¤ºä¾‹" class="hash-link" aria-label="5.2.1 é˜¿é‡Œäº‘ossçš„é…ç½®ç¤ºä¾‹çš„ç›´æ¥é“¾æ¥" title="5.2.1 é˜¿é‡Œäº‘ossçš„é…ç½®ç¤ºä¾‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">storage_service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">oss</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  	</span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># å¿…éœ€é¡¹ï¼ŒæŒ‡å®šaccesskeyid  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">accesskeyid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># å¿…éœ€é¡¹ï¼ŒæŒ‡å®šaccesskeysecret</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">accesskeysecret</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># å¿…éœ€é¡¹ï¼ŒæŒ‡å®šOSS region åç§°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">region</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># å¿…éœ€é¡¹ï¼ŒOSS bucket åç§°</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">bucket</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># éå¿…éœ€é¡¹ï¼ŒæŒ‡å®š endpoints åŸŸååœ°å€ï¼Œæœ‰å†…ç½‘å’Œå…¬ç½‘</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">endpoint</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># éå¿…éœ€é¡¹ï¼ŒæŒ‡å®šå†…ç½‘è®¿é—®è¿˜æ˜¯å¤–ç½‘è®¿é—®ï¼Œé»˜è®¤ä¸º false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">internal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># éå¿…éœ€é¡¹ï¼Œæ˜¯å¦å¯åŠ¨æœåŠ¡ç«¯åŠ å¯†ï¼Œé»˜è®¤ä¸º false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">encrypt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># éå¿…éœ€é¡¹ï¼ŒæŒ‡å®šç”¨äºåŠ å¯†çš„å¯é€‰ KMS å¯†é’¥ ID</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">encryptionkeyid</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># éå¿…éœ€é¡¹ï¼ŒæŒ‡å®šæ˜¯å¦é€šè¿‡ ssl å°†æ•°æ®ä¼ è¾“åˆ°å­˜å‚¨æ¡¶ï¼Œé»˜è®¤ä¸º true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">secure</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># éå¿…éœ€é¡¹ï¼Œåˆ†æ®µä¸Šä¼ ï¼ˆç”± WriteStream æ‰§è¡Œï¼‰åˆ° OSS çš„é»˜è®¤åˆ†æ®µå¤§å°ï¼Œé»˜è®¤å€¼ä¸º 10 MBï¼ŒOSS çš„æœ€å°éƒ¨åˆ†å¤§å°ä¸º 5MB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">chunksize</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># éå¿…éœ€é¡¹ï¼Œå­˜å‚¨æ‰€æœ‰æ³¨å†Œè¡¨æ–‡ä»¶çš„æ ¹ç›®å½•æ ‘ï¼Œé»˜è®¤æ˜¯ç©ºå­—ç¬¦ä¸²(å³æ¡¶çš„æ ¹)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">rootdirectory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å‚æ•°è¯´æ˜ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ª <a href="https://github.com/docker/docs/blob/main/registry/storage-drivers/oss.md" target="_blank" rel="noopener noreferrer">æ–‡æ¡£</a></p>
<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>æ˜¯å¦å¿…é¡»</th></tr></thead><tbody><tr><td><code>accesskeyid</code></td><td>æŒ‡å®šaccess key ID</td><td>âœ…</td></tr><tr><td><code>accesskeysecret</code></td><td>æŒ‡å®šaccess key secret</td><td>âœ…</td></tr><tr><td><code>region</code></td><td>æŒ‡å®šossçš„regionï¼Œå¯ä»¥ä»<a href="https://help.aliyun.com/document_detail/31837.html?spm=a2c4g.31815.0.0.561d71bfnILFU2" target="_blank" rel="noopener noreferrer">é˜¿é‡Œäº‘è®¿é—®åŸŸåå’Œæ•°æ®ä¸­å¿ƒå¸®åŠ©æ–‡æ¡£</a>æŸ¥çœ‹</td><td>âœ…</td></tr><tr><td><code>bucket</code></td><td>æŒ‡å®šä½¿ç”¨çš„ossçš„bucketåç§°</td><td>âœ…</td></tr><tr><td><code>endpoint</code></td><td>é»˜è®¤æ˜¯ <code>[bucket].[region].aliyuncs.com</code> æˆ–<code>[bucket].[region]-internal.aliyuncs.com</code></td><td>å¦</td></tr><tr><td><code>internal</code></td><td>æŒ‡å®šå†…ç½‘è¿˜æ˜¯å¤–ç½‘è®¿é—®ï¼Œé»˜è®¤æ˜¯ <code>false</code> ï¼Œ<a href="https://help.aliyun.com/document_detail/31837.html?spm=a2c4g.31815.0.0.561d71bfnILFU2" target="_blank" rel="noopener noreferrer">é˜¿é‡Œäº‘è®¿é—®åŸŸåå’Œæ•°æ®ä¸­å¿ƒå¸®åŠ©æ–‡æ¡£</a>æŸ¥çœ‹</td><td>å¦</td></tr><tr><td><code>encrypt</code></td><td>æŒ‡å®šæ˜¯å¦åœ¨æœåŠ¡å™¨ç«¯åŠ å¯†æ•°æ®ï¼Œé»˜è®¤ä¸º <code>false</code></td><td>å¦</td></tr><tr><td><code>secure</code></td><td>æŒ‡å®šæ˜¯å¦é€šè¿‡ ssl å°†æ•°æ®ä¼ è¾“åˆ°å­˜å‚¨æ¡¶ï¼Œé»˜è®¤ä¸º <code>true</code></td><td>å¦</td></tr><tr><td><code>chunksize</code></td><td>åˆ†æ®µä¸Šä¼ ï¼ˆç”± WriteStream æ‰§è¡Œï¼‰åˆ° OSS çš„é»˜è®¤åˆ†æ®µå¤§å°ï¼Œé»˜è®¤å€¼ä¸º 10 MBï¼ŒOSS çš„æœ€å°éƒ¨åˆ†å¤§å°ä¸º 5MB</td><td>å¦</td></tr><tr><td><code>rootdirectory</code></td><td>å­˜å‚¨æ‰€æœ‰æ³¨å†Œè¡¨æ–‡ä»¶çš„æ ¹ç›®å½•æ ‘ï¼Œé»˜è®¤æ˜¯ç©ºå­—ç¬¦ä¸²(å³æ¡¶çš„æ ¹)</td><td>å¦</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="522-ä½¿ç”¨aws-s3çš„é…ç½®ç¤ºä¾‹">5.2.2 ä½¿ç”¨aws s3çš„é…ç½®ç¤ºä¾‹<a href="#522-ä½¿ç”¨aws-s3çš„é…ç½®ç¤ºä¾‹" class="hash-link" aria-label="5.2.2 ä½¿ç”¨aws s3çš„é…ç½®ç¤ºä¾‹çš„ç›´æ¥é“¾æ¥" title="5.2.2 ä½¿ç”¨aws s3çš„é…ç½®ç¤ºä¾‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">storage_service</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">s3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>å‚æ•°è¯´æ˜ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ª <a href="https://github.com/docker/docs/blob/main/registry/storage-drivers/s3.md" target="_blank" rel="noopener noreferrer">æ–‡æ¡£</a></p>
<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>æ˜¯å¦å¿…é¡»</th></tr></thead><tbody><tr><td>accesskey</td><td>awsè®¿é—®å¯†é’¥ï¼Œå¦‚æœä½¿ç”¨<a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html" target="_blank" rel="noopener noreferrer">IAM è§’è‰²</a>ï¼Œè¯·å¿½ç•¥ä» IAM è·å–ä¸´æ—¶å‡­è¯</td><td>å¦</td></tr><tr><td>secretkey</td><td>awså¯†é’¥ï¼Œå¦‚æœä½¿ç”¨<a href="http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html" target="_blank" rel="noopener noreferrer">IAM è§’è‰²</a>ï¼Œè¯·å¿½ç•¥ä» IAM è·å–ä¸´æ—¶å‡­è¯</td><td>å¦</td></tr><tr><td>region</td><td>å­˜å‚¨æ¡¶æ‰€åœ¨åŒºåŸŸ</td><td>âœ…</td></tr><tr><td>bucket</td><td>å­˜å‚¨æ¡¶åç§°</td><td>âœ…</td></tr><tr><td>regionendpoint</td><td>s3å…¼å®¹å­˜å‚¨æœåŠ¡(Minioç­‰)çš„ç«¯ç‚¹</td><td>å¦</td></tr><tr><td>encrypt</td><td>æŒ‡å®šæ³¨å†Œè¡¨æ˜¯å¦ä»¥åŠ å¯†æ ¼å¼å­˜å‚¨å›¾åƒï¼Œé»˜è®¤ä¸º <code>false</code></td><td>å¦</td></tr><tr><td>keyid</td><td>ç”¨äºåŠ å¯†çš„å¯é€‰ KMS å¯†é’¥ IDï¼ˆencrypt å¿…é¡»ä¸º <code>true</code>ï¼Œå¦åˆ™å°†å¿½ç•¥æ­¤å‚æ•°ï¼‰ï¼Œé»˜è®¤ä¸º <code>none</code></td><td>å¦</td></tr><tr><td>secure</td><td>æ˜¯å¦ä½¿ç”¨ HTTPS è€Œä¸æ˜¯ HTTPï¼Œé»˜è®¤ä¸º <code>true</code></td><td>å¦</td></tr><tr><td>skipverify</td><td>å½“å€¼è®¾ç½®ä¸º <code>true</code> æ—¶è·³è¿‡ TLS éªŒè¯ï¼Œé»˜è®¤ä¸º <code>false</code></td><td>å¦</td></tr><tr><td>v4auth</td><td>æ³¨å†Œè¡¨æ˜¯å¦ä½¿ç”¨ AWS èº«ä»½éªŒè¯çš„ç‰ˆæœ¬ 4ï¼Œé»˜è®¤å€¼ä¸º<code>true</code></td><td>å¦</td></tr><tr><td>chunksize</td><td>S3 API è¦æ±‚åˆ†æ®µä¸Šä¼ å—è‡³å°‘ä¸º 5MBï¼Œè¯¥å€¼åº”è¯¥æ˜¯å¤§äº <code>5 * 1024 * 1024</code> çš„æ•°å­—</td><td>å¦</td></tr><tr><td>rootdirectory</td><td>è¿™æ˜¯åº”ç”¨äºæ‰€æœ‰ S3 å¯†é’¥çš„å‰ç¼€ï¼Œä»¥å…è®¸åœ¨å¿…è¦æ—¶å¯¹å­˜å‚¨æ¡¶ä¸­çš„æ•°æ®è¿›è¡Œåˆ†æ®µ</td><td>å¦</td></tr><tr><td>storageclass</td><td>åº”ç”¨äºæ¯ä¸ªæ³¨å†Œè¡¨æ–‡ä»¶çš„ S3 å­˜å‚¨ç±»ï¼Œé»˜è®¤å€¼ä¸º <code>STANDARD</code></td><td>å¦</td></tr><tr><td>accelerate</td><td>æ³¨å†Œè¡¨æ˜¯å¦åº”ä½¿ç”¨ S3 Transfer Accelerationï¼Œåœ¨ä½¿ç”¨æ­¤é€‰é¡¹ä¹‹å‰ï¼Œå¿…é¡»åœ¨å­˜å‚¨æ¡¶ä¸Šå¯ç”¨åŠ é€Ÿç«¯ç‚¹ï¼Œé»˜è®¤ä¸º <code>false</code></td><td>å¦</td></tr></tbody></table></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡ä»¶é€‰é¡¹å¡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/äº‘åŸç”Ÿ/k8s/ç›‘æ§/metrics-server/metrics server"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">metrics server</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/äº‘åŸç”Ÿ/äº‘åŸç”Ÿå·¥å…·/harbor/harboré…ç½®é•œåƒåŒæ­¥"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">harboré…ç½®é•œåƒåŒæ­¥</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1å®‰è£…å…ˆå†³æ¡ä»¶" class="table-of-contents__link toc-highlight">1.å®‰è£…å…ˆå†³æ¡ä»¶</a><ul><li><a href="#11-ç³»ç»Ÿç¯å¢ƒè¯´æ˜" class="table-of-contents__link toc-highlight">1.1 ç³»ç»Ÿç¯å¢ƒè¯´æ˜</a></li><li><a href="#12-å®‰è£…docker" class="table-of-contents__link toc-highlight">1.2 å®‰è£…docker</a></li><li><a href="#13-å®‰è£…docker-compose" class="table-of-contents__link toc-highlight">1.3 å®‰è£…docker-compose</a></li></ul></li><li><a href="#2ä¸‹è½½å®‰è£…åŒ…" class="table-of-contents__link toc-highlight">2.ä¸‹è½½å®‰è£…åŒ…</a><ul><li><a href="#21-åˆ›å»ºç›®å½•" class="table-of-contents__link toc-highlight">2.1 åˆ›å»ºç›®å½•</a></li><li><a href="#22-ä¸‹è½½å®‰è£…åŒ…" class="table-of-contents__link toc-highlight">2.2 ä¸‹è½½å®‰è£…åŒ…</a></li><li><a href="#23-éªŒè¯åŒ…å¯é€‰" class="table-of-contents__link toc-highlight">2.3 éªŒè¯åŒ…(å¯é€‰)</a></li><li><a href="#24-è§£å‹ç¼©å®‰è£…åŒ…" class="table-of-contents__link toc-highlight">2.4 è§£å‹ç¼©å®‰è£…åŒ…</a></li></ul></li><li><a href="#3é…ç½®å¯¹harborçš„httpsè®¿é—®" class="table-of-contents__link toc-highlight">3.é…ç½®å¯¹harborçš„httpsè®¿é—®</a><ul><li><a href="#31-ç”Ÿæˆè¯ä¹¦é¢å‘æœºæ„è¯ä¹¦" class="table-of-contents__link toc-highlight">3.1 ç”Ÿæˆè¯ä¹¦é¢å‘æœºæ„è¯ä¹¦</a><ul><li><a href="#311-åˆ›å»ºè¯ä¹¦å­˜æ”¾ç›®å½•" class="table-of-contents__link toc-highlight">3.1.1 åˆ›å»ºè¯ä¹¦å­˜æ”¾ç›®å½•</a></li><li><a href="#312-ç”Ÿæˆcaè¯ä¹¦ç§é’¥" class="table-of-contents__link toc-highlight">3.1.2 ç”Ÿæˆcaè¯ä¹¦ç§é’¥</a></li><li><a href="#313-ç”Ÿæˆcaè¯ä¹¦" class="table-of-contents__link toc-highlight">3.1.3 ç”Ÿæˆcaè¯ä¹¦</a></li></ul></li><li><a href="#32-ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦" class="table-of-contents__link toc-highlight">3.2 ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦</a><ul><li><a href="#321-ç”Ÿæˆç§é’¥" class="table-of-contents__link toc-highlight">3.2.1 ç”Ÿæˆç§é’¥</a></li><li><a href="#322-ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚-csr" class="table-of-contents__link toc-highlight">3.2.2 ç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚ (CSR)</a></li><li><a href="#323-ç”Ÿæˆ-x509-v3-æ‰©å±•æ–‡ä»¶" class="table-of-contents__link toc-highlight">3.2.3 ç”Ÿæˆ x509 v3 æ‰©å±•æ–‡ä»¶</a></li><li><a href="#324-ä½¿ç”¨-v3ext-æ–‡ä»¶ç”Ÿæˆè¯ä¹¦" class="table-of-contents__link toc-highlight">3.2.4 ä½¿ç”¨ <code>v3.ext</code> æ–‡ä»¶ç”Ÿæˆè¯ä¹¦</a></li></ul></li><li><a href="#33-å‘harborå’Œdockeræä¾›è¯ä¹¦" class="table-of-contents__link toc-highlight">3.3 å‘harborå’Œdockeræä¾›è¯ä¹¦</a><ul><li><a href="#331-è½¬æ¢-crt-ä¸º-cert" class="table-of-contents__link toc-highlight">3.3.1 è½¬æ¢ <code>.crt</code> ä¸º <code>.cert</code></a></li><li><a href="#333-å°†æœåŠ¡å™¨è¯ä¹¦å¯†é’¥å’Œ-ca-æ–‡ä»¶å¤åˆ¶åˆ°-harbor-ä¸»æœºä¸Šçš„-docker-è¯ä¹¦æ–‡ä»¶å¤¹ä¸­" class="table-of-contents__link toc-highlight">3.3.3 å°†æœåŠ¡å™¨è¯ä¹¦ã€å¯†é’¥å’Œ CA æ–‡ä»¶å¤åˆ¶åˆ° Harbor ä¸»æœºä¸Šçš„ Docker è¯ä¹¦æ–‡ä»¶å¤¹ä¸­</a></li><li><a href="#334-é‡å¯docker" class="table-of-contents__link toc-highlight">3.3.4 é‡å¯docker</a></li></ul></li></ul></li><li><a href="#4éƒ¨ç½²harbor" class="table-of-contents__link toc-highlight">4.éƒ¨ç½²harbor</a><ul><li><a href="#41-é…ç½®harbor-ymlæ–‡ä»¶" class="table-of-contents__link toc-highlight">4.1 é…ç½®harbor ymlæ–‡ä»¶</a><ul><li><a href="#411-å‚æ•°è¯´æ˜" class="table-of-contents__link toc-highlight">4.1.1 å‚æ•°è¯´æ˜</a><ul><li><a href="#4111-å¿…è¦å‚æ•°" class="table-of-contents__link toc-highlight">4.1.1.1 å¿…è¦å‚æ•°</a></li><li><a href="#4112-å¯é€‰å‚æ•°" class="table-of-contents__link toc-highlight">4.1.1.2 å¯é€‰å‚æ•°</a></li></ul></li><li><a href="#412-ç¼–è¾‘é…ç½®æ–‡ä»¶" class="table-of-contents__link toc-highlight">4.1.2 ç¼–è¾‘é…ç½®æ–‡ä»¶</a></li></ul></li><li><a href="#42-æ‰§è¡Œå®‰è£…" class="table-of-contents__link toc-highlight">4.2 æ‰§è¡Œå®‰è£…</a></li><li><a href="#43-æŸ¥çœ‹å®‰è£…" class="table-of-contents__link toc-highlight">4.3 æŸ¥çœ‹å®‰è£…</a></li></ul></li><li><a href="#5å…¶ä»–" class="table-of-contents__link toc-highlight">5.å…¶ä»–</a><ul><li><a href="#51-é…ç½®httpè®¿é—®harbor" class="table-of-contents__link toc-highlight">5.1 é…ç½®httpè®¿é—®harbor</a></li><li><a href="#52-é…ç½®å­˜å‚¨åç«¯" class="table-of-contents__link toc-highlight">5.2 é…ç½®å­˜å‚¨åç«¯</a><ul><li><a href="#521-é˜¿é‡Œäº‘ossçš„é…ç½®ç¤ºä¾‹" class="table-of-contents__link toc-highlight">5.2.1 é˜¿é‡Œäº‘ossçš„é…ç½®ç¤ºä¾‹</a></li><li><a href="#522-ä½¿ç”¨aws-s3çš„é…ç½®ç¤ºä¾‹" class="table-of-contents__link toc-highlight">5.2.2 ä½¿ç”¨aws s3çš„é…ç½®ç¤ºä¾‹</a></li></ul></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">ç¬”è®°</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 æ³¡æ³¡åè‚¥çš‚o</div></div></div></footer></div>
</body>
</html>