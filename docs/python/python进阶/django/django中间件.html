<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-python/pythonè¿›é˜¶/django/djangoä¸­é—´ä»¶" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">djangoä¸­é—´ä»¶ | æˆ‘çš„ç«™ç‚¹</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://pptfz.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://pptfz.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://pptfz.github.io/docs/python/pythonè¿›é˜¶/django/djangoä¸­é—´ä»¶"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="djangoä¸­é—´ä»¶ | æˆ‘çš„ç«™ç‚¹"><meta data-rh="true" name="description" content="[toc]"><meta data-rh="true" property="og:description" content="[toc]"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://pptfz.github.io/docs/python/pythonè¿›é˜¶/django/djangoä¸­é—´ä»¶"><link data-rh="true" rel="alternate" href="https://pptfz.github.io/docs/python/pythonè¿›é˜¶/django/djangoä¸­é—´ä»¶" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://pptfz.github.io/docs/python/pythonè¿›é˜¶/django/djangoä¸­é—´ä»¶" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://SICNXLSDBZ-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="æˆ‘çš„ç«™ç‚¹" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.061a1b25.css">
<script src="/assets/js/runtime~main.19595b7b.js" defer="defer"></script>
<script src="/assets/js/main.1b24f5df.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><div class="announcementBar_mb4j" style="background-color:pink;color:@091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">ä¸€åè¿ç»´ï¼Œä¸¤å°ç”µè„‘ï¼Œä¸‰é¤ä¸å®šï¼Œåªä¸ºè®¾å¤‡å·¥ä½œå››å¹³å…«ç¨³ï¼Œæ‹¼å¾—äº”è„ä¿±æŸï¼Œå…­ç¥æ— ä¸»ï¼Œä»ç„¶ä¸ƒç‚¹èµ·åºŠï¼Œå…«ç‚¹å‡ºå‘ï¼Œæ™šä¸Šä¹ç‚¹ä¸è¿”ï¼Œååˆ†è¾›è‹¦ï¼<br> åå¹´è¿ç»´ï¼Œä¹è½¬åŠŸæˆï¼Œå…«é¢å¼ ç½—ï¼Œå¿™å¾—ä¸ƒçªæµè¡€ï¼Œæ¢å¾—å…­ç¥ä¸å®ï¼Œäº”ä½“æ¬ å®‰ï¼Œä»ç„¶å››å¤„å¥”æ³¢ï¼Œä¸‰æ›´ä¸çœ ï¼Œåªä¸ºä¸¤ä¸ªé“œæ¿ï¼Œä¸€ç”Ÿæ‹¼æï¼</div></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">æˆ‘çš„ç«™ç‚¹</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">ç¬”è®°</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="æ–‡æ¡£ä¾§è¾¹æ " class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">ğŸ˜‚ ğŸ˜‚  ğŸ˜‚</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/github/githubä¸‹è½½åŠ é€Ÿ">github</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/go/goåŠŸèƒ½è„šæœ¬/k8s/è·å–k8sé›†ç¾¤èµ„æºé…ç½®">go</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/idea/vscode/vscodeå¥½ç”¨çš„æ’ä»¶">idea</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/linux/big-data/Ambari/CentOS7ä¸­ç”¨Ambariå¿«é€Ÿæ­å»ºå¤§æ•°æ®å¹³å°">linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/macä¸“åŒº/brewå®‰è£…">macä¸“åŒº</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/python/python-other/nginx+django+uwsgiéƒ¨ç½²é¡¹ç›®">python</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/python/python-other/nginx+django+uwsgiéƒ¨ç½²é¡¹ç›®">python-other</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/python/pythonåŸºç¡€/pythonåŸºç¡€ä¸€ å˜é‡ã€å¸¸é‡ã€æ³¨é‡Š">pythonåŸºç¡€</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/python/pythonå®‰è£…/centos7.6ç¼–è¯‘å®‰è£…python3.6.9">pythonå®‰è£…</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/python/pythonè¿›é˜¶/django/djangoåˆ›å»ºé¡¹ç›®">pythonè¿›é˜¶</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/python/pythonè¿›é˜¶/django/djangoåˆ›å»ºé¡¹ç›®">django</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/python/pythonè¿›é˜¶/django/djangoåˆ›å»ºé¡¹ç›®">djangoåˆ›å»ºé¡¹ç›®</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/python/pythonè¿›é˜¶/django/django urlsè·¯ç”±">django urlsè·¯ç”±</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/python/pythonè¿›é˜¶/django/django è§†å›¾å‡½æ•°">django è§†å›¾å‡½æ•°</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/python/pythonè¿›é˜¶/django/django æ¨¡ç‰ˆæ¸²æŸ“">django æ¨¡ç‰ˆæ¸²æŸ“</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/python/pythonè¿›é˜¶/django/django ORM">django ORM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/python/pythonè¿›é˜¶/django/cookieå’Œsession">cookieå’Œsession</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/python/pythonè¿›é˜¶/django/Ajax">Ajax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/python/pythonè¿›é˜¶/django/djangoä¸­é—´ä»¶">djangoä¸­é—´ä»¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/python/pythonè¿›é˜¶/django/django Formå’ŒMoelFormç»„ä»¶">django Formå’ŒMoelFormç»„ä»¶</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/python/pythonè¿›é˜¶/django/csrf_tokenéªŒè¯è¿‡ç¨‹">csrf_tokenéªŒè¯è¿‡ç¨‹</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/python/pythonè¿›é˜¶/django/djangoå°é¡¹ç›®">djangoå°é¡¹ç›®</a></li></ul></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/web/css/cssåŸºç¡€çŸ¥è¯†">web</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/äº‘åŸç”Ÿ/k8s/helm/helm3å®‰è£…">äº‘åŸç”Ÿ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/å…¶ä»–/wps/wpså†»ç»“çª—å£">å…¶ä»–</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/åšå®¢å·¥å…·/Docusaurus/Docusaurus å®‰è£…">åšå®¢å·¥å…·</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/æ“ä½œå°æŠ€å·§/linux/linuxä¸€äº›éªšæ“ä½œ">æ“ä½œå°æŠ€å·§</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/æ•°æ®åº“/mongodb/centos7å®‰è£…mongodb">æ•°æ®åº“</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/ç¿»è½¦é—®é¢˜åˆé›†/ç¿»è½¦é—®é¢˜-sshå¯†é’¥é—®é¢˜">ç¿»è½¦é—®é¢˜åˆé›†</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">python</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">pythonè¿›é˜¶</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">django</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">djangoä¸­é—´ä»¶</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><p>[toc]</p>
<h1>djangoä¸­é—´ä»¶</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1ä¸­é—´ä»¶ä»‹ç»">1.ä¸­é—´ä»¶ä»‹ç»<a href="#1ä¸­é—´ä»¶ä»‹ç»" class="hash-link" aria-label="1.ä¸­é—´ä»¶ä»‹ç»çš„ç›´æ¥é“¾æ¥" title="1.ä¸­é—´ä»¶ä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-djangoä¸­é—´ä»¶ç®€ä»‹åŠå®šä¹‰">1.1 djangoä¸­é—´ä»¶ç®€ä»‹åŠå®šä¹‰<a href="#11-djangoä¸­é—´ä»¶ç®€ä»‹åŠå®šä¹‰" class="hash-link" aria-label="1.1 djangoä¸­é—´ä»¶ç®€ä»‹åŠå®šä¹‰çš„ç›´æ¥é“¾æ¥" title="1.1 djangoä¸­é—´ä»¶ç®€ä»‹åŠå®šä¹‰çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>djangoä¸­é—´ä»¶æ˜¯ä»‹äºrequestä¸responseå¤„ç†ä¹‹é—´çš„ä¸€é“å¤„ç†è¿‡ç¨‹ï¼Œç›¸å¯¹æ¯”è¾ƒè½»é‡çº§ï¼Œå¹¶ä¸”åœ¨å…¨å±€ä¸Šæ”¹å˜djangoçš„è¾“å…¥ä¸è¾“å‡ºã€‚å› ä¸ºæ”¹å˜çš„æ˜¯å…¨å±€ï¼Œæ‰€ä»¥éœ€è¦è°¨æ…å®ç”¨ï¼Œç”¨ä¸å¥½ä¼šå½±å“åˆ°æ€§èƒ½ã€‚</strong></p>
<p><strong>Djangoçš„ä¸­é—´ä»¶çš„å®šä¹‰ï¼š</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#ä¸­é—´ä»¶æ˜¯ä¸€ä¸ªé’©å­æ¡†æ¶ï¼Œç”¨äºDjangoçš„è¯·æ±‚/å“åº”å¤„ç†ã€‚è¿™æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€åº•å±‚çš„â€œæ’ä»¶â€ç³»ç»Ÿï¼Œç”¨äºå…¨å±€åœ°æ”¹å˜Djangoçš„è¾“å…¥æˆ–è¾“å‡ºã€‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Middleware </span><span class="token keyword" style="font-style:italic">is</span><span class="token plain"> a framework of hooks into Djangoâ€™s request</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">response processing</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">br</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">Itâ€™s a light</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> low</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">level â€œpluginâ€ system </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> globally altering Djangoâ€™s </span><span class="token builtin" style="color:rgb(130, 170, 255)">input</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">or</span><span class="token plain"> output</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="12-djangoä¸­é—´ä»¶çš„ä½œç”¨">1.2 djangoä¸­é—´ä»¶çš„ä½œç”¨<a href="#12-djangoä¸­é—´ä»¶çš„ä½œç”¨" class="hash-link" aria-label="1.2 djangoä¸­é—´ä»¶çš„ä½œç”¨çš„ç›´æ¥é“¾æ¥" title="1.2 djangoä¸­é—´ä»¶çš„ä½œç”¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>å¦‚æœä½ æƒ³ä¿®æ”¹è¯·æ±‚ï¼Œä¾‹å¦‚è¢«ä¼  é€åˆ°viewä¸­çš„<code>HttpRequest</code>å¯¹è±¡ã€‚ æˆ–è€…ä½ æƒ³ä¿®æ”¹viewè¿”å›çš„<code>HttpResponse</code>å¯¹è±¡ï¼Œè¿™äº›éƒ½å¯ä»¥é€šè¿‡ä¸­é—´ä»¶æ¥å®ç°ã€‚</strong></p>
<p><strong>å¯èƒ½ä½ è¿˜æƒ³åœ¨viewæ‰§è¡Œä¹‹å‰åšä¸€äº›æ“ä½œï¼Œè¿™ç§æƒ…å†µå°±å¯ä»¥ç”¨ middlewareæ¥å®ç°ã€‚</strong></p>
<p><strong>è¯´çš„ç›´ç™½ä¸€ç‚¹ä¸­é—´ä»¶æ˜¯å¸®åŠ©æˆ‘ä»¬åœ¨è§†å›¾å‡½æ•°æ‰§è¡Œä¹‹å‰å’Œæ‰§è¡Œä¹‹åéƒ½å¯ä»¥åšä¸€äº›é¢å¤–çš„æ“ä½œï¼Œå®ƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç±»ï¼Œç±»ä¸­å®šä¹‰äº†å‡ ä¸ªæ–¹æ³•ï¼ŒDjangoæ¡†æ¶ä¼šåœ¨è¯·æ±‚çš„ç‰¹å®šçš„æ—¶é—´å»æ‰§è¡Œè¿™äº›æ–¹æ³•ã€‚</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="13-djangoä¸­é—´ä»¶çš„é…ç½®é¡¹">1.3 djangoä¸­é—´ä»¶çš„é…ç½®é¡¹<a href="#13-djangoä¸­é—´ä»¶çš„é…ç½®é¡¹" class="hash-link" aria-label="1.3 djangoä¸­é—´ä»¶çš„é…ç½®é¡¹çš„ç›´æ¥é“¾æ¥" title="1.3 djangoä¸­é—´ä»¶çš„é…ç½®é¡¹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>æ‰“å¼€djangoé¡¹ç›®çš„settings.pyæ–‡ä»¶ï¼Œçœ‹åˆ°ä¸‹é¢çš„MIDDLEWAREé…ç½®é¡¹ï¼Œdjangoé»˜è®¤è‡ªå¸¦çš„ä¸€äº›ä¸­é—´ä»¶ï¼š</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MIDDLEWARE </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;django.middleware.security.SecurityMiddleware&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;django.middleware.common.CommonMiddleware&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2djangoç”Ÿå‘½å‘¨æœŸ">2.djangoç”Ÿå‘½å‘¨æœŸ<a href="#2djangoç”Ÿå‘½å‘¨æœŸ" class="hash-link" aria-label="2.djangoç”Ÿå‘½å‘¨æœŸçš„ç›´æ¥é“¾æ¥" title="2.djangoç”Ÿå‘½å‘¨æœŸçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p><strong>djangoç”Ÿå‘½å‘¨æœŸ</strong></p>
<p><img decoding="async" loading="lazy" src="https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.13.58.png" alt="iShot2020-10-16 15.13.58" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3è‡ªå®šä¹‰ä¸­é—´ä»¶">3.è‡ªå®šä¹‰ä¸­é—´ä»¶<a href="#3è‡ªå®šä¹‰ä¸­é—´ä»¶" class="hash-link" aria-label="3.è‡ªå®šä¹‰ä¸­é—´ä»¶çš„ç›´æ¥é“¾æ¥" title="3.è‡ªå®šä¹‰ä¸­é—´ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬ä¸€æ­¥åœ¨djangoé¡¹ç›®ä¸‹çš„åº”ç”¨ç¨‹åºç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmymiddlewareç›®å½•åç§°ä»»æ„åœ¨è¿™ä¸ªç›®å½•ä¸­å†åˆ›å»ºä¸€ä¸ªmiddlewareæ–‡ä»¶åç§°ä»»æ„åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹"><strong>ç¬¬ä¸€æ­¥ã€åœ¨djangoé¡¹ç›®ä¸‹çš„åº”ç”¨ç¨‹åºç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmymiddlewareç›®å½•ï¼Œåç§°ä»»æ„ï¼Œåœ¨è¿™ä¸ªç›®å½•ä¸­å†åˆ›å»ºä¸€ä¸ªmiddlewareæ–‡ä»¶ï¼Œåç§°ä»»æ„ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹</strong><a href="#ç¬¬ä¸€æ­¥åœ¨djangoé¡¹ç›®ä¸‹çš„åº”ç”¨ç¨‹åºç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmymiddlewareç›®å½•åç§°ä»»æ„åœ¨è¿™ä¸ªç›®å½•ä¸­å†åˆ›å»ºä¸€ä¸ªmiddlewareæ–‡ä»¶åç§°ä»»æ„åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹" class="hash-link" aria-label="ç¬¬ä¸€æ­¥åœ¨djangoé¡¹ç›®ä¸‹çš„åº”ç”¨ç¨‹åºç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmymiddlewareç›®å½•åç§°ä»»æ„åœ¨è¿™ä¸ªç›®å½•ä¸­å†åˆ›å»ºä¸€ä¸ªmiddlewareæ–‡ä»¶åç§°ä»»æ„åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹çš„ç›´æ¥é“¾æ¥" title="ç¬¬ä¸€æ­¥åœ¨djangoé¡¹ç›®ä¸‹çš„åº”ç”¨ç¨‹åºç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmymiddlewareç›®å½•åç§°ä»»æ„åœ¨è¿™ä¸ªç›®å½•ä¸­å†åˆ›å»ºä¸€ä¸ªmiddlewareæ–‡ä»¶åç§°ä»»æ„åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#å¯¼å…¥MiddlewareMixin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">deprecation </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> MiddlewareMixin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">shortcuts </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">HttpResponse</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Auth</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">MiddlewareMixin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># å®šä¹‰ä¸€ä¸ªç™½åå•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    white_list </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;/login/&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">path </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">white_list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            is_login </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">session</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;is_login&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            request.session.getåšçš„äº‹</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            1.å–å‡ºcookieä¸­çš„sessionéšæœºå­—ç¬¦ä¸²{&#x27;sessionid&#x27;:&#x27;asdfasfpoaijsdgihsdj&#x27;}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            xx = request.COOKIES.get(&#x27;sessionid&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="display:inline-block;color:rgb(195, 232, 141)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            2.åˆ°æ•°æ®åº“ä¸­æŸ¥è¯¢è¿™ä¸ªsessionidå¯¹åº”çš„é‚£æ¡è®°å½•</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            data = select session_data from django_session where session_key = xx;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="display:inline-block;color:rgb(195, 232, 141)"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            3.æ‹¿å‡ºè®°å½•ä¸­çš„session_dataæ•°æ®éƒ¨åˆ†è¿›è¡Œè§£å¯†,å¹¶å–å‡ºæ•°æ®</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            dic = sss(data) --&gt; {&#x27;is_login&#x27;:True}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            dic.get(&#x27;is_login&#x27;) --&gt; True</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># è¿™é‡Œå†™ä¸€ä¸ªpassï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªNoneï¼Œå¦‚æœè¿”å›æ˜¯Noneï¼Œåˆ™è¯´æ˜é€šè¿‡äº†è¯·æ±‚</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> is_login </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token keyword" style="font-style:italic">pass</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># return redirect(&#x27;login&#x27;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> HttpResponse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;ä¸­é—´ä»¶ä¸è®©ä½ ç™»é™†&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬äºŒæ­¥åœ¨settingsæ–‡ä»¶ä¸­middlewareé¡¹çš„æœ€åè¾¹é…ç½®ä¸­é—´ä»¶"><strong>ç¬¬äºŒæ­¥ã€åœ¨settingsæ–‡ä»¶ä¸­<code>MIDDLEWARE</code>é¡¹çš„æœ€åè¾¹é…ç½®ä¸­é—´ä»¶</strong><a href="#ç¬¬äºŒæ­¥åœ¨settingsæ–‡ä»¶ä¸­middlewareé¡¹çš„æœ€åè¾¹é…ç½®ä¸­é—´ä»¶" class="hash-link" aria-label="ç¬¬äºŒæ­¥åœ¨settingsæ–‡ä»¶ä¸­middlewareé¡¹çš„æœ€åè¾¹é…ç½®ä¸­é—´ä»¶çš„ç›´æ¥é“¾æ¥" title="ç¬¬äºŒæ­¥åœ¨settingsæ–‡ä»¶ä¸­middlewareé¡¹çš„æœ€åè¾¹é…ç½®ä¸­é—´ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#åº”ç”¨ç¨‹åºå.è‡ªå®šä¹‰ä¸­é—´ä»¶çš„ç›®å½•.è‡ªå®šä¹‰ä¸­é—´ä»¶pyæ–‡ä»¶.è‡ªå®šä¹‰ç±»</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;app01.mymiddleware.middleware.Auth&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ç¬¬ä¸‰æ­¥è§†å›¾æ–‡ä»¶"><strong>ç¬¬ä¸‰æ­¥ã€è§†å›¾æ–‡ä»¶</strong><a href="#ç¬¬ä¸‰æ­¥è§†å›¾æ–‡ä»¶" class="hash-link" aria-label="ç¬¬ä¸‰æ­¥è§†å›¾æ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="ç¬¬ä¸‰æ­¥è§†å›¾æ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">shortcuts </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">HttpResponse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">redirect</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">urls </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> reverse</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Create your views here.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">login</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">method </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;GET&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;login.html&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        username </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">POST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;username&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        password </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">POST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;password&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> username </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;admin&#x27;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">and</span><span class="token plain"> password </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;admin&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">session</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;is_login&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">session</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;username&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> username</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            è®¾ç½®sessionååšçš„3ä»¶äº‹</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            1 ç”Ÿæˆéšæœºå­—ç¬¦ä¸²</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            2 æ”¾åˆ°cookieä¸­è¿›è¡Œä¼ è¾“</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            3 å°†éšæœºå­—ç¬¦ä¸²å’Œå¯¹åº”æ•°æ®ä¿å­˜åˆ°è‡ªå·±æœåŠ¡ç«¯çš„æ•°æ®åº“ä¸­</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;home&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;login&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">home</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#è¿™é‡Œè·å–ä¸Šè¾¹æˆ‘ä»¬è‡ªå·±è®¾ç½®çš„cookie</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># is_login = request.COOKIES.get(&#x27;is_login&#x27;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    is_login </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">session</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;is_login&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    request.session.getåšçš„äº‹</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    1.å–å‡ºcookieä¸­çš„sessionéšæœºå­—ç¬¦ä¸²{&#x27;sessionid&#x27;:&#x27;asdfasfpoaijsdgihsdj&#x27;}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    xx = request.COOKIES.get(&#x27;sessionid&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    2.åˆ°æ•°æ®åº“ä¸­æŸ¥è¯¢è¿™ä¸ªsessionidå¯¹åº”çš„é‚£æ¡è®°å½•</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    data = select session_data from django_session where session_key = xx;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    3.æ‹¿å‡ºè®°å½•ä¸­çš„session_dataæ•°æ®éƒ¨åˆ†è¿›è¡Œè§£å¯†,å¹¶å–å‡ºæ•°æ®</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    dic = sss(data) --&gt; {&#x27;is_login&#x27;:True}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    dic.get(&#x27;is_login&#x27;) --&gt; True</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> is_login </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;home.html&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;login&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4ä¸­é—´ä»¶5å¤§æ–¹æ³•">4.ä¸­é—´ä»¶5å¤§æ–¹æ³•<a href="#4ä¸­é—´ä»¶5å¤§æ–¹æ³•" class="hash-link" aria-label="4.ä¸­é—´ä»¶5å¤§æ–¹æ³•çš„ç›´æ¥é“¾æ¥" title="4.ä¸­é—´ä»¶5å¤§æ–¹æ³•çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-process_requestselfrequest">4.1 process_request(self,request)<a href="#41-process_requestselfrequest" class="hash-link" aria-label="4.1 process_request(self,request)çš„ç›´æ¥é“¾æ¥" title="4.1 process_request(self,request)çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>3ä¸­çš„è‡ªå®šä¹‰ä¸­é—´ä»¶ç”¨åˆ°çš„å°±æ˜¯process_request(self,request)ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†çš„æ–¹æ³•</strong></p>
<p><strong>process_requestæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯requestï¼Œè¿™ä¸ªrequestå’Œè§†å›¾å‡½æ•°ä¸­çš„requestæ˜¯ä¸€æ ·çš„ã€‚</strong></p>
<p><strong>å®ƒçš„è¿”å›å€¼å¯ä»¥æ˜¯Noneä¹Ÿå¯ä»¥æ˜¯HttpResponseå¯¹è±¡ã€‚è¿”å›å€¼æ˜¯Noneçš„è¯ï¼ŒæŒ‰æ­£å¸¸æµç¨‹ç»§ç»­èµ°ï¼Œäº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å¤„ç†ï¼Œå¦‚æœæ˜¯HttpResponseå¯¹è±¡ï¼ŒDjangoå°†ä¸æ‰§è¡Œè§†å›¾å‡½æ•°ï¼Œè€Œå°†å“åº”å¯¹è±¡è¿”å›ç»™æµè§ˆå™¨ã€‚</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-process_responseself-request-response">4.2 process_response(self, request, response)<a href="#42-process_responseself-request-response" class="hash-link" aria-label="4.2 process_response(self, request, response)çš„ç›´æ¥é“¾æ¥" title="4.2 process_response(self, request, response)çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>process_responseæ˜¯å¯¹è§†å›¾å‡½æ•°æ‰€æœ‰çš„å“åº”è¿›è¡Œ å¤„ç†</strong></p>
<p><strong>å®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯requestï¼Œä¸€ä¸ªæ˜¯responseï¼Œrequestå’Œè§†å›¾å‡½æ•°ä¸­çš„requestæ˜¯ä¸€æ ·çš„ï¼Œresponseæ˜¯è§†å›¾å‡½æ•°è¿”å›çš„HttpResponseå¯¹è±¡ã€‚è¯¥æ–¹æ³•çš„è¿”å›å€¼ä¹Ÿå¿…é¡»æ˜¯HttpResponseå¯¹è±¡ã€‚</strong></p>
<p><strong>ä¾‹å¦‚ï¼Œåœ¨æ¯ä¸€ä¸ªè§†å›¾å‡½æ•°çš„å“åº”å¤´ä¸­æ·»åŠ ä¸€äº›ä¸œè¥¿ï¼Œå°±å¯ä»¥åœ¨process_responseæ–¹æ³•ä¸­æ·»åŠ å“åº”å¤´</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">                        </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&#x27;&#x27;&#x27;                                                             </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">                                                                    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    :param request:                                                 </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    :param response:    å°±æ˜¯è§†å›¾å‡½æ•°çš„è¿”å›å€¼(HttpResonseå¯¹è±¡)                   </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    :return:                                                        </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    &#x27;&#x27;&#x27;</span><span class="token plain">                                                             </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&#x27;&#x27;&#x27;                                                             </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    print(response) responseè¿”å›çš„æ˜¯ä¸€ä¸ªHttpResponseå¯¹è±¡                    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    &lt; HttpResponse status_code = 200, &quot;text/html; charset=utf-8&quot; &gt;  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">    &#x27;&#x27;&#x27;</span><span class="token plain">                                                             </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                                                    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#å¿…é¡»è¿”å›responseè¿™ä¸ªå€¼ï¼Œä¸è¿”å›ä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„respnseæ–¹æ³•æ‹¿ä¸åˆ°è¿™ä¸ªå€¼                      </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> response                                                 </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="43-process_viewself-request-view_func-view_args-view_kwargs">4.3 process_view(self, request, view_func, view_args, view_kwargs)<a href="#43-process_viewself-request-view_func-view_args-view_kwargs" class="hash-link" aria-label="4.3 process_view(self, request, view_func, view_args, view_kwargs)çš„ç›´æ¥é“¾æ¥" title="4.3 process_view(self, request, view_func, view_args, view_kwargs)çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>process_viewæ˜¯åœ¨è§†å›¾å‡½æ•°æ‰§è¡Œå‰æ‰§è¡Œ</strong></p>
<p><strong>è¯¥æ–¹æ³•æœ‰å››ä¸ªå‚æ•°</strong></p>
<ul>
<li><strong>requestæ˜¯HttpRequestå¯¹è±¡ã€‚</strong></li>
<li><strong>view_funcæ˜¯Djangoå³å°†ä½¿ç”¨çš„è§†å›¾å‡½æ•°ã€‚ï¼ˆå®ƒæ˜¯ å®é™…çš„å‡½æ•°å¯¹è±¡ï¼Œè€Œä¸æ˜¯å‡½æ•°çš„åç§°ä½œä¸ºå­—ç¬¦ä¸²ã€‚ï¼‰</strong></li>
<li><strong>view_argsæ˜¯å°†ä¼ é€’ç»™è§†å›¾çš„ä½ç½®å‚æ•°çš„åˆ—è¡¨.</strong></li>
<li><strong>view_kwargsæ˜¯å°†ä¼ é€’ç»™è§†å›¾çš„å…³é”®å­—å‚æ•°çš„å­—å…¸ã€‚ view_argså’Œview_kwargséƒ½ä¸åŒ…å«ç¬¬ä¸€ä¸ªè§†å›¾å‚æ•°ï¼ˆrequestï¼‰ã€‚</strong></li>
</ul>
<p><strong>Djangoä¼šåœ¨è°ƒç”¨è§†å›¾å‡½æ•°ä¹‹å‰è°ƒç”¨process_viewæ–¹æ³•ã€‚</strong></p>
<p><strong>å®ƒåº”è¯¥è¿”å›Noneæˆ–ä¸€ä¸ªHttpResponseå¯¹è±¡ã€‚ å¦‚æœè¿”å›Noneï¼ŒDjangoå°†ç»§ç»­å¤„ç†è¿™ä¸ªè¯·æ±‚ï¼Œæ‰§è¡Œä»»ä½•å…¶ä»–ä¸­é—´ä»¶çš„process_viewæ–¹æ³•ï¼Œç„¶åå†æ‰§è¡Œç›¸åº”çš„è§†å›¾ã€‚ å¦‚æœå®ƒè¿”å›ä¸€ä¸ªHttpResponseå¯¹è±¡ï¼ŒDjangoä¸ä¼šè°ƒç”¨å¯¹åº”çš„è§†å›¾å‡½æ•°ã€‚ å®ƒå°†æ‰§è¡Œä¸­é—´ä»¶çš„process_responseæ–¹æ³•å¹¶å°†åº”ç”¨åˆ°è¯¥HttpResponseå¹¶è¿”å›ç»“æœã€‚</strong></p>
<p><strong>process_viewæ‰§è¡Œé¡ºåºç¤ºæ„å›¾</strong></p>
<p><img decoding="async" loading="lazy" src="https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.14.36.png" alt="iShot2020-10-16 15.14.36" class="img_ev3q"></p>
<p><strong>ä¸­é—´ä»¶æ–‡ä»¶</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">deprecation </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> MiddlewareMixin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">shortcuts </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">HttpResponse</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">MD1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">MiddlewareMixin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD1çš„process_requestæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD1çš„process_responseæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> response</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_view</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_kwargs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD1çš„process_viewæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">__name__</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">MD2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">MiddlewareMixin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD2çš„process_requestæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD2çš„process_responseæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> response</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_view</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> view_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> view_args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> view_kwargs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD2çš„process_viewæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> view_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">__name__</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>é…ç½®settingsæ–‡ä»¶ï¼ŒMIDDLEWAREé¡¹</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token string" style="color:rgb(195, 232, 141)">&#x27;app01.mymiddleware.xx.MD1&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;app01.mymiddleware.xx.MD2&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>è§†å›¾æ–‡ä»¶</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">login</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#è¿™é‡Œæ‰“å°ä¸€ä¸ªloginè§†å›¾å‡½æ•°æ˜¯ä¸ºäº†çœ‹åˆ°æ‰§è¡Œçš„é¡ºåºï¼Œprocess_request,process_response,process_view</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;loginè§†å›¾å‡½æ•°&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">method </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;GET&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;login.html&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æ‰“å°ç»“æœ</strong></p>
<p><img decoding="async" loading="lazy" src="https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.15.03.png" alt="iShot2020-10-16 15.15.03" class="img_ev3q"></p>
<p><strong>å¯ä»¥çœ‹åˆ°ï¼Œå…ˆæ‰§è¡Œprocess_requestæ–¹æ³•ï¼Œç„¶åæ‰§è¡Œprocess_viewæ–¹æ³•ï¼Œprocess_viewæ–¹æ³•æ˜¯åœ¨è§†å›¾å‡½æ•°æ‰§è¡Œå‰æ‰§è¡Œï¼Œä¹‹åæ‰§è¡Œè§†å›¾å‡½æ•°ï¼Œæœ€åæ‰§è¡Œprocess_responseæ–¹æ³•ï¼Œå¹¶ä¸”process_responseæ˜¯å€’åºæ‰§è¡Œ</strong></p>
<p><strong>âš ï¸âš ï¸âš ï¸å¦‚æœåœ¨process_requestæ–¹æ³•ä¸­è¿”å›äº†HttpResponseå¯¹è±¡ï¼Œåˆ™åªæ‰§è¡Œè‡ªå·±ä¸­é—´ä»¶çš„process_requestæ–¹æ³•å’Œprocess_responseæ–¹æ³•ï¼Œå¦‚æœè‡ªå·±çš„ä¸­é—´ä»¶æ²¡æœ‰å®šä¹‰process_responseæ–¹æ³•ï¼Œåˆ™ä¼šäº¤ç»™è‡ªå·±ç±»çš„ä¸Šä¸€ä¸ªä¸­é—´ä»¶ï¼Œå¦‚æœä¸Šä¸€ä¸ªç±»ä¹Ÿæ²¡æœ‰ï¼Œä¼šä¸€ç›´å¾€ä¸Šæ¨</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">MD1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">MiddlewareMixin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD1çš„process_requestæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#è¿™é‡Œè¿”å›äº†ä¸€ä¸ªHttpResponseå¯¹è±¡ï¼Œåˆ™åªæ‰§è¡Œè‡ªå·±ä¸­é—´ä»¶çš„process_requestæ–¹æ³•å’Œprocess_responseæ–¹æ³•</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> HttpResponse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;xxx&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD1çš„process_responseæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> response</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_view</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_kwargs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD1çš„process_viewæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">__name__</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æ‰“å°ç»“æœ</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">MD1çš„process_requestæ–¹æ³•</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">MD1çš„process_responseæ–¹æ³•</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>ç¤ºæ„å›¾</strong></p>
<p><img decoding="async" loading="lazy" src="https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.15.24.png" alt="iShot2020-10-16 15.15.24" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="44-process_exceptionself-request-exception">4.4 process_exception(self, request, exception)<a href="#44-process_exceptionself-request-exception" class="hash-link" aria-label="4.4 process_exception(self, request, exception)çš„ç›´æ¥é“¾æ¥" title="4.4 process_exception(self, request, exception)çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>è¯¥æ–¹æ³•ä¸¤ä¸ªå‚æ•°:</strong></p>
<ul>
<li><strong>ä¸€ä¸ªHttpRequestå¯¹è±¡</strong></li>
<li><strong>ä¸€ä¸ªexceptionæ˜¯è§†å›¾å‡½æ•°å¼‚å¸¸äº§ç”Ÿçš„Exceptionå¯¹è±¡ã€‚</strong></li>
</ul>
<p><strong>è¿™ä¸ªæ–¹æ³•åªæœ‰åœ¨è§†å›¾å‡½æ•°ä¸­å‡ºç°å¼‚å¸¸äº†æ‰æ‰§è¡Œï¼Œå®ƒè¿”å›çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ªNoneä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªHttpResponseå¯¹è±¡ã€‚å¦‚æœæ˜¯HttpResponseå¯¹è±¡ï¼ŒDjangoå°†è°ƒç”¨æ¨¡æ¿å’Œä¸­é—´ä»¶ä¸­çš„process_responseæ–¹æ³•ï¼Œå¹¶è¿”å›ç»™æµè§ˆ å™¨ï¼Œå¦åˆ™å°†é»˜è®¤å¤„ç†å¼‚å¸¸ã€‚å¦‚æœè¿”å›ä¸€ä¸ªNoneï¼Œåˆ™äº¤ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„process_exceptionæ–¹æ³•æ¥å¤„ç†å¼‚å¸¸ã€‚å®ƒçš„æ‰§è¡Œé¡ºåºä¹Ÿæ˜¯æŒ‰ç…§ä¸­é—´ä»¶æ³¨å†Œé¡ºåºçš„å€’åºæ‰§è¡Œã€‚</strong></p>
<p><strong>process_exceptionæ‰§è¡Œç¤ºæ„å›¾</strong></p>
<p><img decoding="async" loading="lazy" src="https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.15.53.png" alt="iShot2020-10-16 15.15.53" class="img_ev3q"></p>
<p><strong>ä¸­é—´ä»¶æ–‡ä»¶</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">deprecation </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> MiddlewareMixin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">shortcuts </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">HttpResponse</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">MD1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">MiddlewareMixin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD1çš„process_requestæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># return HttpResponse(&#x27;xxx&#x27;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD1çš„process_responseæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> response</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_view</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_kwargs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD1çš„process_viewæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">__name__</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;MD1çš„process_exceptionæ–¹æ³•&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> HttpResponse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">MD2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">MiddlewareMixin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD2çš„process_requestæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD2çš„process_responseæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> response</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_view</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> view_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> view_args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> view_kwargs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD2çš„process_viewæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> view_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">__name__</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;MD2çš„process_exceptionæ–¹æ³•&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> HttpResponse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>è§†å›¾å‡½æ•°æ–‡ä»¶ï¼Œåœ¨è§†å›¾å‡½æ•°ä¸­æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">login</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># print(&#x27;loginè§†å›¾å‡½æ•°&#x27;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;app01ä¸­çš„loginè§†å›¾å‡½æ•°&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">raise</span><span class="token plain"> ValueError</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;è§†å›¾å‡½æ•°ä¸­å‡ºé”™äº†æ‰æ‰§è¡Œprocess_exceptionæ–¹æ³•&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> HttpResponse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;OK&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">method </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;GET&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;login.html&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        username </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">POST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;username&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        password </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">POST</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;password&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> username </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;admin&#x27;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">and</span><span class="token plain"> password </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;admin&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">session</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;is_login&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">session</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;username&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> username</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            è®¾ç½®sessionååšçš„3ä»¶äº‹</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            1 ç”Ÿæˆéšæœºå­—ç¬¦ä¸²</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            2 æ”¾åˆ°cookieä¸­è¿›è¡Œä¼ è¾“</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            3 å°†éšæœºå­—ç¬¦ä¸²å’Œå¯¹åº”æ•°æ®ä¿å­˜åˆ°è‡ªå·±æœåŠ¡ç«¯çš„æ•°æ®åº“ä¸­</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token triple-quoted-string string" style="color:rgb(195, 232, 141)">            &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;home&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;login&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æ‰“å°ç»“æœï¼Œå½“md1å’Œmd2ä¸­çš„process_exceptionæ–¹æ³•éƒ½è¿”å›äº†Httpresponseå¯¹è±¡ï¼Œåªæ‰§è¡Œmd2çš„process_exceptionæ–¹æ³•</strong></p>
<p><img decoding="async" loading="lazy" src="https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.16.17.png" alt="iShot2020-10-16 15.16.17" class="img_ev3q"></p>
<p><strong>å½“åªæœ‰md1è¿”å›Httpresponseå¯¹è±¡æ—¶ï¼Œmd1å’Œmd2çš„process_exceptionæ–¹æ³•éƒ½æ‰§è¡Œ</strong></p>
<p><img decoding="async" loading="lazy" src="https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.16.36.png" alt="iShot2020-10-16 15.16.36" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="45-process_template_responseself-request-response">4.5 process_template_response(self, request, response)<a href="#45-process_template_responseself-request-response" class="hash-link" aria-label="4.5 process_template_response(self, request, response)çš„ç›´æ¥é“¾æ¥" title="4.5 process_template_response(self, request, response)çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>å®ƒçš„å‚æ•°ï¼Œä¸€ä¸ªHttpRequestå¯¹è±¡ï¼Œresponseæ˜¯TemplateResponseå¯¹è±¡ï¼ˆç”±è§†å›¾å‡½æ•°æˆ–è€…ä¸­é—´ä»¶äº§ç”Ÿï¼‰</strong></p>
<p><strong>process_template_responseæ˜¯åœ¨è§†å›¾å‡½æ•°æ‰§è¡Œå®Œæˆåç«‹å³æ‰§è¡Œï¼Œä½†æ˜¯å®ƒæœ‰ä¸€ä¸ªå‰ææ¡ä»¶ï¼Œé‚£å°±æ˜¯è§†å›¾å‡½æ•°è¿”å›çš„å¯¹è±¡æœ‰ä¸€ä¸ªrender()æ–¹æ³•ï¼ˆæˆ–è€…  è¡¨æ˜è¯¥å¯¹è±¡æ˜¯ä¸€ä¸ªTemplateResponseå¯¹è±¡æˆ–ç­‰ä»·æ–¹æ³•ï¼‰</strong></p>
<p><strong>ä¸­é—´ä»¶æ–‡ä»¶</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">deprecation </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> MiddlewareMixin</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">shortcuts </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">HttpResponse</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">MD1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">MiddlewareMixin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD1çš„process_requestæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># return HttpResponse(&#x27;xxx&#x27;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD1çš„process_responseæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> response</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_view</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_kwargs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD1çš„process_viewæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain">view_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">__name__</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;MD1çš„process_exceptionæ–¹æ³•&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> HttpResponse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token builtin" style="color:rgb(130, 170, 255)">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_template_response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;MD1çš„process_template_responseæ–¹æ³•&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> response</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">MD2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">MiddlewareMixin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD2çš„process_requestæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD2çš„process_responseæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> response</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_view</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> view_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> view_args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> view_kwargs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;MD2çš„process_viewæ–¹æ³•&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> view_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">__name__</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;MD2çš„process_exceptionæ–¹æ³•&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># return HttpResponse(str(exception))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">process_template_response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> response</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;MD2çš„process_template_responseæ–¹æ³•&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> response</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>è§†å›¾æ–‡ä»¶ï¼Œå¿…é¡»è¿™ä¹ˆå†™æ‰è¡Œ</strong></p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">login</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">render</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">print</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;in index/render&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> HttpResponse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;OK&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># è¿”å›çš„å°†æ˜¯è¿™ä¸ªæ–°çš„å¯¹è±¡</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rep </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> HttpResponse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;OK&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    rep</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">render </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> render</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> rep</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æ‰“å°ç»“æœ</strong></p>
<p><img decoding="async" loading="lazy" src="https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.17.07.png" alt="iShot2020-10-16 15.17.07" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5ä¸­é—´ä»¶æ‰§è¡Œæµç¨‹">5.ä¸­é—´ä»¶æ‰§è¡Œæµç¨‹<a href="#5ä¸­é—´ä»¶æ‰§è¡Œæµç¨‹" class="hash-link" aria-label="5.ä¸­é—´ä»¶æ‰§è¡Œæµç¨‹çš„ç›´æ¥é“¾æ¥" title="5.ä¸­é—´ä»¶æ‰§è¡Œæµç¨‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p><strong>è¯·æ±‚åˆ°è¾¾ä¸­é—´ä»¶ä¹‹åï¼Œå…ˆæŒ‰ç…§æ­£åºæ‰§è¡Œæ¯ä¸ªæ³¨å†Œä¸­é—´ä»¶çš„process_requesæ–¹æ³•ï¼Œprocess_requestæ–¹æ³•è¿”å›çš„å€¼æ˜¯Noneï¼Œå°±ä¾æ¬¡æ‰§è¡Œï¼Œå¦‚æœè¿”å›çš„å€¼æ˜¯HttpResponseå¯¹è±¡ï¼Œä¸å†æ‰§è¡Œåé¢çš„process_requestæ–¹æ³•ï¼Œè€Œæ˜¯æ‰§è¡Œå½“å‰å¯¹åº”ä¸­é—´ä»¶çš„process_responseæ–¹æ³•ï¼Œå°†HttpResponseå¯¹è±¡è¿”å›ç»™æµè§ˆå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šå¦‚æœMIDDLEWAREä¸­æ³¨å†Œäº†6ä¸ªä¸­é—´ä»¶ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç¬¬3ä¸ªä¸­é—´ä»¶è¿”å›äº†ä¸€ä¸ªHttpResponseå¯¹è±¡ï¼Œé‚£ä¹ˆç¬¬4,5,6ä¸­é—´ä»¶çš„process_requestå’Œprocess_responseæ–¹æ³•éƒ½ä¸æ‰§è¡Œï¼Œé¡ºåºæ‰§è¡Œ3,2,1ä¸­é—´ä»¶çš„process_responseæ–¹æ³•</strong></p>
<p><img decoding="async" loading="lazy" src="https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.18.04.png" alt="iShot2020-10-16 15.18.04" class="img_ev3q"></p>
<p><strong>process_requestæ–¹æ³•éƒ½æ‰§è¡Œå®Œåï¼ŒåŒ¹é…è·¯ç”±ï¼Œæ‰¾åˆ°è¦æ‰§è¡Œçš„è§†å›¾å‡½æ•°ï¼Œå…ˆä¸æ‰§è¡Œè§†å›¾å‡½æ•°ï¼Œå…ˆæ‰§è¡Œä¸­é—´ä»¶ä¸­çš„process_viewæ–¹æ³•ï¼Œprocess_viewæ–¹æ³•è¿”å›Noneï¼Œç»§ç»­æŒ‰é¡ºåºæ‰§è¡Œï¼Œæ‰€æœ‰process_viewæ–¹æ³•æ‰§è¡Œå®Œåæ‰§è¡Œè§†å›¾å‡½æ•°ã€‚åŠ å…¥ä¸­é—´ä»¶3 çš„process_viewæ–¹æ³•è¿”å›äº†HttpResponseå¯¹è±¡ï¼Œåˆ™4,5,6çš„process_viewä»¥åŠè§†å›¾å‡½æ•°éƒ½ä¸æ‰§è¡Œï¼Œç›´æ¥ä»æœ€åä¸€ä¸ªä¸­é—´ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸­é—´ä»¶6çš„process_responseæ–¹æ³•å¼€å§‹å€’åºæ‰§è¡Œ</strong></p>
<p><img decoding="async" loading="lazy" src="https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.18.38.png" alt="iShot2020-10-16 15.18.38" class="img_ev3q"></p>
<p><strong>process_template_responseå’Œprocess_exceptionä¸¤ä¸ªæ–¹æ³•çš„è§¦å‘æ˜¯æœ‰æ¡ä»¶çš„ï¼Œæ‰§è¡Œé¡ºåºä¹Ÿæ˜¯å€’åºã€‚æ€»ç»“æ‰€æœ‰çš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹</strong></p>
<p><img decoding="async" loading="lazy" src="https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-10-16%2015.19.00.png" alt="iShot2020-10-16 15.19.00" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡ä»¶é€‰é¡¹å¡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/python/pythonè¿›é˜¶/django/Ajax"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">Ajax</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/python/pythonè¿›é˜¶/django/django Formå’ŒMoelFormç»„ä»¶"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">django Formå’ŒMoelFormç»„ä»¶</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1ä¸­é—´ä»¶ä»‹ç»" class="table-of-contents__link toc-highlight">1.ä¸­é—´ä»¶ä»‹ç»</a><ul><li><a href="#11-djangoä¸­é—´ä»¶ç®€ä»‹åŠå®šä¹‰" class="table-of-contents__link toc-highlight">1.1 djangoä¸­é—´ä»¶ç®€ä»‹åŠå®šä¹‰</a></li><li><a href="#12-djangoä¸­é—´ä»¶çš„ä½œç”¨" class="table-of-contents__link toc-highlight">1.2 djangoä¸­é—´ä»¶çš„ä½œç”¨</a></li><li><a href="#13-djangoä¸­é—´ä»¶çš„é…ç½®é¡¹" class="table-of-contents__link toc-highlight">1.3 djangoä¸­é—´ä»¶çš„é…ç½®é¡¹</a></li></ul></li><li><a href="#2djangoç”Ÿå‘½å‘¨æœŸ" class="table-of-contents__link toc-highlight">2.djangoç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="#3è‡ªå®šä¹‰ä¸­é—´ä»¶" class="table-of-contents__link toc-highlight">3.è‡ªå®šä¹‰ä¸­é—´ä»¶</a><ul><li><a href="#ç¬¬ä¸€æ­¥åœ¨djangoé¡¹ç›®ä¸‹çš„åº”ç”¨ç¨‹åºç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmymiddlewareç›®å½•åç§°ä»»æ„åœ¨è¿™ä¸ªç›®å½•ä¸­å†åˆ›å»ºä¸€ä¸ªmiddlewareæ–‡ä»¶åç§°ä»»æ„åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹" class="table-of-contents__link toc-highlight"><strong>ç¬¬ä¸€æ­¥ã€åœ¨djangoé¡¹ç›®ä¸‹çš„åº”ç”¨ç¨‹åºç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmymiddlewareç›®å½•ï¼Œåç§°ä»»æ„ï¼Œåœ¨è¿™ä¸ªç›®å½•ä¸­å†åˆ›å»ºä¸€ä¸ªmiddlewareæ–‡ä»¶ï¼Œåç§°ä»»æ„ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹å†…å®¹</strong></a></li><li><a href="#ç¬¬äºŒæ­¥åœ¨settingsæ–‡ä»¶ä¸­middlewareé¡¹çš„æœ€åè¾¹é…ç½®ä¸­é—´ä»¶" class="table-of-contents__link toc-highlight"><strong>ç¬¬äºŒæ­¥ã€åœ¨settingsæ–‡ä»¶ä¸­<code>MIDDLEWARE</code>é¡¹çš„æœ€åè¾¹é…ç½®ä¸­é—´ä»¶</strong></a></li><li><a href="#ç¬¬ä¸‰æ­¥è§†å›¾æ–‡ä»¶" class="table-of-contents__link toc-highlight"><strong>ç¬¬ä¸‰æ­¥ã€è§†å›¾æ–‡ä»¶</strong></a></li></ul></li><li><a href="#4ä¸­é—´ä»¶5å¤§æ–¹æ³•" class="table-of-contents__link toc-highlight">4.ä¸­é—´ä»¶5å¤§æ–¹æ³•</a><ul><li><a href="#41-process_requestselfrequest" class="table-of-contents__link toc-highlight">4.1 process_request(self,request)</a></li><li><a href="#42-process_responseself-request-response" class="table-of-contents__link toc-highlight">4.2 process_response(self, request, response)</a></li><li><a href="#43-process_viewself-request-view_func-view_args-view_kwargs" class="table-of-contents__link toc-highlight">4.3 process_view(self, request, view_func, view_args, view_kwargs)</a></li><li><a href="#44-process_exceptionself-request-exception" class="table-of-contents__link toc-highlight">4.4 process_exception(self, request, exception)</a></li><li><a href="#45-process_template_responseself-request-response" class="table-of-contents__link toc-highlight">4.5 process_template_response(self, request, response)</a></li></ul></li><li><a href="#5ä¸­é—´ä»¶æ‰§è¡Œæµç¨‹" class="table-of-contents__link toc-highlight">5.ä¸­é—´ä»¶æ‰§è¡Œæµç¨‹</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">ç¬”è®°</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 æ³¡æ³¡åè‚¥çš‚o</div></div></div></footer></div>
</body>
</html>