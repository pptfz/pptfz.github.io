<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-linux/linuxæœåŠ¡/supervisor/supervisorå®‰è£…" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">supervisorå®‰è£… | æˆ‘çš„ç«™ç‚¹</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://pptfz.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://pptfz.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://pptfz.github.io/docs/linux/linuxæœåŠ¡/supervisor/supervisorå®‰è£…"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="supervisorå®‰è£… | æˆ‘çš„ç«™ç‚¹"><meta data-rh="true" name="description" content="[toc]"><meta data-rh="true" property="og:description" content="[toc]"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://pptfz.github.io/docs/linux/linuxæœåŠ¡/supervisor/supervisorå®‰è£…"><link data-rh="true" rel="alternate" href="https://pptfz.github.io/docs/linux/linuxæœåŠ¡/supervisor/supervisorå®‰è£…" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://pptfz.github.io/docs/linux/linuxæœåŠ¡/supervisor/supervisorå®‰è£…" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://SICNXLSDBZ-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="æˆ‘çš„ç«™ç‚¹" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.061a1b25.css">
<script src="/assets/js/runtime~main.19595b7b.js" defer="defer"></script>
<script src="/assets/js/main.1b24f5df.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="è·³åˆ°ä¸»è¦å†…å®¹"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">è·³åˆ°ä¸»è¦å†…å®¹</a></div><div class="announcementBar_mb4j" style="background-color:pink;color:@091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">ä¸€åè¿ç»´ï¼Œä¸¤å°ç”µè„‘ï¼Œä¸‰é¤ä¸å®šï¼Œåªä¸ºè®¾å¤‡å·¥ä½œå››å¹³å…«ç¨³ï¼Œæ‹¼å¾—äº”è„ä¿±æŸï¼Œå…­ç¥æ— ä¸»ï¼Œä»ç„¶ä¸ƒç‚¹èµ·åºŠï¼Œå…«ç‚¹å‡ºå‘ï¼Œæ™šä¸Šä¹ç‚¹ä¸è¿”ï¼Œååˆ†è¾›è‹¦ï¼<br> åå¹´è¿ç»´ï¼Œä¹è½¬åŠŸæˆï¼Œå…«é¢å¼ ç½—ï¼Œå¿™å¾—ä¸ƒçªæµè¡€ï¼Œæ¢å¾—å…­ç¥ä¸å®ï¼Œäº”ä½“æ¬ å®‰ï¼Œä»ç„¶å››å¤„å¥”æ³¢ï¼Œä¸‰æ›´ä¸çœ ï¼Œåªä¸ºä¸¤ä¸ªé“œæ¿ï¼Œä¸€ç”Ÿæ‹¼æï¼</div></div><nav aria-label="ä¸»å¯¼èˆª" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="åˆ‡æ¢å¯¼èˆªæ " aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">æˆ‘çš„ç«™ç‚¹</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">ç¬”è®°</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-label="åˆ‡æ¢æµ…è‰²/æš—é»‘æ¨¡å¼ï¼ˆå½“å‰ä¸ºæµ…è‰²æ¨¡å¼ï¼‰" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="å›åˆ°é¡¶éƒ¨" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="æ–‡æ¡£ä¾§è¾¹æ " class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs">ğŸ˜‚ ğŸ˜‚  ğŸ˜‚</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/github/githubä¸‹è½½åŠ é€Ÿ">github</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/go/goåŠŸèƒ½è„šæœ¬/k8s/è·å–k8sé›†ç¾¤èµ„æºé…ç½®">go</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/idea/vscode/vscodeå¥½ç”¨çš„æ’ä»¶">idea</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/linux/big-data/Ambari/CentOS7ä¸­ç”¨Ambariå¿«é€Ÿæ­å»ºå¤§æ•°æ®å¹³å°">linux</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/big-data/Ambari/CentOS7ä¸­ç”¨Ambariå¿«é€Ÿæ­å»ºå¤§æ•°æ®å¹³å°">big-data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/git/CentOS7ç¼–è¯‘å®‰è£…git">git</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/kvm/å®‰è£…/kvmå®‰è£…">kvm</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxå…¶ä»–/CentOS7å®‰è£…å­—ä½“">linuxå…¶ä»–</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxå†…æ ¸/Linuxå‡çº§å†…æ ¸">linuxå†…æ ¸</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxå‘½ä»¤/Linuxæƒé™æ€»ç»“">linuxå‘½ä»¤</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxå®ç”¨å¼€æºå°å·¥å…·/bat">linuxå®ç”¨å¼€æºå°å·¥å…·</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/linux/linuxæœåŠ¡/VPN/CentOS7ä¸€é”®å®‰è£…OpenVPN">linuxæœåŠ¡</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxæœåŠ¡/VPN/CentOS7ä¸€é”®å®‰è£…OpenVPN">VPN</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxæœåŠ¡/elk/elasticsearch/elasticsearchå®‰è£…">elk</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxæœåŠ¡/ldap/CentOS7æ­å»ºOpenLDAPæœåŠ¡ç«¯">ldap</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxæœåŠ¡/nfs/centos7æ­å»ºNFS">nfs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxæœåŠ¡/nginx/nginxå®‰è£…">nginx</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxæœåŠ¡/php/å®‰è£…/phpç¼–è¯‘æŠ¥é”™">php</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxæœåŠ¡/ssh/ssh config">ssh</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/linux/linuxæœåŠ¡/supervisor/supervisorå®‰è£…">supervisor</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/linux/linuxæœåŠ¡/supervisor/supervisorå®‰è£…">supervisorå®‰è£…</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/linuxæœåŠ¡/supervisor/supervisorç®¡ç†docusaurus">supervisorç®¡ç†docusaurus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/linuxæœåŠ¡/supervisor/supervisorç®¡ç†gitbook">supervisorç®¡ç†gitbook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/linuxæœåŠ¡/supervisor/supervisorç®¡ç†mongodb">supervisorç®¡ç†mongodb</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/linuxæœåŠ¡/supervisor/supervisorç®¡ç†mysql">supervisorç®¡ç†mysql</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/linuxæœåŠ¡/supervisor/supervisorç®¡ç†nginx">supervisorç®¡ç†nginx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/linuxæœåŠ¡/supervisor/supervisorç®¡ç†php">supervisorç®¡ç†php</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/linuxæœåŠ¡/supervisor/supervisorç®¡ç†redis">supervisorç®¡ç†redis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/linuxæœåŠ¡/supervisor/supervisorç®¡ç†tomcat">supervisorç®¡ç†tomcat</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/linuxæœåŠ¡/supervisor/supervisorç®¡ç†å¤§æ•°æ®ä»»åŠ¡">supervisorç®¡ç†å¤§æ•°æ®ä»»åŠ¡</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/linuxæœåŠ¡/supervisor/supervisorç®¡ç†éœ€è¦æŒ‡å®šç¯å¢ƒå˜é‡åŠç›®å½•çš„æœåŠ¡">supervisorç®¡ç†éœ€è¦æŒ‡å®šç¯å¢ƒå˜é‡åŠç›®å½•çš„æœåŠ¡</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/linuxæœåŠ¡/supervisor/supervisorè‡ªå®šä¹‰æœåŠ¡æ–‡ä»¶å‚æ•°">supervisorè‡ªå®šä¹‰æœåŠ¡æ–‡ä»¶å‚æ•°</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxæœåŠ¡/tomcat/centos7äºŒè¿›åˆ¶å®‰è£…tomcat8">tomcat</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxæœåŠ¡/åŒæ­¥æœåŠ¡/centos7.7æ­å»ºlsyncd">åŒæ­¥æœåŠ¡</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxæœåŠ¡/é‚®ä»¶æœåŠ¡/linuxä½¿ç”¨å‘½ä»¤å‘é€é‚®ä»¶">é‚®ä»¶æœåŠ¡</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/linuxç³»ç»Ÿ/deepin/deepin15.11ä½¿ç”¨è®°å½•">linuxç³»ç»Ÿ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/monitor/grafana/å®‰è£…/grafanaå®‰è£…">monitor</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/openstack/mitaka/centos7.8æ­å»ºopenstack Mitakaç‰ˆ">openstack</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/shell/expectè‡ªåŠ¨åŒ–äº¤äº’å¼ç¨‹åº">shell</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/åŒ…ç®¡ç†å·¥å…·/gvm/gvmå®‰è£…">åŒ…ç®¡ç†å·¥å…·</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/æ€§èƒ½æµ‹è¯•/æ–‡ä»¶åˆ é™¤æ•ˆç‡æµ‹è¯•/æµ‹è¯•Linuxä¸‹åˆ é™¤å¤§é‡æ–‡ä»¶çš„æ•ˆç‡">æ€§èƒ½æµ‹è¯•</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/æ—¥å¿—/Linux æ—¥å¿—åˆ‡å‰²ç¥å™¨ Logrotate åŸç†å’Œé…ç½®è¯¦è§£">æ—¥å¿—</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/ç”Ÿäº§ç¯å¢ƒå¼€æºé¡¹ç›®/biå·¥å…·/superset/supersetå®‰è£…">ç”Ÿäº§ç¯å¢ƒå¼€æºé¡¹ç›®</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/ç”Ÿäº§é—®é¢˜æ€»ç»“/ssh/è®°å½•ä¸€æ¬¡è¯¡å¼‚çš„sshè¿æ¥é—®é¢˜">ç”Ÿäº§é—®é¢˜æ€»ç»“</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/linux/ç§‘å­¦ä¸Šç½‘">ç§‘å­¦ä¸Šç½‘</a><button aria-label="å±•å¼€ä¾§è¾¹æ åˆ†ç±» &#x27;ç§‘å­¦ä¸Šç½‘&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/ç½‘ç»œåè®®/http/HTTP åè®®">ç½‘ç»œåè®®</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/è‡ªåŠ¨åŒ–è¿ç»´å¹³å°/ansible/ansible playbook">è‡ªåŠ¨åŒ–è¿ç»´å¹³å°</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/linux/é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºä¼˜ç§€æ–‡ç« /shellè„šæœ¬/shellè„šæœ¬é€ŸæŸ¥æ‰‹å†Œ">é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºä¼˜ç§€æ–‡ç« </a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/macä¸“åŒº/brewå®‰è£…">macä¸“åŒº</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/python/python-other/nginx+django+uwsgiéƒ¨ç½²é¡¹ç›®">python</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/web/css/cssåŸºç¡€çŸ¥è¯†">web</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/äº‘åŸç”Ÿ/k8s/helm/helm3å®‰è£…">äº‘åŸç”Ÿ</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/å…¶ä»–/wps/wpså†»ç»“çª—å£">å…¶ä»–</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/åšå®¢å·¥å…·/Docusaurus/Docusaurus å®‰è£…">åšå®¢å·¥å…·</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/æ“ä½œå°æŠ€å·§/linux/linuxä¸€äº›éªšæ“ä½œ">æ“ä½œå°æŠ€å·§</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/æ•°æ®åº“/mongodb/centos7å®‰è£…mongodb">æ•°æ®åº“</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/ç¿»è½¦é—®é¢˜åˆé›†/ç¿»è½¦é—®é¢˜-sshå¯†é’¥é—®é¢˜">ç¿»è½¦é—®é¢˜åˆé›†</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="é¡µé¢è·¯å¾„"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="ä¸»é¡µé¢" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">linux</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">linuxæœåŠ¡</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">supervisor</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">supervisorå®‰è£…</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">æœ¬é¡µæ€»è§ˆ</button></div><div class="theme-doc-markdown markdown"><p>[toc]</p>
<h1>supervisorå®‰è£…</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1supervisorç®€ä»‹">1.Supervisorç®€ä»‹<a href="#1supervisorç®€ä»‹" class="hash-link" aria-label="1.Supervisorç®€ä»‹çš„ç›´æ¥é“¾æ¥" title="1.Supervisorç®€ä»‹çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p><a href="https://github.com/Supervisor/Supervisor" target="_blank" rel="noopener noreferrer">Supervisor githubåœ°å€</a></p>
<p><a href="https://Supervisord.org/" target="_blank" rel="noopener noreferrer">Supervisorå®˜ç½‘</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-å®˜ç½‘å¯¹äºsupervisorçš„ä»‹ç»">1.1 å®˜ç½‘å¯¹äºSupervisorçš„ä»‹ç»<a href="#11-å®˜ç½‘å¯¹äºsupervisorçš„ä»‹ç»" class="hash-link" aria-label="1.1 å®˜ç½‘å¯¹äºSupervisorçš„ä»‹ç»çš„ç›´æ¥é“¾æ¥" title="1.1 å®˜ç½‘å¯¹äºSupervisorçš„ä»‹ç»çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="111-æ€»è§ˆ">1.1.1 æ€»è§ˆ<a href="#111-æ€»è§ˆ" class="hash-link" aria-label="1.1.1 æ€»è§ˆçš„ç›´æ¥é“¾æ¥" title="1.1.1 æ€»è§ˆçš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<p>Supervisoræ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯/æœåŠ¡å™¨ç³»ç»Ÿï¼Œå…è®¸å…¶ç”¨æˆ·æ§åˆ¶ç±»ä¼¼UNIXçš„æ“ä½œç³»ç»Ÿä¸Šçš„è®¸å¤šè¿›ç¨‹ã€‚å®ƒå—åˆ°ä»¥ä¸‹æ–¹é¢çš„å¯å‘</p>
<p><strong>æ–¹ä¾¿</strong></p>
<p>:::infoæ–¹ä¾¿</p>
<p>éœ€è¦ä¸ºæ¯ä¸ªå•ä¸ªæµç¨‹å®ä¾‹ç¼–å†™<code>rc.d</code>è„šæœ¬é€šå¸¸å¾ˆä¸æ–¹ä¾¿ã€‚ <code>rc.d</code>è„šæœ¬æ˜¯è¿›ç¨‹åˆå§‹åŒ–/è‡ªåŠ¨å¯åŠ¨/ç®¡ç†çš„ä¸€ä¸ªå¾ˆå¥½çš„æœ€ä½å…¬åˆ†æ¯å½¢å¼ï¼Œä½†æ˜¯ç¼–å†™å’Œç»´æŠ¤å®ƒä»¬å¯èƒ½å¾ˆéº»çƒ¦ã€‚æ­¤å¤–ï¼Œ<code>rc.d</code>è„šæœ¬æ— æ³•è‡ªåŠ¨é‡æ–°å¯åŠ¨å´©æºƒçš„è¿›ç¨‹ï¼Œå¹¶ä¸”è®¸å¤šç¨‹åºåœ¨å´©æºƒæ—¶æ— æ³•æ­£ç¡®åœ°è‡ªè¡Œé‡å¯ã€‚Supervisordå°†è¿›ç¨‹ä½œä¸ºå…¶å­è¿›ç¨‹å¯åŠ¨ï¼Œå¹¶ä¸”å¯ä»¥é…ç½®ä¸ºåœ¨å´©æºƒæ—¶è‡ªåŠ¨é‡æ–°å¯åŠ¨å®ƒä»¬ã€‚ä¹Ÿå¯ä»¥å°†å…¶è‡ªåŠ¨é…ç½®ä¸ºè‡ªè¡Œè°ƒç”¨å¯åŠ¨è¿›ç¨‹ã€‚</p>
<p>:::</p>
<p><strong>å‡†ç¡®æ€§</strong></p>
<p>:::infoå‡†ç¡®æ€§</p>
<p>åœ¨UNIXä¸Šï¼Œé€šå¸¸å¾ˆéš¾è·å¾—å‡†ç¡®çš„å¯åŠ¨/å…³é—­çŠ¶æ€ä¿¡æ¯ã€‚Pidfileç»å¸¸è¯´è°ã€‚Supervisordå°†æµç¨‹ä½œä¸ºå­æµç¨‹å¯åŠ¨ï¼Œå› æ­¤å®ƒå§‹ç»ˆçŸ¥é“å…¶å­çº§çš„çœŸå®ä¸Š/ä¸‹çŠ¶æ€ï¼Œå¹¶ä¸”å¯ä»¥æ–¹ä¾¿åœ°æŸ¥è¯¢è¯¥æ•°æ®ã€‚</p>
<p>:::</p>
<p><strong>æˆæƒ</strong></p>
<p>:::infoæˆæƒ</p>
<p>éœ€è¦æ§åˆ¶æµç¨‹çŠ¶æ€çš„ç”¨æˆ·é€šå¸¸åªéœ€è¦è¿™æ ·åšã€‚ä»–ä»¬ä¸å¸Œæœ›æˆ–ä¸éœ€è¦å®Œå…¨çš„Shellè®¿é—®è¿è¡Œè¿™äº›è¿›ç¨‹çš„è®¡ç®—æœºã€‚ä¾¦å¬&quot;ä½&quot; TCPç«¯å£çš„è¿›ç¨‹é€šå¸¸éœ€è¦ä»¥rootç”¨æˆ·èº«ä»½å¯åŠ¨å’Œé‡æ–°å¯åŠ¨ï¼ˆUNIXåŠŸèƒ½ä¸å…¨ï¼‰ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå…è®¸&quot;æ­£å¸¸&quot;äººå‘˜åœæ­¢æˆ–é‡æ–°å¯åŠ¨è¿™æ ·çš„è¿‡ç¨‹æ˜¯å®Œå…¨å¯ä»¥çš„ï¼Œä½†æ˜¯ä¸ºä»–ä»¬æä¾›shellè®¿é—®é€šå¸¸æ˜¯ä¸åˆ‡å®é™…çš„ï¼Œå¹¶ä¸”ä¸ºä»–ä»¬æä¾›rootè®¿é—®æˆ–sudoè®¿é—®é€šå¸¸æ˜¯ä¸å¯èƒ½çš„ã€‚ï¼ˆæ­£ç¡®ï¼‰ä¹Ÿå¾ˆéš¾å‘ä»–ä»¬è§£é‡Šä¸ºä»€ä¹ˆå­˜åœ¨æ­¤é—®é¢˜ã€‚å¦‚æœè¶…çº§ç”¨æˆ·ä»¥rootç”¨æˆ·èº«ä»½å¯åŠ¨ï¼Œåˆ™å¯ä»¥å…è®¸&quot;æ™®é€š&quot;ç”¨æˆ·æ§åˆ¶æ­¤ç±»è¿‡ç¨‹ï¼Œè€Œæ— éœ€å‘ä»–ä»¬è§£é‡Šé—®é¢˜çš„å¤æ‚æ€§ã€‚Supervisorctlå…è®¸ä»¥éå¸¸æœ‰é™çš„å½¢å¼è®¿é—®è®¡ç®—æœº</p>
<p>:::</p>
<p><strong>è¿›ç¨‹ç»„</strong></p>
<p>:::infoè¿›ç¨‹ç»„</p>
<p>æµç¨‹é€šå¸¸éœ€è¦æˆç»„åœ°å¯åŠ¨å’Œåœæ­¢ï¼Œæœ‰æ—¶ç”šè‡³éœ€è¦æŒ‰ç…§&quot;ä¼˜å…ˆçº§é¡ºåº&quot;è¿›è¡Œã€‚é€šå¸¸å¾ˆéš¾å‘äººä»¬è§£é‡Šå¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œã€‚Supervisorå…è®¸æ‚¨ä¸ºè¿›ç¨‹åˆ†é…ä¼˜å…ˆçº§ï¼Œå¹¶å…è®¸ç”¨æˆ·é€šè¿‡Supervisorctlå®¢æˆ·ç«¯å‘å‡ºå‘½ä»¤ï¼Œå¦‚&quot;å…¨éƒ¨å¯åŠ¨&quot;å’Œ&quot;å…¨éƒ¨é‡æ–°å¯åŠ¨&quot;ï¼Œè¿™å°†æŒ‰é¢„å…ˆåˆ†é…çš„ä¼˜å…ˆçº§é¡ºåºå¯åŠ¨å®ƒä»¬ã€‚æ­¤å¤–ï¼Œå¯ä»¥å°†è¿›ç¨‹åˆ†ä¸º&quot;è¿›ç¨‹ç»„&quot;ï¼Œå¹¶ä¸”å¯ä»¥å°†ä¸€ç»„é€»è¾‘ç›¸å…³çš„è¿›ç¨‹ä½œä¸ºä¸€ä¸ªå•å…ƒåœæ­¢å’Œå¯åŠ¨ã€‚</p>
<p>:::</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="112-ç‰¹å¾">1.1.2 ç‰¹å¾<a href="#112-ç‰¹å¾" class="hash-link" aria-label="1.1.2 ç‰¹å¾çš„ç›´æ¥é“¾æ¥" title="1.1.2 ç‰¹å¾çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<p><strong>ç®€å•</strong></p>
<p>:::infoç®€å•</p>
<p>é€šè¿‡ç®€å•æ˜“æ‡‚çš„INIæ ·å¼é…ç½®æ–‡ä»¶é…ç½®Supervisorã€‚å®ƒæä¾›äº†è®¸å¤šæŒ‰è¿›ç¨‹é€‰æ‹©çš„é€‰é¡¹ï¼Œä½¿æ‚¨çš„ç”Ÿæ´»æ›´åŠ è½»æ¾ï¼Œä¾‹å¦‚é‡æ–°å¯åŠ¨å¤±è´¥çš„è¿›ç¨‹å’Œè‡ªåŠ¨æ—¥å¿—è½®æ¢ã€‚</p>
<p>:::</p>
<p><strong>é›†ä¸­</strong></p>
<p>:::infoé›†ä¸­</p>
<p>Supervisorä¸ºæ‚¨æä¾›äº†ä¸€ä¸ªå¼€å§‹ï¼Œåœæ­¢å’Œç›‘è§†è¿‡ç¨‹çš„åœ°æ–¹ã€‚å¯ä»¥å•ç‹¬æˆ–æˆç»„æ§åˆ¶è¿‡ç¨‹ã€‚æ‚¨å¯ä»¥é…ç½®Supervisorä»¥æä¾›æœ¬åœ°æˆ–è¿œç¨‹å‘½ä»¤è¡Œå’ŒWebç•Œé¢ã€‚</p>
<p>:::</p>
<p><strong>é«˜æ•ˆçš„</strong></p>
<p>:::infoé«˜æ•ˆ</p>
<p>Supervisoré€šè¿‡fork / execå¯åŠ¨å…¶å­è¿›ç¨‹ï¼Œå¹¶ä¸”å­è¿›ç¨‹ä¸å®ˆæŠ¤ã€‚è¿›ç¨‹ç»ˆæ­¢æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šç«‹å³å‘Supervisorå‘é€ä¿¡å·ï¼Œè¿™ä¸æŸäº›ä¾èµ–éº»çƒ¦çš„PIDæ–‡ä»¶å’Œå®šæœŸè½®è¯¢ä»¥é‡æ–°å¯åŠ¨å¤±è´¥çš„è¿›ç¨‹çš„è§£å†³æ–¹æ¡ˆä¸åŒã€‚</p>
<p>:::</p>
<p><strong>å¯æ‰©å±•çš„</strong></p>
<p>:::infoå¯æ‰©å±•</p>
<p>Supervisorå…·æœ‰ä¸€ä¸ªç®€å•çš„äº‹ä»¶é€šçŸ¥åè®®ï¼Œè¯¥åè®®å¯ä»¥ä½¿ç”¨ä»»ä½•è¯­è¨€ç¼–å†™çš„ç¨‹åºå¯¹å…¶è¿›è¡Œç›‘è§†ï¼Œå¹¶ä¸”å…·æœ‰ç”¨äºæ§åˆ¶çš„XML-RPCæ¥å£ã€‚å®ƒè¿˜ä½¿ç”¨æ‰©å±•ç‚¹æ„å»ºï¼ŒPythonå¼€å‘äººå‘˜å¯ä»¥åˆ©ç”¨è¿™äº›æ‰©å±•ç‚¹ã€‚</p>
<p>:::</p>
<p><strong>å…¼å®¹</strong></p>
<p>:::infoå…¼å®¹</p>
<p>é™¤Windowså¤–ï¼ŒSupervisorå‡ ä¹é€‚ç”¨äºæ‰€æœ‰å…¶ä»–æ–¹é¢ã€‚å®ƒå·²åœ¨Linuxï¼ŒMac OS Xï¼ŒSolariså’ŒFreeBSDä¸Šç»è¿‡æµ‹è¯•å’Œæ”¯æŒã€‚å®ƒå®Œå…¨ç”¨Pythonç¼–å†™ï¼Œå› æ­¤å®‰è£…ä¸éœ€è¦Cç¼–è¯‘å™¨ã€‚</p>
<p>:::</p>
<p><strong>ä¹…ç»è€ƒéªŒ</strong></p>
<p>:::infoä¹…ç»è€ƒéªŒ</p>
<p>å°½ç®¡Supervisorå¦‚ä»Šéå¸¸æ´»è·ƒï¼Œä½†å®ƒä¸æ˜¯æ–°è½¯ä»¶ã€‚Supervisorå·²ç»å­˜åœ¨äº†å¾ˆå¤šå¹´ï¼Œå¹¶ä¸”å·²ç»åœ¨è®¸å¤šæœåŠ¡å™¨ä¸Šä½¿ç”¨ã€‚</p>
<p>:::</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="113-supervisorç»„ä»¶">1.1.3 Supervisorç»„ä»¶<a href="#113-supervisorç»„ä»¶" class="hash-link" aria-label="1.1.3 Supervisorç»„ä»¶çš„ç›´æ¥é“¾æ¥" title="1.1.3 Supervisorç»„ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h4>
<p><strong>supervisord</strong></p>
<p>:::infoè¯´æ˜</p>
<p>æœåŠ¡å™¨Supervisorçš„åç§°ä¸º<strong>supervisor</strong>ã€‚å®ƒè´Ÿè´£è‡ªè¡Œè°ƒç”¨å¯åŠ¨å­ç¨‹åºï¼Œå“åº”æ¥è‡ªå®¢æˆ·ç«¯çš„å‘½ä»¤ï¼Œé‡æ–°å¯åŠ¨å´©æºƒæˆ–é€€å‡ºçš„å­è¿›ç¨‹ï¼Œè®°å½•å…¶å­è¿›ç¨‹<code>stdout</code>å’Œ<code>stderr</code> è¾“å‡ºä»¥åŠç”Ÿæˆå’Œå¤„ç†ä¸å­è¿›ç¨‹ç”Ÿå­˜æœŸä¸­çš„ç‚¹ç›¸å¯¹åº”çš„&quot;äº‹ä»¶&quot;ã€‚</p>
<p>æœåŠ¡å™¨è¿›ç¨‹ä½¿ç”¨é…ç½®æ–‡ä»¶ã€‚å®ƒé€šå¸¸ä½äº<code>/etc/supervisord.confä¸­</code>ã€‚æ­¤é…ç½®æ–‡ä»¶æ˜¯&quot; Windows-INI&quot;æ ·å¼çš„é…ç½®æ–‡ä»¶ã€‚é€šè¿‡é€‚å½“çš„æ–‡ä»¶ç³»ç»Ÿæƒé™æ¥ç¡®ä¿æ­¤æ–‡ä»¶çš„å®‰å…¨å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒå¯èƒ½åŒ…å«æœªåŠ å¯†çš„ç”¨æˆ·åå’Œå¯†ç ã€‚</p>
<p>:::</p>
<p><strong>supervisorctl</strong></p>
<p>:::infoè¯´æ˜</p>
<p>Supervisorçš„å‘½ä»¤è¡Œå®¢æˆ·ç«¯åä¸º <strong>supervisorctl</strong>ã€‚å®ƒæä¾›äº†ç±»ä¼¼äºshellçš„ç•Œé¢ï¼Œå¯ä¸<strong>supervisor</strong>æä¾›çš„åŠŸèƒ½ç»“åˆä½¿ç”¨ã€‚ä» <strong>supervisorctl</strong>ï¼Œç”¨æˆ·å¯ä»¥è¿æ¥åˆ°ä¸åŒçš„ <strong>supervisord</strong>è¿›ç¨‹ï¼ˆä¸€æ¬¡ä¸€ä¸ªï¼‰ï¼Œå¯¹ï¼Œåœæ­¢æ§åˆ¶çš„å­æµç¨‹è·å¾—åœ°ä½å’Œå¯åŠ¨çš„å­è¿›ç¨‹ï¼Œå¹¶è·å¾—è¿è¡Œçš„è¿›ç¨‹çš„åˆ—è¡¨<strong>supervisord</strong>ã€‚</p>
<p>å‘½ä»¤è¡Œå®¢æˆ·ç«¯é€šè¿‡UNIXåŸŸå¥—æ¥å­—æˆ–Internetï¼ˆTCPï¼‰å¥—æ¥å­—ä¸æœåŠ¡å™¨å¯¹è¯ã€‚æœåŠ¡å™¨å¯ä»¥æ–­è¨€å®¢æˆ·ç«¯çš„ç”¨æˆ·åº”è¯¥åœ¨å…è®¸å®¢æˆ·ç«¯æ‰§è¡Œå‘½ä»¤ä¹‹å‰å‡ºç¤ºèº«ä»½éªŒè¯å‡­æ®ã€‚å®¢æˆ·ç«¯è¿›ç¨‹é€šå¸¸ä½¿ç”¨ä¸æœåŠ¡å™¨ç›¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯ä»»ä½•å¸¦æœ‰<code>[supervisorctl]</code>èŠ‚çš„é…ç½®æ–‡ä»¶éƒ½å¯ä»¥ä½¿ç”¨ã€‚</p>
<p>:::</p>
<p><strong>Web Server</strong></p>
<p>:::infoè¯´æ˜</p>
<p>ä¸åŠŸèƒ½åª²ç¾Aï¼ˆç¨€ç–ï¼‰çš„Webç”¨æˆ·ç•Œé¢ <strong>supervisorctl</strong>å¯ä»¥é€šè¿‡æµè§ˆå™¨ï¼Œå¦‚æœä½ å¼€å§‹è®¿é—® <strong>supervisord</strong>å¯¹äº’è”ç½‘æ’åº§ã€‚æ¿€æ´»é…ç½®æ–‡ä»¶çš„<code>[inet_http_server]</code>éƒ¨åˆ†åï¼Œè¯·è®¿é—®æœåŠ¡å™¨URLï¼ˆä¾‹å¦‚<code>http://localhost:9001/</code>ï¼‰ä»¥é€šè¿‡Webç•Œé¢æŸ¥çœ‹å’Œæ§åˆ¶è¿›ç¨‹çŠ¶æ€ã€‚</p>
<p>:::</p>
<p><strong>XML-RPC Interface</strong></p>
<p>:::infoè¯´æ˜</p>
<p>æœåŠ¡äºWeb UIçš„åŒä¸€HTTPæœåŠ¡å™¨æä¾›XML-RPCæ¥å£ï¼Œè¯¥æ¥å£å¯ç”¨äºè¯¢é—®å’Œæ§åˆ¶ç®¡ç†ç¨‹åºåŠå…¶è¿è¡Œçš„ç¨‹åºã€‚è¯·å‚é˜…<a href="http://supervisord.org/api.html#xml-rpc" target="_blank" rel="noopener noreferrer"><em>XML-RPC APIæ–‡æ¡£</em></a>ã€‚</p>
<p>:::</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2å®‰è£…supervisor">2.å®‰è£…supervisor<a href="#2å®‰è£…supervisor" class="hash-link" aria-label="2.å®‰è£…supervisorçš„ç›´æ¥é“¾æ¥" title="2.å®‰è£…supervisorçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="21-ç³»ç»Ÿpythonç¯å¢ƒ">2.1 ç³»ç»Ÿpythonç¯å¢ƒ<a href="#21-ç³»ç»Ÿpythonç¯å¢ƒ" class="hash-link" aria-label="2.1 ç³»ç»Ÿpythonç¯å¢ƒçš„ç›´æ¥é“¾æ¥" title="2.1 ç³»ç»Ÿpythonç¯å¢ƒçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ python -V</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Python 2.7.5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="22-å®‰è£…suprvisor">2.2 å®‰è£…suprvisor<a href="#22-å®‰  è£…suprvisor" class="hash-link" aria-label="2.2 å®‰è£…suprvisorçš„ç›´æ¥é“¾æ¥" title="2.2 å®‰è£…suprvisorçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>é…ç½®å›½å†…pipæº</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir ~/.pip</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat &gt; .pip/pip.conf &lt;&lt;&#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[global]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">index-url = https://pypi.tuna.tsinghua.edu.cn/simple/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>å®‰è£…æœ€æ–°ç‰ˆ</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># æ–¹æ³•ä¸€</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pip install supervisor</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># æ–¹æ³•äºŒ</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">yum -y install python-setuptools</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">easy_install supervisor</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># æŸ¥çœ‹ç‰ˆæœ¬</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ supervisord -v</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">4.2.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>å®‰è£…æŒ‡å®šç‰ˆæœ¬</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">pip install supervisor==3.3.5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3é…ç½®supervisor">3.é…ç½®supervisor<a href="#3é…ç½®supervisor" class="hash-link" aria-label="3.é…ç½®supervisorçš„ç›´æ¥é“¾æ¥" title="3.é…ç½®supervisorçš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-è¿è¡Œ-echo_supervisord_conf-å‘½ä»¤ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶">3.1 è¿è¡Œ <code>echo_supervisord_conf</code> å‘½ä»¤ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶<a href="#31-è¿è¡Œ-echo_supervisord_conf-å‘½ä»¤ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶" class="hash-link" aria-label="31-è¿è¡Œ-echo_supervisord_conf-å‘½ä»¤ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="31-è¿è¡Œ-echo_supervisord_conf-å‘½ä»¤ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>è¿è¡Œ<code>echo_supervisord_conf</code>å‘½ä»¤ï¼Œä¼šåœ¨å½“å‰ç»ˆç«¯çš„æ ‡å‡†è¾“å‡ºä¸­æ‰“å°ä¸€ä¸ªæ ·æœ¬Supervisoré…ç½®æ–‡ä»¶</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ echo_supervisord_conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; Sample supervisor config file.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; For more information on the config file, please see:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; http://supervisord.org/configuration.html</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; Notes:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  - Shell expansion (&quot;~&quot; or &quot;$HOME&quot;) is not supported.  Environment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;    variables can be expanded using this syntax: &quot;%(ENV_HOME)s&quot;.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  - Quotes around values are not supported, except in the case of</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;    the environment= options as shown below.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  - Comments must have a leading space: &quot;a=b ;comment&quot; not &quot;a=b;comment&quot;.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  - Command will be truncated if it looks like a config file comment, e.g.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;    &quot;command=bash -c &#x27;foo ; bar&#x27;&quot; will truncate to &quot;command=bash -c &#x27;foo &quot;.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; Warning:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  Paths throughout this example file use /tmp because it is available on most</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  systems.  You will likely need to change these to locations more appropriate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  for your system.  Some systems periodically delete older files in /tmp.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  Notably, if the socket file defined in the [unix_http_server] section below</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  is deleted, supervisorctl will be unable to connect to supervisord.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[unix_http_server]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">file=/tmp/supervisor.sock   ; the path to the socket file</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;chmod=0700                 ; socket file mode (default 0700)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;chown=nobody:nogroup       ; socket file uid:gid owner</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;username=user              ; default is no username (open server)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;password=123               ; default is no password (open server)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; Security Warning:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  The inet HTTP server is not enabled by default.  The inet HTTP server is</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  enabled by uncommenting the [inet_http_server] section below.  The inet</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  HTTP server is intended for use within a trusted environment only.  It</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  should only be bound to localhost or only accessible from within an</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  isolated, trusted network.  The inet HTTP server does not support any</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  form of encryption.  The inet HTTP server does not use authentication</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  by default (see the username= and password= options to add authentication).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;  Never expose the inet HTTP server to the public internet.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;[inet_http_server]         ; inet (TCP) server disabled by default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;port=127.0.0.1:9001        ; ip_address:port specifier, *:port for all iface</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;username=user              ; default is no username (open server)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;password=123               ; default is no password (open server)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[supervisord]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">logfile=/tmp/supervisord.log ; main log file; default $CWD/supervisord.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">logfile_maxbytes=50MB        ; max main logfile bytes b4 rotation; default 50MB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">logfile_backups=10           ; # of main logfile backups; 0 means none, default 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">loglevel=info                ; log level; default info; others: debug,warn,trace</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pidfile=/tmp/supervisord.pid ; supervisord pidfile; default supervisord.pid</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nodaemon=false               ; start in foreground if true; default false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">silent=false                 ; no logs to stdout if true; default false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">minfds=1024                  ; min. avail startup file descriptors; default 1024</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">minprocs=200                 ; min. avail process descriptors;default 200</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;umask=022                   ; process file creation umask; default 022</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;user=supervisord            ; setuid to this UNIX account at startup; recommended if root</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;identifier=supervisor       ; supervisord identifier, default is &#x27;supervisor&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;directory=/tmp              ; default is not to cd during start</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;nocleanup=true              ; don&#x27;t clean up tempfiles at start; default false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;childlogdir=/tmp            ; &#x27;AUTO&#x27; child log dir, default $TEMP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;environment=KEY=&quot;value&quot;     ; key value pairs to add to environment</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;strip_ansi=false            ; strip ansi escape codes in logs; def. false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; The rpcinterface:supervisor section must remain in the config file for</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; RPC (supervisorctl/web interface) to work.  Additional interfaces may be</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; added by defining them in separate [rpcinterface:x] sections.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[rpcinterface:supervisor]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; The supervisorctl section configures how supervisorctl will connect to</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; supervisord.  configure it match the settings in either the unix_http_server</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; or inet_http_server section.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[supervisorctl]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">serverurl=unix:///tmp/supervisor.sock ; use a unix:// URL  for a unix socket</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;serverurl=http://127.0.0.1:9001 ; use an http:// url to specify an inet socket</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;username=chris              ; should be same as in [*_http_server] if set</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;password=123                ; should be same as in [*_http_server] if set</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;prompt=mysupervisor         ; cmd line prompt (default &quot;supervisor&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;history_file=~/.sc_history  ; use readline history if available</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; The sample program section below shows all possible program subsection values.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; Create one or more &#x27;real&#x27; program: sections to be able to control them under</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; supervisor.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;[program:theprogramname]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;command=/bin/cat              ; the program (relative uses PATH, can take args)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;process_name=%(program_name)s ; process_name expr (default %(program_name)s)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;numprocs=1                    ; number of processes copies to start (def 1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;directory=/tmp                ; directory to cwd to before exec (def no cwd)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;umask=022                     ; umask for process (default None)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;priority=999                  ; the relative start priority (default 999)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;autostart=true                ; start at supervisord start (default: true)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;startsecs=1                   ; # of secs prog must stay up to be running (def. 1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;startretries=3                ; max # of serial start failures when starting (default 3)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;autorestart=unexpected        ; when to restart if exited after running (def: unexpected)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;exitcodes=0                   ; &#x27;expected&#x27; exit codes used with autorestart (default 0)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stopsignal=QUIT               ; signal used to kill process (default TERM)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stopwaitsecs=10               ; max num secs to wait b4 SIGKILL (default 10)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stopasgroup=false             ; send stop signal to the UNIX process group (default false)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;killasgroup=false             ; SIGKILL the UNIX process group (def false)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;user=chrism                   ; setuid to this UNIX account to run the program</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;redirect_stderr=true          ; redirect proc stderr to stdout (default false)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stdout_logfile=/a/path        ; stdout log path, NONE for none; default AUTO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stdout_logfile_maxbytes=1MB   ; max # logfile bytes b4 rotation (default 50MB)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stdout_logfile_backups=10     ; # of stdout logfile backups (0 means none, default 10)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stdout_capture_maxbytes=1MB   ; number of bytes in &#x27;capturemode&#x27; (default 0)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stdout_events_enabled=false   ; emit events on stdout writes (default false)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stdout_syslog=false           ; send stdout to syslog with process name (default false)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stderr_logfile=/a/path        ; stderr log path, NONE for none; default AUTO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stderr_logfile_maxbytes=1MB   ; max # logfile bytes b4 rotation (default 50MB)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stderr_logfile_backups=10     ; # of stderr logfile backups (0 means none, default 10)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stderr_capture_maxbytes=1MB   ; number of bytes in &#x27;capturemode&#x27; (default 0)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stderr_events_enabled=false   ; emit events on stderr writes (default false)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stderr_syslog=false           ; send stderr to syslog with process name (default false)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;environment=A=&quot;1&quot;,B=&quot;2&quot;       ; process environment additions (def no adds)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;serverurl=AUTO                ; override serverurl computation (childutils)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; The sample eventlistener section below shows all possible eventlistener</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; subsection values.  Create one or more &#x27;real&#x27; eventlistener: sections to be</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; able to handle event notifications sent by supervisord.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;[eventlistener:theeventlistenername]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;command=/bin/eventlistener    ; the program (relative uses PATH, can take args)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;process_name=%(program_name)s ; process_name expr (default %(program_name)s)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;numprocs=1                    ; number of processes copies to start (def 1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;events=EVENT                  ; event notif. types to subscribe to (req&#x27;d)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;buffer_size=10                ; event buffer queue size (default 10)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;directory=/tmp                ; directory to cwd to before exec (def no cwd)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;umask=022                     ; umask for process (default None)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;priority=-1                   ; the relative start priority (default -1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;autostart=true                ; start at supervisord start (default: true)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;startsecs=1                   ; # of secs prog must stay up to be running (def. 1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;startretries=3                ; max # of serial start failures when starting (default 3)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;autorestart=unexpected        ; autorestart if exited after running (def: unexpected)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;exitcodes=0                   ; &#x27;expected&#x27; exit codes used with autorestart (default 0)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stopsignal=QUIT               ; signal used to kill process (default TERM)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stopwaitsecs=10               ; max num secs to wait b4 SIGKILL (default 10)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stopasgroup=false             ; send stop signal to the UNIX process group (default false)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;killasgroup=false             ; SIGKILL the UNIX process group (def false)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;user=chrism                   ; setuid to this UNIX account to run the program</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;redirect_stderr=false         ; redirect_stderr=true is not allowed for eventlisteners</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stdout_logfile=/a/path        ; stdout log path, NONE for none; default AUTO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stdout_logfile_maxbytes=1MB   ; max # logfile bytes b4 rotation (default 50MB)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stdout_logfile_backups=10     ; # of stdout logfile backups (0 means none, default 10)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stdout_events_enabled=false   ; emit events on stdout writes (default false)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stdout_syslog=false           ; send stdout to syslog with process name (default false)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stderr_logfile=/a/path        ; stderr log path, NONE for none; default AUTO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stderr_logfile_maxbytes=1MB   ; max # logfile bytes b4 rotation (default 50MB)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stderr_logfile_backups=10     ; # of stderr logfile backups (0 means none, default 10)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stderr_events_enabled=false   ; emit events on stderr writes (default false)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;stderr_syslog=false           ; send stderr to syslog with process name (default false)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;environment=A=&quot;1&quot;,B=&quot;2&quot;       ; process environment additions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;serverurl=AUTO                ; override serverurl computation (childutils)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; The sample group section below shows all possible group values.  Create one</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; or more &#x27;real&#x27; group: sections to create &quot;heterogeneous&quot; process groups.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;[group:thegroupname]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;programs=progname1,progname2  ; each refers to &#x27;x&#x27; in [program:x] definitions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;priority=999                  ; the relative start priority (default 999)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; The [include] section can just contain the &quot;files&quot; setting.  This</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; setting can list multiple files (separated by whitespace or</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; newlines).  It can also contain wildcards.  The filenames are</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; interpreted as relative to this file.  Included files *cannot*</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">; include files themselves.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;[include]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;files = relative/directory/*.ini</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>å»æ‰æ³¨é‡Šåçš„å†…å®¹å¦‚ä¸‹</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ echo_supervisord_conf  &gt; hehe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ egrep -v &#x27;^$|^;&#x27; hehe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[unix_http_server]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">file=/tmp/supervisor.sock   ; the path to the socket file</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[supervisord]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">logfile=/tmp/supervisord.log ; main log file; default $CWD/supervisord.log</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">logfile_maxbytes=50MB        ; max main logfile bytes b4 rotation; default 50MB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">logfile_backups=10           ; # of main logfile backups; 0 means none, default 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">loglevel=info                ; log level; default info; others: debug,warn,trace</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pidfile=/tmp/supervisord.pid ; supervisord pidfile; default supervisord.pid</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">nodaemon=false               ; start in foreground if true; default false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">silent=false                 ; no logs to stdout if true; default false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">minfds=1024                  ; min. avail startup file descriptors; default 1024</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">minprocs=200                 ; min. avail process descriptors;default 200</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[rpcinterface:supervisor]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[supervisorctl]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">serverurl=unix:///tmp/supervisor.sock ; use a unix:// URL  for a unix socket</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-supervisoræŸ¥æ‰¾é…ç½®æ–‡ä»¶çš„é¡ºåº">3.2 supervisoræŸ¥æ‰¾é…ç½®æ–‡ä»¶çš„é¡ºåº<a href="#32-supervisoræŸ¥æ‰¾é…ç½®æ–‡ä»¶çš„é¡ºåº" class="hash-link" aria-label="3.2 supervisoræŸ¥æ‰¾é…ç½®æ–‡ä»¶çš„é¡ºåºçš„ç›´æ¥é“¾æ¥" title="3.2 supervisoræŸ¥æ‰¾é…ç½®æ–‡ä»¶çš„é¡ºåºçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>supervisoré…ç½®æ–‡ä»¶é€šå¸¸è¢«å‘½åä¸º<code>supervisor.conf</code>ï¼Œsupervisorå’Œsupervisorctléƒ½ä½¿ç”¨è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œå¦‚æœåœ¨æ²¡æœ‰<code>-c</code>é€‰é¡¹çš„æƒ…å†µä¸‹å¯åŠ¨äº†ä»»ä¸€åº”ç”¨ç¨‹åºï¼ˆè¯¥é€‰é¡¹ç”¨äºæ˜¾å¼å‘ŠçŸ¥åº”ç”¨ç¨‹åºé…ç½®æ–‡ä»¶åï¼‰ï¼Œåˆ™è¯¥åº”ç”¨ç¨‹åºå°†åœ¨ä»¥ä¸‹ä½ç½®æŒ‰æŒ‡å®šé¡ºåºæŸ¥æ‰¾åä¸º<code>supervisord.conf</code>çš„æ–‡ä»¶ã€‚å®ƒå°†ä½¿ç”¨æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚</strong></p>
<ol>
<li><code>../etc/supervisord.conf</code> (ç›¸å¯¹äºå¯æ‰§è¡Œæ–‡ä»¶)</li>
<li><code>../supervisord.conf</code> (ç›¸å¯¹äºå¯æ‰§è¡Œæ–‡ä»¶)</li>
<li><code>$CWD/supervisord.conf</code></li>
<li><code>$CWD/etc/supervisord.conf</code></li>
<li><code>/etc/supervisord.conf</code></li>
<li><code>/etc/supervisor/supervisord.conf</code> (è‡ªSupervisor 3.3.0ç‰ˆæœ¬å¼€å§‹)</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="33-æ‰‹åŠ¨ç¼–è¾‘supervisoré…ç½®æ–‡ä»¶">3.3 æ‰‹åŠ¨ç¼–è¾‘supervisoré…ç½®æ–‡ä»¶<a href="#33-æ‰‹åŠ¨ç¼–è¾‘supervisoré…ç½®æ–‡ä»¶" class="hash-link" aria-label="3.3 æ‰‹åŠ¨ç¼–è¾‘supervisoré…ç½®æ–‡ä»¶çš„ç›´æ¥é“¾æ¥" title="3.3 æ‰‹åŠ¨ç¼–è¾‘supervisoré…ç½®æ–‡ä»¶çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶å’Œæ—¥å¿—æ–‡ä»¶ç›®å½•</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir -p /etc/supervisor/config.d</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">mkdir /var/log/supervisor</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>åˆ›å»ºsupervisorè¿è¡Œç”¨æˆ·supervisor</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">useradd supervisor -s /sbin/nologin -M</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>æ‰‹åŠ¨ç¼–è¾‘supervisoré…ç½®æ–‡ä»¶</strong></p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æç¤º</div><div class="admonitionContent_BuS1"><p><strong>éœ€è¦æ³¨æ„çš„ç‚¹</strong></p></div></div>
<p>supervisoré»˜è®¤ä»¥rootèº«ä»½è¿è¡Œï¼Œå¦‚æœæƒ³è¦æŒ‡å®šç”¨æˆ·ï¼Œéœ€è¦åœ¨æ ‡ç­¾ <code>[supervisord]</code>ä¸‹æ·»åŠ  <code>user=xxx</code></p>
<p>å¦‚æœæ²¡æœ‰ä»¥-cé€‰é¡¹æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œåˆ™supervisorä¼šæŒ‰ç…§ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾é…ç½®æ–‡ä»¶ ï¼Œå¦åˆ™ä¼šæŠ¥é”™ <code>Error: No config file found at default paths (/usr/etc/supervisord.conf, /usr/supervisord.conf, supervisord.conf, etc/supervisord.conf, /etc/supervisord.conf, /etc/supervisor/supervisord.conf); use the -c option to specify a config file at a different path</code></p>
<ul>
<li>1 <code>../etc/supervisord.confï¼ˆç›¸å¯¹äºå¯æ‰§è¡Œæ–‡ä»¶ï¼‰</code></li>
<li>2 <code>../supervisord.confï¼ˆç›¸å¯¹äºå¯æ‰§è¡Œæ–‡ä»¶ï¼‰</code></li>
<li>3 <code>$CWD/supervisord.conf</code></li>
<li>4 <code>$CWD/etc/supervisord.conf</code></li>
<li>5 <code>/etc/supervisord.conf</code></li>
<li>6 <code>/etc/supervisor/supervisord.conf</code> (since Supervisor 3.3.0)</li>
</ul>
<p><a href="http://supervisord.org/configuration.html" target="_blank" rel="noopener noreferrer">å®˜æ–¹å¯¹äºé…ç½®æ–‡ä»¶æŸ¥æ‰¾é¡ºåºçš„è¯´æ˜</a></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat &gt; /etc/supervisor/supervisord.conf &lt;&lt;&#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[unix_http_server]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">file=/tmp/supervisor.sock   ; </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chmod = 0770</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chown = supervisor:supervisor   ; /tmp/supervisor.sockæ‰€æœ‰è€…ä¸ºsupervisor</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[supervisord]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">logfile=/var/log/supervisor/supervisord.log ; main log file;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">logfile_maxbytes=50MB        ; max main logfile bytes b4 rotation; default 50MB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">logfile_backups=10           ; # of main logfile backups; 0 means none, default 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">loglevel=info                ; log level; default info; others: debug,warn,trace</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pidfile=/tmp/supervisord.pid ; supervisord pidfile; default supervisord.pid</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;[inet_http_server]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;port=10.0.0.10:9001</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;username=test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;password=test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[rpcinterface:supervisor]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[supervisorctl]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">serverurl=unix:///tmp/supervisor.sock ; use a unix:// URL  for a unix socket</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[include]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">files = /etc/supervisor/config.d/*.ini</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>å½“æœ‰å¦‚ä¸‹é…ç½®æ—¶ï¼Œsupervisorè¿˜æä¾›äº†ä¸€ä¸ªwebç•Œé¢</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">[inet_http_server]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">port=10.0.0.10:9001</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">username=test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">password=test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>æµè§ˆå™¨è®¿é—® <code>IP:9001</code> ï¼Œç”¨æˆ·åå’Œå¯†ç éƒ½æ˜¯test</p>
<p><img decoding="async" loading="lazy" src="https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2020-06-3011.46.06.png" alt="iShot2020-06-3011.46.06" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="34-è®¾ç½®supervisoræ—¥å¿—æ»šåŠ¨">3.4 è®¾ç½®supervisoræ—¥å¿—æ»šåŠ¨<a href="#34-è®¾ç½®supervisoræ—¥å¿—æ»šåŠ¨" class="hash-link" aria-label="3.4 è®¾ç½®supervisoræ—¥å¿—æ»šåŠ¨çš„ç›´æ¥é“¾æ¥" title="3.4 è®¾ç½®supervisoræ—¥å¿—æ»šåŠ¨çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat &gt;/etc/logrotate.d/supervisor &lt;&lt;EOF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/var/log/supervisor/*.log {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       missingok</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       weekly</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       notifempty</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       nocompress</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="35-è®¾ç½®tmpfilesé˜²æ­¢sockæ–‡ä»¶è¢«æ¸…ç†">3.5 è®¾ç½®Tmpfilesé˜²æ­¢sockæ–‡ä»¶è¢«æ¸…ç†<a href="#35-è®¾ç½®tmpfilesé˜²æ­¢sockæ–‡ä»¶è¢«æ¸…ç†" class="hash-link" aria-label="3.5 è®¾ç½®Tmpfilesé˜²æ­¢sockæ–‡ä»¶è¢«æ¸…ç†çš„ç›´æ¥é“¾æ¥" title="3.5 è®¾ç½®Tmpfilesé˜²æ­¢sockæ–‡ä»¶è¢«æ¸…ç†çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat &gt;&gt; /usr/lib/tmpfiles.d/tmp.conf&lt;&lt;EOF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">x /tmp/supervisor.sock</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">x /tmp/supervisord.pid</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="36-ä½¿ç”¨systemdç®¡ç†supervisor">3.6 ä½¿ç”¨systemdç®¡ç†supervisor<a href="#36-ä½¿ç”¨systemdç®¡ç†supervisor" class="hash-link" aria-label="3.6 ä½¿ç”¨systemdç®¡ç†supervisorçš„ç›´æ¥é“¾æ¥" title="3.6 ä½¿ ç”¨systemdç®¡ç†supervisorçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><a href="https://github.com/Supervisor/initscripts" target="_blank" rel="noopener noreferrer">å¯¹å„æ“ä½œç³»ç»Ÿæä¾›supervisorè„šæœ¬çš„githubåœ°å€</a></p>
<p><strong>å…‹éš†é¡¹ç›®</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ git clone https://github.com/Supervisor/initscripts.git</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ cd initscripts</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ ls</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">centos-systemd-etcs  gentoo-matagus       redhat-init-equeffelec  redhat-sysconfig-equeffelec  ubuntu</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">debian-norrgard      opensuse-garymonson  redhat-init-jkoppe      redhat-sysconfig-jkoppe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fedora-bmbouter      README.md            redhat-init-mingalevme  slackware</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># å°†centos-systemd-etcsä¸­çš„å†…å®¹æ‹·è´åˆ°/usr/lib/systemd/system/supervisord.service</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat centos-systemd-etcs &gt;/usr/lib/systemd/system/supervisord.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong><code>centos-systemd-etcs</code>æ–‡ä»¶å†…å®¹</strong></p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>æç¤º</div><div class="admonitionContent_BuS1"><p><strong>è¦æ³¨æ„ <code>supervisord</code>Â å’Œ <code>supervisorctl</code>Â è¿™ä¸¤ä¸ªå‘½ä»¤çš„ç»å¯¹è·¯å¾„</strong></p></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># centos-systemd-etcsæ–‡ä»¶å†…å®¹</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat &gt; /usr/lib/systemd/system/supervisord.service &lt;&lt;&#x27;EOF&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># supervisord service for systemd (CentOS 7.0+)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># by ET-CS (https://github.com/ET-CS)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Description=Supervisor daemon</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Type=forking</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ExecStart=`which supervisord`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ExecStop=`which supervisorctl` $OPTIONS shutdown</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ExecReload=`which /usr/bin/supervisorctl` $OPTIONS reload</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">KillMode=process</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Restart=on-failure</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RestartSec=42s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">WantedBy=multi-user.target</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EOF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>å¯åŠ¨supervisordå¹¶åŠ å…¥å¼€æœºè‡ªå¯</strong></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl daemon-reload</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl start supervisord &amp;&amp; systemctl enable supervisord</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4supervisorç›¸å…³å‘½ä»¤">4.supervisorç›¸å…³å‘½ä»¤<a href="#4supervisorç›¸å…³å‘½ä»¤" class="hash-link" aria-label="4.supervisorç›¸å…³å‘½ä»¤çš„ç›´æ¥é“¾æ¥" title="4.supervisorç›¸å…³  å‘½ä»¤çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="41-supervisordå‘½ä»¤é€‰é¡¹">4.1 supervisordå‘½ä»¤é€‰é¡¹<a href="#41-supervisordå‘½ä»¤é€‰é¡¹" class="hash-link" aria-label="4.1 supervisordå‘½ä»¤é€‰é¡¹çš„ç›´æ¥é“¾æ¥" title="4.1 supervisordå‘½ä»¤é€‰é¡¹çš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong><code>supervisord</code>å‘½ä»¤</strong></p>
<table><thead><tr><th><strong>é€‰é¡¹</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong>-c FILE, --configuration=FILE</strong></td><td><strong>æŒ‡å®šsupervisoré…ç½®æ–‡ä»¶</strong></td></tr><tr><td><strong>-n, --nodaemon</strong></td><td><strong>åœ¨å‰å°è¿è¡Œsupervisord</strong></td></tr><tr><td><strong>-h, --help</strong></td><td><strong>æŸ¥çœ‹å¸®åŠ©</strong></td></tr><tr><td><strong>-u USER, --user=USER</strong></td><td><strong>UNIXç”¨æˆ·åæˆ–æ•°å­—ç”¨æˆ·æ ‡è¯†ã€‚å¦‚æœä»¥rootç”¨æˆ·èº«ä»½å¯åŠ¨supervisordï¼Œè¯·åœ¨å¯åŠ¨æœŸé—´å°½å¿«setuidç»™è¯¥ç”¨æˆ·</strong></td></tr><tr><td><strong>-m OCTAL, --umask=OCTAL</strong></td><td><strong>è¡¨ç¤ºsupervisordå¯åŠ¨ååº”è¯¥ä½¿ç”¨çš„  <a href="http://supervisord.org/glossary.html#term-umask" target="_blank" rel="noopener noreferrer">umask</a> å…«è¿›åˆ¶æ•°ï¼ˆä¾‹å¦‚022ï¼‰</strong></td></tr><tr><td><strong>-d PATH, --directory=PATH</strong></td><td><strong>å½“supervisordä½œä¸ºå®ˆæŠ¤è¿›ç¨‹è¿è¡Œæ—¶ï¼Œåœ¨å®ˆæŠ¤è¿›ç¨‹ä¹‹å‰cdåˆ°æ­¤ç›®å½•</strong></td></tr><tr><td><strong>-l FILE, --logfile=FILE</strong></td><td><strong>ç”¨ä½œsupervisordæ´»åŠ¨æ—¥å¿—çš„æ–‡ä»¶åè·¯å¾„</strong></td></tr><tr><td><strong>-y BYTES, --logfile_maxbytes=BYTES</strong></td><td><strong>æ—‹è½¬å‘ç”Ÿå‰ï¼Œsupervisordæ´»åŠ¨æ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å¤§å°ã€‚è¯¥å€¼æ˜¯åç¼€å€å¢çš„ï¼Œä¾‹å¦‚â€œ1â€æ˜¯ä¸€ä¸ªå­—èŠ‚ï¼Œâ€œ1MBâ€æ˜¯1å…†å­—èŠ‚ï¼Œâ€œ1GBâ€æ˜¯1åƒå…†å­—èŠ‚</strong></td></tr><tr><td><strong>-z NUM, --logfile_backups=NUM</strong></td><td><strong>è¦ä¿æŒçš„supervisordæ´»åŠ¨æ—¥å¿—çš„å¤‡ä»½å‰¯æœ¬æ•°ã€‚æ¯ä¸ªæ—¥å¿—æ–‡ä»¶çš„å¤§å°ä¸º<code>logfile_maxbytes</code></strong></td></tr><tr><td><strong>-e LEVEL, --loglevel=LEVEL</strong></td><td><strong>supervisoråº”è¯¥å†™å…¥æ´»åŠ¨æ—¥å¿—çš„æ—¥å¿—è®°å½•çº§åˆ«ã€‚æœ‰æ•ˆçº§åˆ«åŒ…æ‹¬<code>trace</code>(è¿½è¸ª), <code>debug</code>(è°ƒè¯•), <code>info</code>(ä¿¡æ¯), <code>warn</code>(è­¦å‘Š), <code>error</code>(é”™è¯¯),<code>critical(ä¸¥é‡)</code></strong></td></tr><tr><td><strong>-j FILE, --pidfile=FILE</strong></td><td><strong>supervisordåº”è¯¥å°†å…¶pidæ–‡ä»¶å†™å…¥çš„æ–‡ä»¶å</strong></td></tr><tr><td><strong>-i STRING, --identifier=STRING</strong></td><td><strong>ç”±supervisorå®ä¾‹çš„å„ç§å®¢æˆ·ç«¯UIå…¬å¼€çš„ä»»æ„å­—ç¬¦ä¸²æ ‡è¯†ç¬¦</strong></td></tr><tr><td><strong>-q PATH, --childlogdir=PATH</strong></td><td><strong>ç›®å½•çš„è·¯å¾„ï¼ˆå®ƒå¿…é¡»å·²ç»å­˜åœ¨ï¼‰ï¼Œå…¶ä¸­supervisorå°†å†™å…¥å…¶<code>AUTO</code> -modeå­è¿›ç¨‹æ—¥å¿—</strong></td></tr><tr><td><strong>-k, --nocleanup</strong></td><td><strong>é˜²æ­¢supervisordåœ¨å¯åŠ¨æ—¶æ‰§è¡Œæ¸…ç†ï¼ˆåˆ é™¤æ—§çš„<code>AUTO</code>è¿›ç¨‹æ—¥å¿—æ–‡ä»¶ï¼‰</strong></td></tr><tr><td><strong>-a NUM, --minfds=NUM</strong></td><td><strong>åœ¨æˆåŠŸå¯åŠ¨ä¹‹å‰ï¼Œsupervisordè¿›ç¨‹å¿…é¡»å¯ç”¨çš„æœ€å°æ–‡ä»¶æè¿°ç¬¦æ•°</strong></td></tr><tr><td><strong>-t, --strip_ansi</strong></td><td><strong>ä»æ‰€æœ‰å­æ—¥å¿—è¿›ç¨‹ä¸­å‰¥ç¦»ANSIè½¬ä¹‰åºåˆ—</strong></td></tr><tr><td><strong>-v, --version</strong></td><td><strong>æŸ¥çœ‹ç‰ˆæœ¬</strong></td></tr><tr><td><strong>--profile_options=LIST</strong></td><td><strong>ç”¨äºåˆ†æçš„é€—å·åˆ†éš”é€‰é¡¹åˆ—è¡¨ã€‚å¯¼è‡´ supervisordåœ¨æ¢æŸ¥å™¨ä¸‹è¿è¡Œï¼Œå¹¶æ ¹æ®é€‰é¡¹è¾“å‡ºç»“æœï¼Œè¿™äº›é€‰é¡¹æ˜¯ä»¥é€—å·åˆ†éš”çš„ä»¥ä¸‹åˆ—è¡¨ï¼šç´¯ç§¯ï¼Œå‘¼å«ï¼Œå‘¼å«è€…ã€‚ä¾‹å¦‚ç´¯è®¡ï¼Œæ¥ç”µè€…</strong></td></tr><tr><td><strong>--minprocs=NUM</strong></td><td><strong>åœ¨æˆåŠŸå¯åŠ¨ä¹‹å‰ï¼Œsupervisordè¿›ç¨‹å¿…é¡»å¯ç”¨çš„æœ€å°OSè¿›ç¨‹æ§½æ•°</strong></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="42-supervisorctlå‘½ä»¤é€‰é¡¹åŠåŠ¨ä½œ">4.2 supervisorctlå‘½ä»¤é€‰é¡¹åŠåŠ¨ä½œ<a href="#42-supervisorctlå‘½ä»¤é€‰é¡¹åŠåŠ¨ä½œ" class="hash-link" aria-label="4.2 supervisorctlå‘½ä»¤é€‰é¡¹åŠåŠ¨ä½œ çš„ç›´æ¥é“¾æ¥" title="4.2 supervisorctlå‘½ä»¤é€‰é¡¹åŠåŠ¨ä½œçš„ç›´æ¥é“¾æ¥">â€‹</a></h3>
<p><strong>supervisorctlå‘½ä»¤é€‰é¡¹</strong></p>
<table><thead><tr><th><strong>é€‰é¡¹</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong>-c, --configuration</strong></td><td><strong>é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤ä¸º/etc/supervisord.confï¼‰</strong></td></tr><tr><td><strong>-h, --help</strong></td><td><strong>æŸ¥çœ‹å¸®åŠ©</strong></td></tr><tr><td><strong>-i, --interactive</strong></td><td><strong>æ‰§è¡Œå‘½ä»¤åå¯åŠ¨äº¤äº’å¼shell</strong></td></tr><tr><td><strong>-s, --serverurl URL</strong></td><td><strong>supervisordæœåŠ¡å™¨æ­£åœ¨ä¾¦å¬çš„URL(default â€œ<a href="http://localhost:9001%E2%80%9D" target="_blank" rel="noopener noreferrer">http://localhost:9001â€</a>)</strong></td></tr><tr><td><strong>-u, --username</strong></td><td><strong>ç”¨äºä¸æœåŠ¡å™¨è¿›è¡Œèº«ä»½éªŒè¯çš„ç”¨æˆ·å</strong></td></tr><tr><td><strong>-p, --password</strong></td><td><strong>ç”¨äºä¸æœåŠ¡å™¨è¿›è¡Œèº«ä»½éªŒè¯çš„å¯†ç </strong></td></tr><tr><td><strong>-r, --history-file</strong></td><td><strong>ä¿ç•™readlineå†å²è®°å½•ï¼ˆå¦‚æœreadlineå¯ç”¨ï¼‰</strong></td></tr></tbody></table>
<p><strong>supervisorctlå‘½ä»¤åŠ¨ä½œ</strong></p>
<p><img decoding="async" loading="lazy" src="https://gitea.pptfz.cn/pptfz/picgo-images/raw/branch/master/img/iShot2021-02-01%2015.21.54.png" alt="iShot2021-02-01 15.21.54" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5supervisorä¿¡å·">5.supervisorä¿¡å·<a href="#5supervisorä¿¡å·" class="hash-link" aria-label="5.supervisorä¿¡å·çš„ç›´æ¥é“¾æ¥" title="5.supervisorä¿¡å·çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<p><strong>supervisorç¨‹åºå¯èƒ½ä¼šè¢«å‘é€ä¿¡å·ï¼Œä½¿å…¶åœ¨è¿è¡Œæ—¶æ‰§è¡ŒæŸäº›æ“ä½œã€‚</strong></p>
<p><strong>ä½ å¯ä»¥å°†è¿™äº›ä¿¡å·ä¸­çš„ä»»ä½•ä¸€ä¸ªå‘é€åˆ°å•ä¸ªsupervisordè¿›ç¨‹idï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶çš„<code>[supervisord]</code>éƒ¨åˆ†çš„<code>pidfile</code>å‚æ•°è¡¨ç¤ºçš„æ–‡ä»¶ä¸­æ‰¾åˆ°æ­¤è¿›ç¨‹ID ï¼ˆé»˜è®¤æƒ…å†µä¸‹ä¸º<code>$CWD/supervisord.pid</code>ï¼‰</strong></p>
<p><strong>SIGTERM</strong></p>
<ul>
<li><strong>supervisord</strong>çš„æ‰€æœ‰å­è¿›ç¨‹éƒ½å°†å…³é—­ã€‚è¿™å¯èƒ½éœ€è¦å‡ ç§’é’Ÿã€‚</li>
</ul>
<p><strong>SIGINT</strong></p>
<ul>
<li><strong>supervisord</strong>çš„æ‰€æœ‰å­è¿›ç¨‹éƒ½å°†å…³é—­ã€‚è¿™å¯èƒ½éœ€è¦å‡ ç§’é’Ÿã€‚</li>
</ul>
<p><strong>SIGQUIT</strong></p>
<ul>
<li><strong>supervisord</strong>çš„æ‰€æœ‰å­è¿›ç¨‹éƒ½å°†å…³é—­ã€‚è¿™å¯èƒ½éœ€è¦å‡ ç§’é’Ÿã€‚</li>
</ul>
<p><strong>SIGHUP</strong></p>
<ul>
<li><strong>supervisord</strong>å°†åœæ­¢æ‰€æœ‰è¿›ç¨‹ï¼Œä»å®ƒæ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªé…ç½®æ–‡ä»¶é‡æ–°åŠ è½½é…ç½®ï¼Œç„¶åå¯åŠ¨æ‰€æœ‰è¿›ç¨‹ã€‚</li>
</ul>
<p><strong>SIGUSR2</strong></p>
<ul>
<li><strong>supervisord</strong>å°†å…³é—­å¹¶é‡æ–°æ‰“å¼€ä¸»æ´»åŠ¨æ—¥å¿—å’Œæ‰€æœ‰å­æ—¥å¿—æ–‡ä»¶ã€‚</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6supervisorä¸€é”®å®‰è£…è„šæœ¬">6.supervisorä¸€é”®å®‰è£…è„šæœ¬<a href="#6supervisorä¸€é”®å®‰è£…è„šæœ¬" class="hash-link" aria-label="6.supervisorä¸€é”®å®‰è£…è„šæœ¬çš„ç›´æ¥é“¾æ¥" title="6.supervisorä¸€é”®å®‰è£…è„šæœ¬çš„ç›´æ¥é“¾æ¥">â€‹</a></h2>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#!/usr/bin/env bash</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">set -e</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TMP_FILE=/usr/lib/tmpfiles.d/tmp.conf</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># å®‰è£…supervisoræœ€æ–°ç‰ˆ</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">yum -y install python3-pip &amp;&amp; pip3 install supervisor</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># åˆ›å»ºç›®å½•</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[ -d /etc/supervisor ] || mkdir /etc/supervisor</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># åˆ›å»ºsupervisoré…ç½®æ–‡ä»¶</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat &gt; /etc/supervisor/supervisord.conf &lt;&lt;EOF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[unix_http_server]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">file=/tmp/supervisor.sock   ; /tmp/supervisor.sockæ‰€æœ‰è€…ä¸ºsupervisor</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chmod = 0770</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">chown = root:root</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[supervisord]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">logfile=/var/log/supervisor/supervisord.log ; main log file;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">logfile_maxbytes=50MB        ; max main logfile bytes b4 rotation; default 50MB</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">logfile_backups=10           ; # of main logfile backups; 0 means none, default 10</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">loglevel=info                ; log level; default info; others: debug,warn,trace</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">pidfile=/tmp/supervisord.pid ; supervisord pidfile; default supervisord.pid</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;[inet_http_server]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;port=10.0.0.10:9001</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;username=test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">;password=test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[rpcinterface:supervisor]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[supervisorctl]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">serverurl=unix:///tmp/supervisor.sock ; use a unix:// URL  for a unix socket</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[include]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">files = /etc/supervisor/config.d/*.ini</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># è®¾ç½®supervisoræ—¥å¿—æ»šåŠ¨</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat &gt; /etc/logrotate.d/supervisor &lt;&lt;EOF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">/var/log/supervisor/*.log {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       missingok</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       weekly</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       notifempty</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       nocompress</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># è®¾ç½®Tmpfilesé˜²æ­¢sockæ–‡ä»¶è¢«æ¸…ç†</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">grep -w &#x27;x /tmp/supervisor.sock&#x27; $TMP_FILE &amp;&amp; grep -w &#x27;x /tmp/supervisord.pid&#x27; $TMP_FILE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if [ $? -ne 0 ];then</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   sed -i.bak &#x27;/x \/tmp\/supervisord.pid/d&#x27; $TMP_FILE &amp;&amp; sed -i &#x27;/x \/tmp\/supervisor.sock/d&#x27; $TMP_FILE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   echo -e &quot;x /tmp/supervisor.sock\nx /tmp/supervisord.pid&quot; &gt;&gt; $TMP_FILE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">fi</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># å°†supervisoråŠ å…¥systemd</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">cat &gt;/usr/lib/systemd/system/supervisord.service &lt;&lt;EOF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># supervisord service for systemd (CentOS 7.0+)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># by ET-CS (https://github.com/ET-CS)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[Unit]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Description=Supervisor daemon</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[Service]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Type=forking</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ExecStart=`which supervisord`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ExecStop=`which supervisorctl` $OPTIONS shutdown</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">ExecReload=`which supervisorctl` $OPTIONS reload</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">KillMode=process</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Restart=on-failure</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">RestartSec=42s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[Install]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">WantedBy=multi-user.target</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EOF</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># åˆ›å»ºsupervisorç›¸å…³ç›®å½•</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[ -d /var/log/supervisor ] || mkdir /var/log/supervisor</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[ -d /etc/supervisor/config.d ] || mkdir -p /etc/supervisor/config.d</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># å¯åŠ¨supervisor</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl daemon-reload</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl start supervisord &amp;&amp; systemctl enable supervisord</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿" title="å¤åˆ¶" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="æ–‡ä»¶é€‰é¡¹å¡"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/linux/linuxæœåŠ¡/ssh/sshè¿æ¥æŠ¥é”™"><div class="pagination-nav__sublabel">ä¸Šä¸€é¡µ</div><div class="pagination-nav__label">sshè¿æ¥æŠ¥é”™</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/linux/linuxæœåŠ¡/supervisor/supervisorç®¡ç†docusaurus"><div class="pagination-nav__sublabel">ä¸‹ä¸€é¡µ</div><div class="pagination-nav__label">supervisorç®¡ç†docusaurus</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1supervisorç®€ä»‹" class="table-of-contents__link toc-highlight">1.Supervisorç®€ä»‹</a><ul><li><a href="#11-å®˜ç½‘å¯¹äºsupervisorçš„ä»‹ç»" class="table-of-contents__link toc-highlight">1.1 å®˜ç½‘å¯¹äºSupervisorçš„ä»‹ç»</a><ul><li><a href="#111-æ€»è§ˆ" class="table-of-contents__link toc-highlight">1.1.1 æ€»è§ˆ</a></li><li><a href="#112-ç‰¹å¾" class="table-of-contents__link toc-highlight">1.1.2 ç‰¹å¾</a></li><li><a href="#113-supervisorç»„ä»¶" class="table-of-contents__link toc-highlight">1.1.3 Supervisorç»„ä»¶</a></li></ul></li></ul></li><li><a href="#2å®‰è£…supervisor" class="table-of-contents__link toc-highlight">2.å®‰è£…supervisor</a><ul><li><a href="#21-ç³»ç»Ÿpythonç¯å¢ƒ" class="table-of-contents__link toc-highlight">2.1 ç³»ç»Ÿpythonç¯å¢ƒ</a></li><li><a href="#22-å®‰è£…suprvisor" class="table-of-contents__link toc-highlight">2.2 å®‰è£…suprvisor</a></li></ul></li><li><a href="#3é…ç½®supervisor" class="table-of-contents__link toc-highlight">3.é…ç½®supervisor</a><ul><li><a href="#31-è¿è¡Œ-echo_supervisord_conf-å‘½ä»¤ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶" class="table-of-contents__link toc-highlight">3.1 è¿è¡Œ <code>echo_supervisord_conf</code> å‘½ä»¤ç”Ÿæˆé»˜è®¤é…ç½®æ–‡ä»¶</a></li><li><a href="#32-supervisoræŸ¥æ‰¾é…ç½®æ–‡ä»¶çš„é¡ºåº" class="table-of-contents__link toc-highlight">3.2 supervisoræŸ¥æ‰¾é…ç½®æ–‡ä»¶çš„é¡ºåº</a></li><li><a href="#33-æ‰‹åŠ¨ç¼–è¾‘supervisoré…ç½®æ–‡ä»¶" class="table-of-contents__link toc-highlight">3.3 æ‰‹åŠ¨ç¼–è¾‘supervisoré…ç½®æ–‡ä»¶</a></li><li><a href="#34-è®¾ç½®supervisoræ—¥å¿—æ»šåŠ¨" class="table-of-contents__link toc-highlight">3.4 è®¾ç½®supervisoræ—¥å¿—æ»šåŠ¨</a></li><li><a href="#35-è®¾ç½®tmpfilesé˜²æ­¢sockæ–‡ä»¶è¢«æ¸…ç†" class="table-of-contents__link toc-highlight">3.5 è®¾ç½®Tmpfilesé˜²æ­¢sockæ–‡ä»¶è¢«æ¸…ç†</a></li><li><a href="#36-ä½¿ç”¨systemdç®¡ç†supervisor" class="table-of-contents__link toc-highlight">3.6 ä½¿ç”¨systemdç®¡ç†supervisor</a></li></ul></li><li><a href="#4supervisorç›¸å…³å‘½ä»¤" class="table-of-contents__link toc-highlight">4.supervisorç›¸å…³å‘½ä»¤</a><ul><li><a href="#41-supervisordå‘½ä»¤é€‰é¡¹" class="table-of-contents__link toc-highlight">4.1 supervisordå‘½ä»¤é€‰é¡¹</a></li><li><a href="#42-supervisorctlå‘½ä»¤é€‰é¡¹åŠåŠ¨ä½œ" class="table-of-contents__link toc-highlight">4.2 supervisorctlå‘½ä»¤é€‰é¡¹åŠåŠ¨ä½œ</a></li></ul></li><li><a href="#5supervisorä¿¡å·" class="table-of-contents__link toc-highlight">5.supervisorä¿¡å·</a></li><li><a href="#6supervisorä¸€é”®å®‰è£…è„šæœ¬" class="table-of-contents__link toc-highlight">6.supervisorä¸€é”®å®‰è£…è„šæœ¬</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">ç¬”è®°</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 æ³¡æ³¡åè‚¥çš‚o</div></div></div></footer></div>
</body>
</html>