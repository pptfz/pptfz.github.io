# ç³»ç»Ÿä¼˜åŒ–è„šæœ¬



import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs>
  <TabItem value="cenots7" label="centos7" default>

```shell
#!/usr/bin/env bash
#

set -e

# ä¿®æ”¹ç³»ç»Ÿyumæºä¸ºaliyunå¹¶æ·»åŠ epelæº
mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak
[ ! -e /etc/yum.repos.d/CentOS-Base.repo ] && curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo && sed -i -e '/mirrors.cloud.aliyuncs.com/d' -e '/mirrors.aliyuncs.com/d' /etc/yum.repos.d/CentOS-Base.repo

[ ! -e /etc/yum.repos.d/epel.repo ] && curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo
yum makecache
yum -y install ntpdate tar wget net-tools git vim tree lrzsz htop iftop iotop psmisc python36 python3-devel zlib zlib-devel gcc gcc-c++ conntrack-tools jq socat bash-completion telnet nload strace tcpdump lsof sysstat

# å…³é—­swap
sed -i 's/.*swap.*/#&/' /etc/fstab

# å…³é—­é˜²ç«å¢™ã€selinuxã€NetworkManager
systemctl disable firewalld NetworkManager
sed -i '7s/enforcing/disabled/' /etc/selinux/config

# åŒæ­¥æ—¶é—´è®¡åˆ’ä»»åŠ¡
echo "*/10 * * * * /usr/sbin/ntpdate ntp2.aliyun.com &>/dev/null" >> /var/spool/cron/root

# å†å²å‘½ä»¤æ˜¾ç¤ºæ—¶é—´
sed -i '/HISTFILESIZE=2000/d' /etc/bashrc
sed -i '/HISTSIZE=2000/d' /etc/bashrc
sed -i '/HISTTIMEFORMAT="%Y-%m-%d %H:%M:%S "/d' /etc/bashrc
sed -i '/export HISTTIMEFORMAT/d' /etc/bashrc
cat >> /etc/bashrc << EOF
HISTFILESIZE=2000
HISTSIZE=2000
HISTTIMEFORMAT="%Y-%m-%d %H:%M:%S "
export HISTTIMEFORMAT
EOF
source /etc/bashrc

# ä¿®æ”¹ç³»ç»Ÿæœ€å¤§æ–‡ä»¶æè¿°ç¬¦
sed -i '/root soft nofile 65535/d' /etc/security/limits.conf
sed -i '/root hard nofile 65535/d' /etc/security/limits.conf
sed -i '/* soft nofile 65535/d' /etc/security/limits.conf
sed -i '/* hard nofile 65535/d' /etc/security/limits.conf
cat >>/etc/security/limits.conf<<'EOF'
root soft nofile 65535
root hard nofile 65535
* soft nofile 65535
* hard nofile 65535
EOF

# è®¾ç½®pipå›½å†…æº
[ -d ~/.pip ] || mkdir ~/.pip
cat > ~/.pip/pip.conf << EOF
[global]
index-url = https://mirrors.aliyun.com/pypi/simple/

[install]
trusted-host=mirrors.aliyun.com
EOF

# å®‰è£… glances mycli 
pip3 install --upgrade pip
pip3 install glances mycli==1.24.0

# è®¾ç½®åˆ«å
cat >> ~/.bashrc << EOF
alias n='netstat -ntpl'
alias u='netstat -nupl'
alias a='netstat -natupl'
EOF

# é‡å¯ç³»ç»Ÿä½¿éƒ¨åˆ†é…ç½®ç”Ÿæ•ˆ
reboot
```

  </TabItem>
  <TabItem value="rocky10" label="rocky10">

```shell
#!/usr/bin/env bash
#

set -e


# ä¿®æ”¹ç³»ç»Ÿyumæºä¸ºé˜¿é‡Œäº‘
sed -e 's|^mirrorlist=|#mirrorlist=|g' \
    -e 's|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.aliyun.com/rockylinux|g' \
    -i.bak \
    /etc/yum.repos.d/[Rr]ocky*.repo


# æ·»åŠ epelæº
dnf install -y epel-release


# ä¿®æ”¹epelæºä¸ºé˜¿é‡Œäº‘
sed -e 's|^metalink=|#metalink=|g' \
    -e 's|^#baseurl=https://download.example/pub/epel|baseurl=https://mirrors.aliyun.com/epel|g' \
    -i.bak \
    /etc/yum.repos.d/epel.repo


# æ›´æ–°ç¼“å­˜
dnf makecache


# è®¾ç½®24å°æ—¶åˆ¶
localectl set-locale LC_TIME=en_GB.UTF-8


# å®‰è£…ä¸€äº›å¸¸ç”¨å·¥å…·
dnf -y install \
  tar \
  wget \
  net-tools \
  git \
  vim \
  tree \
  lrzsz \
  htop \
  iftop \
  iotop \
  psmisc \
  python3-devel \
  zlib \
  zlib-devel \
  gcc \
  gcc-c++ \
  conntrack-tools \
  jq \
  socat \
  bash-completion \
  telnet \
  nload \
  strace \
  tcpdump \
  lsof \
  sysstat


# å…³é—­swap
sed -i.bak '/swap/s/^/#/' /etc/fstab


# å…³é—­é˜²ç«å¢™ã€selinux
systemctl disable firewalld
sed -i.bak 's/^SELINUX=.*/SELINUX=disabled/' /etc/selinux/config


# é…ç½®æ—¶é—´åŒæ­¥
dnf install -y chrony

systemctl enable --now chronyd

sed -i.bak -e '/^pool 2\.rocky\.pool\.ntp\.org iburst$/d' \
    -e '/^# Use NTP servers from DHCP\./i\
server ntp.aliyun.com iburst\n\
server ntp.tencent.com iburst\n\
server cn.pool.ntp.org iburst
' /etc/chrony.conf

systemctl restart chronyd


# å†å²å‘½ä»¤æ˜¾ç¤ºæ—¶é—´
sed -i '/HISTFILESIZE=2000/d' /etc/bashrc
sed -i '/HISTSIZE=2000/d' /etc/bashrc
sed -i '/HISTTIMEFORMAT="%Y-%m-%d %H:%M:%S "/d' /etc/bashrc
sed -i '/export HISTTIMEFORMAT/d' /etc/bashrc
cat >> /etc/bashrc << EOF
HISTFILESIZE=2000
HISTSIZE=2000
HISTTIMEFORMAT="%Y-%m-%d %H:%M:%S "
export HISTTIMEFORMAT
EOF
source /etc/bashrc


# é…ç½®å†å²å‘½ä»¤æ˜¾ç¤ºæ—¶é—´
sed -i.bak '/HISTFILESIZE=2000/d; /HISTSIZE=2000/d; /HISTTIMEFORMAT="/d; /export HISTTIMEFORMAT/d' /etc/bashrc

cat >> /etc/bashrc << 'EOF'
HISTFILESIZE=2000
HISTSIZE=2000
HISTTIMEFORMAT="%Y-%m-%d %H:%M:%S "
export HISTTIMEFORMAT
EOF

source /etc/bashrc


# ä¿®æ”¹ç³»ç»Ÿæœ€å¤§æ–‡ä»¶æè¿°ç¬¦
cat >> /etc/security/limits.conf << 'EOF'
root soft nofile 65535
root hard nofile 65535
* soft nofile 65535
* hard nofile 65535
EOF


# è®¾ç½®pipå›½å†…æº
[ -d ~/.pip ] || mkdir ~/.pip
cat > ~/.pip/pip.conf << EOF
[global]
index-url = https://mirrors.aliyun.com/pypi/simple/

[install]
trusted-host=mirrors.aliyun.com
EOF


# å®‰è£… glances mycli 
pip3 install --upgrade pip
pip3 install glances mycli


# è®¾ç½®åˆ«å
cat >> ~/.bashrc << EOF
alias n='netstat -ntpl'
alias u='netstat -nupl'
alias a='netstat -natupl'
EOF


# é‡å¯ç³»ç»Ÿä½¿éƒ¨åˆ†é…ç½®ç”Ÿæ•ˆ
reboot
```

  </TabItem>
  <TabItem value="ubuntu" label="ubuntu">
    This is a banana ğŸŒ
  </TabItem>
</Tabs>





